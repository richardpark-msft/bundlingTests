/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={2121:function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;var o=r(3001),i=r(7542),a="context",s=new o.NoopContextManager,c=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return i.registerGlobal(a,e),e},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,r){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,n([e,t,r],i))},e.prototype.bind=function(e,t){return void 0===t&&(t=this.active()),this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return i.getGlobal(a)||s},e.prototype.disable=function(){this._getContextManager().disable(),i.unregisterGlobal(a)},e}();t.ContextAPI=c},6786:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;var n=r(2898),o=r(6268),i=r(7542),a=function(){function e(){function e(e){return function(){var t=i.getGlobal("diag");if(t)return t[e].apply(t,arguments)}}var t=this;t.setLogger=function(e,r){var a;if(void 0===r&&(r=o.DiagLogLevel.INFO),e!==t)i.registerGlobal("diag",n.createLogLevelDiagLogger(r,e),!0);else{var s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");t.error(null!==(a=s.stack)&&void 0!==a?a:s.message)}},t.disable=function(){i.unregisterGlobal("diag")},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();t.DiagAPI=a},655:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;var n=r(6580),o=r(6422),i=r(7542),a="propagation",s=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(e){return i.registerGlobal(a,e),e},e.prototype.inject=function(e,t,r){return void 0===r&&(r=o.defaultTextMapSetter),this._getGlobalPropagator().inject(e,t,r)},e.prototype.extract=function(e,t,r){return void 0===r&&(r=o.defaultTextMapGetter),this._getGlobalPropagator().extract(e,t,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){i.unregisterGlobal(a)},e.prototype._getGlobalPropagator=function(){return i.getGlobal(a)||n.NOOP_TEXT_MAP_PROPAGATOR},e}();t.PropagationAPI=s},7428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;var n=r(5154),o=r(5922),i=r(7542),a="trace",s=function(){function e(){this._proxyTracerProvider=new n.ProxyTracerProvider,this.isSpanContextValid=o.isSpanContextValid}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){return this._proxyTracerProvider.setDelegate(e),i.registerGlobal(a,this._proxyTracerProvider),this._proxyTracerProvider},e.prototype.getTracerProvider=function(){return i.getGlobal(a)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){i.unregisterGlobal(a),this._proxyTracerProvider=new n.ProxyTracerProvider},e}();t.TraceAPI=s},5808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4211:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4588:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;var i=r(7218),a=r(6194);o(r(5808),t),o(r(4211),t),t.createBaggage=function(e){return void 0===e&&(e={}),new i.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:function(){return e}}}},7218:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;var r=function(){function e(e){this._entries=e?new Map(e):new Map}return e.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map((function(e){return[e[0],e[1]]}))},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),o=0,i=t;o<i.length;o++){var a=i[o];n._entries.delete(a)}return n},e.prototype.clear=function(){return new e},e}();t.BaggageImpl=r},6194:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},791:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3212:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3001:function(e,t,r){"use strict";var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n};Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;var o=r(4858),i=function(){function e(){}return e.prototype.active=function(){return o.ROOT_CONTEXT},e.prototype.with=function(e,t,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return t.call.apply(t,n([r],o))},e.prototype.bind=function(e,t){return e},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();t.NoopContextManager=i},4858:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=t.setBaggage=t.getBaggage=t.isInstrumentationSuppressed=t.unsuppressInstrumentation=t.suppressInstrumentation=t.getSpanContext=t.setSpanContext=t.setSpan=t.getSpan=void 0;var n=r(776),o=u("OpenTelemetry Context Key SPAN"),i=u("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"),a=u("OpenTelemetry Baggage Key");function s(e){return e.getValue(o)||void 0}function c(e,t){return e.setValue(o,t)}function u(e){return Symbol.for(e)}t.getSpan=s,t.setSpan=c,t.setSpanContext=function(e,t){return c(e,new n.NoopSpan(t))},t.getSpanContext=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.context()},t.suppressInstrumentation=function(e){return e.setValue(i,!0)},t.unsuppressInstrumentation=function(e){return e.setValue(i,!1)},t.isInstrumentationSuppressed=function(e){return Boolean(e.getValue(i))},t.getBaggage=function(e){return e.getValue(a)||void 0},t.setBaggage=function(e,t){return e.setValue(a,t)},t.createContextKey=u;t.ROOT_CONTEXT=new function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(e){return r._currentContext.get(e)},r.setValue=function(t,n){var o=new e(r._currentContext);return o._currentContext.set(t,n),o},r.deleteValue=function(t){var n=new e(r._currentContext);return n._currentContext.delete(t),n}}},6672:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;var r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=function(){function e(e){return function(){var t=arguments;if(console){var r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}for(var t=0;t<r.length;t++)this[r[t].n]=e(r[t].c)}},8160:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(6332),t),o(r(6268),t)},2898:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;var n=r(6268);t.createLogLevelDiagLogger=function(e,t){function r(r,n){var o=t[r];return"function"==typeof o&&e>=n?o.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},6268:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,(r=t.DiagLogLevel||(t.DiagLogLevel={}))[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"},6563:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.diag=t.propagation=t.trace=t.context=t.isValidSpanId=t.isValidTraceId=t.isSpanContextValid=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0,o(r(4588),t),o(r(791),t),o(r(3212),t),o(r(8160),t),o(r(6580),t),o(r(6422),t),o(r(642),t),o(r(3609),t),o(r(2442),t),o(r(7401),t),o(r(8777),t),o(r(2830),t),o(r(5698),t),o(r(5154),t),o(r(375),t),o(r(6345),t),o(r(7628),t),o(r(3519),t),o(r(6774),t),o(r(633),t),o(r(9393),t),o(r(5510),t),o(r(1066),t),o(r(4615),t),o(r(2679),t),o(r(1221),t);var i=r(5922);Object.defineProperty(t,"INVALID_SPANID",{enumerable:!0,get:function(){return i.INVALID_SPANID}}),Object.defineProperty(t,"INVALID_TRACEID",{enumerable:!0,get:function(){return i.INVALID_TRACEID}}),Object.defineProperty(t,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return i.INVALID_SPAN_CONTEXT}}),Object.defineProperty(t,"isSpanContextValid",{enumerable:!0,get:function(){return i.isSpanContextValid}}),Object.defineProperty(t,"isValidTraceId",{enumerable:!0,get:function(){return i.isValidTraceId}}),Object.defineProperty(t,"isValidSpanId",{enumerable:!0,get:function(){return i.isValidSpanId}}),o(r(4858),t),o(r(3001),t),o(r(6672),t);var a=r(2121);t.context=a.ContextAPI.getInstance();var s=r(7428);t.trace=s.TraceAPI.getInstance();var c=r(655);t.propagation=c.PropagationAPI.getInstance();var u=r(6786);t.diag=u.DiagAPI.instance(),t.default={trace:t.trace,context:t.context,propagation:t.propagation,diag:t.diag}},7542:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;var n=r(6563),o=r(7994),i=r(1016),a=r(5401),s=i.VERSION.split(".")[0],c=Symbol.for("io.opentelemetry.js.api."+s),u=o._globalThis;t.registerGlobal=function(e,t,r){var o;void 0===r&&(r=!1),u[c]=null!==(o=u[c])&&void 0!==o?o:{version:i.VERSION};var a=u[c];if(r||!a[e])a.version===i.VERSION?a[e]=t:(s=new Error("@opentelemetry/api: All API registration versions must match"),n.diag.error(s.stack||s.message));else{var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);n.diag.error(s.stack||s.message)}},t.getGlobal=function(e){var t,r,n=null===(t=u[c])||void 0===t?void 0:t.version;if(n&&a.isCompatible(n))return null===(r=u[c])||void 0===r?void 0:r[e]},t.unregisterGlobal=function(e){var t=u[c];t&&delete t[e]}},5401:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;var n=r(1016),o=/^(\d+)\.(\d+)\.(\d+)(?:-(.*))?$/;function i(e){var t=new Set([e]),r=new Set,n=e.match(o);if(!n)return function(){return!1};var i=+n[1],a=+n[2],s=+n[3];function c(e){return r.add(e),!1}function u(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;var n=e.match(o);if(!n)return c(e);var l=+n[1],p=+n[2],d=+n[3];return i!==l?c(e):0===i?a===p&&s<=d?u(e):c(e):a<=p?u(e):c(e)}}t._makeCompatibilityCheck=i,t.isCompatible=i(n.VERSION)},2540:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:window},7994:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(2540),t)},6580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_TEXT_MAP_PROPAGATOR=t.NoopTextMapPropagator=void 0;var r=function(){function e(){}return e.prototype.inject=function(e,t){},e.prototype.extract=function(e,t){return e},e.prototype.fields=function(){return[]},e}();t.NoopTextMapPropagator=r,t.NOOP_TEXT_MAP_PROPAGATOR=new r},6422:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},t.defaultTextMapSetter={set:function(e,t,r){null!=e&&(e[t]=r)}}},3609:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},776:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoopSpan=void 0;var n=r(5922),o=function(){function e(e){void 0===e&&(e=n.INVALID_SPAN_CONTEXT),this._spanContext=e}return e.prototype.context=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}();t.NoopSpan=o},8777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_TRACER=t.NoopTracer=void 0;var n=r(4858),o=r(776),i=r(5922),a=function(){function e(){}return e.prototype.startSpan=function(e,t,r){if(Boolean(null==t?void 0:t.root))return new o.NoopSpan;var a,s=r&&n.getSpanContext(r);return"object"==typeof(a=s)&&"string"==typeof a.spanId&&"string"==typeof a.traceId&&"number"==typeof a.traceFlags&&i.isSpanContextValid(s)?new o.NoopSpan(s):new o.NoopSpan},e}();t.NoopTracer=a,t.NOOP_TRACER=new a},2830:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_TRACER_PROVIDER=t.NoopTracerProvider=void 0;var n=r(8777),o=function(){function e(){}return e.prototype.getTracer=function(e,t){return n.NOOP_TRACER},e}();t.NoopTracerProvider=o,t.NOOP_TRACER_PROVIDER=new o},5698:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;var n=r(8777),o=function(){function e(e,t,r){this._provider=e,this.name=t,this.version=r}return e.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version);return e?(this._delegate=e,this._delegate):n.NOOP_TRACER},e}();t.ProxyTracer=o},5154:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;var n=r(5698),o=r(2830),i=function(){function e(){}return e.prototype.getTracer=function(e,t){var r;return null!==(r=this.getDelegateTracer(e,t))&&void 0!==r?r:new n.ProxyTracer(this,e,t)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:o.NOOP_TRACER_PROVIDER},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t)},e}();t.ProxyTracerProvider=i},375:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6345:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,(r=t.SamplingDecision||(t.SamplingDecision={}))[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"},633:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5510:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},642:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2442:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6774:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7628:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3519:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,(r=t.SpanKind||(t.SpanKind={}))[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"},5922:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;var n=r(1066),o=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function a(e){return o.test(e)&&e!==t.INVALID_TRACEID}function s(e){return i.test(e)&&e!==t.INVALID_SPANID}t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE},t.isValidTraceId=a,t.isValidSpanId=s,t.isSpanContextValid=function(e){return a(e.traceId)&&s(e.spanId)}},9393:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,(r=t.SpanStatusCode||(t.SpanStatusCode={}))[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"},1066:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,(r=t.TraceFlags||(t.TraceFlags={}))[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"},4615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1221:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2679:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1016:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.0.0-rc.0"},1924:(e,t,r)=>{"use strict";var n=r(210),o=r(5559),i=o(n("String.prototype.indexOf"));e.exports=function(e,t){var r=n(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?o(r):r}},5559:(e,t,r)=>{"use strict";var n=r(8612),o=r(210),i=o("%Function.prototype.apply%"),a=o("%Function.prototype.call%"),s=o("%Reflect.apply%",!0)||n.call(a,i),c=o("%Object.getOwnPropertyDescriptor%",!0),u=o("%Object.defineProperty%",!0),l=o("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=s(n,a,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var p=function(){return s(n,i,arguments)};u?u(e.exports,"apply",{value:p}):e.exports.apply=p},7648:e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,n=Object.prototype.toString,o="[object Function]";e.exports=function(e){var i=this;if("function"!=typeof i||n.call(i)!==o)throw new TypeError(t+i);for(var a,s=r.call(arguments,1),c=function(){if(this instanceof a){var t=i.apply(this,s.concat(r.call(arguments)));return Object(t)===t?t:this}return i.apply(e,s.concat(r.call(arguments)))},u=Math.max(0,i.length-s.length),l=[],p=0;p<u;p++)l.push("$"+p);if(a=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(c),i.prototype){var d=function(){};d.prototype=i.prototype,a.prototype=new d,d.prototype=null}return a}},8612:(e,t,r)=>{"use strict";var n=r(7648);e.exports=Function.prototype.bind||n},210:(e,t,r)=>{"use strict";var n,o=SyntaxError,i=Function,a=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var u=function(){throw new a},l=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(e){return u}}}():u,p=r(1405)(),d=Object.getPrototypeOf||function(e){return e.__proto__},h={},f="undefined"==typeof Uint8Array?n:d(Uint8Array),y={"%AggregateError%":"undefined"==typeof AggregateError?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?n:ArrayBuffer,"%ArrayIteratorPrototype%":p?d([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":h,"%AsyncGenerator%":h,"%AsyncGeneratorFunction%":h,"%AsyncIteratorPrototype%":h,"%Atomics%":"undefined"==typeof Atomics?n:Atomics,"%BigInt%":"undefined"==typeof BigInt?n:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?n:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?n:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?n:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":h,"%Int8Array%":"undefined"==typeof Int8Array?n:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?n:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":p?d(d([][Symbol.iterator]())):n,"%JSON%":"object"==typeof JSON?JSON:n,"%Map%":"undefined"==typeof Map?n:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&p?d((new Map)[Symbol.iterator]()):n,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?n:Promise,"%Proxy%":"undefined"==typeof Proxy?n:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?n:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?n:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&p?d((new Set)[Symbol.iterator]()):n,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":p?d(""[Symbol.iterator]()):n,"%Symbol%":p?Symbol:n,"%SyntaxError%":o,"%ThrowTypeError%":l,"%TypedArray%":f,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?n:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?n:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?n:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?n:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?n:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?n:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?n:WeakSet},g=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&(r=d(o.prototype))}return y[t]=r,r},m={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},v=r(8612),b=r(7642),w=v.call(Function.call,Array.prototype.concat),S=v.call(Function.apply,Array.prototype.splice),E=v.call(Function.call,String.prototype.replace),T=v.call(Function.call,String.prototype.slice),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,C=function(e){var t=T(e,0,1),r=T(e,-1);if("%"===t&&"%"!==r)throw new o("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new o("invalid intrinsic syntax, expected opening `%`");var n=[];return E(e,I,(function(e,t,r,o){n[n.length]=r?E(o,O,"$1"):t||e})),n},A=function(e,t){var r,n=e;if(b(m,n)&&(n="%"+(r=m[n])[0]+"%"),b(y,n)){var i=y[n];if(i===h&&(i=g(n)),void 0===i&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:i}}throw new o("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');var r=C(e),n=r.length>0?r[0]:"",i=A("%"+n+"%",t),s=i.name,u=i.value,l=!1,p=i.alias;p&&(n=p[0],S(r,w([0,1],p)));for(var d=1,h=!0;d<r.length;d+=1){var f=r[d],g=T(f,0,1),m=T(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===m||"'"===m||"`"===m)&&g!==m)throw new o("property names with quotes must have matching quotes");if("constructor"!==f&&h||(l=!0),b(y,s="%"+(n+="."+f)+"%"))u=y[s];else if(null!=u){if(!(f in u)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&d+1>=r.length){var v=c(u,f);u=(h=!!v)&&"get"in v&&!("originalValue"in v.get)?v.get:u[f]}else h=b(u,f),u=u[f];h&&!l&&(y[s]=u)}}return u}},1405:(e,t,r)=>{"use strict";var n="undefined"!=typeof Symbol&&Symbol,o=r(5419);e.exports=function(){return"function"==typeof n&&"function"==typeof Symbol&&"symbol"==typeof n("foo")&&"symbol"==typeof Symbol("bar")&&o()}},5419:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var n=Object.getOwnPropertySymbols(e);if(1!==n.length||n[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(42!==o.value||!0!==o.enumerable)return!1}return!0}},7642:(e,t,r)=>{"use strict";var n=r(8612);e.exports=n.call(Function.call,Object.prototype.hasOwnProperty)},631:(e,t,r)=>{var n="function"==typeof Map&&Map.prototype,o=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=n&&o&&"function"==typeof o.get?o.get:null,a=n&&Map.prototype.forEach,s="function"==typeof Set&&Set.prototype,c=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,u=s&&c&&"function"==typeof c.get?c.get:null,l=s&&Set.prototype.forEach,p="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,d="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,h="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,f=Boolean.prototype.valueOf,y=Object.prototype.toString,g=Function.prototype.toString,m=String.prototype.match,v="function"==typeof BigInt?BigInt.prototype.valueOf:null,b=Object.getOwnPropertySymbols,w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,S=Object.prototype.propertyIsEnumerable,E=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null),T=r(4654).custom,I=T&&R(T)?T:null,O="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag?Symbol.toStringTag:null;function C(e,t,r){var n="double"===(r.quoteStyle||t)?'"':"'";return n+e+n}function A(e){return String(e).replace(/"/g,"&quot;")}function P(e){return!("[object Array]"!==k(e)||O&&"object"==typeof e&&O in e)}function R(e){if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!w)return!1;try{return w.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,n,o){var s=r||{};if(N(s,"quoteStyle")&&"single"!==s.quoteStyle&&"double"!==s.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(N(s,"maxStringLength")&&("number"==typeof s.maxStringLength?s.maxStringLength<0&&s.maxStringLength!==1/0:null!==s.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var c=!N(s,"customInspect")||s.customInspect;if("boolean"!=typeof c)throw new TypeError('option "customInspect", if provided, must be `true` or `false`');if(N(s,"indent")&&null!==s.indent&&"\t"!==s.indent&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('options "indent" must be "\\t", an integer > 0, or `null`');if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return j(t,s);if("number"==typeof t)return 0===t?1/0/t>0?"0":"-0":String(t);if("bigint"==typeof t)return String(t)+"n";var y=void 0===s.depth?5:s.depth;if(void 0===n&&(n=0),n>=y&&y>0&&"object"==typeof t)return P(t)?"[Array]":"[Object]";var b,S=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=Array(e.indent+1).join(" ")}return{base:r,prev:Array(t+1).join(r)}}(s,n);if(void 0===o)o=[];else if(x(o,t)>=0)return"[Circular]";function T(t,r,i){if(r&&(o=o.slice()).push(r),i){var a={depth:s.depth};return N(s,"quoteStyle")&&(a.quoteStyle=s.quoteStyle),e(t,a,n+1,o)}return e(t,s,n+1,o)}if("function"==typeof t){var _=function(e){if(e.name)return e.name;var t=m.call(g.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),M=H(t,T);return"[Function"+(_?": "+_:" (anonymous)")+"]"+(M.length>0?" { "+M.join(", ")+" }":"")}if(R(t)){var z=w.call(t);return"object"==typeof t?q(z):z}if((b=t)&&"object"==typeof b&&("undefined"!=typeof HTMLElement&&b instanceof HTMLElement||"string"==typeof b.nodeName&&"function"==typeof b.getAttribute)){for(var F="<"+String(t.nodeName).toLowerCase(),V=t.attributes||[],B=0;B<V.length;B++)F+=" "+V[B].name+"="+C(A(V[B].value),"double",s);return F+=">",t.childNodes&&t.childNodes.length&&(F+="..."),F+"</"+String(t.nodeName).toLowerCase()+">"}if(P(t)){if(0===t.length)return"[]";var G=H(t,T);return S&&!function(e){for(var t=0;t<e.length;t++)if(x(e[t],"\n")>=0)return!1;return!0}(G)?"["+U(G,S)+"]":"[ "+G.join(", ")+" ]"}if(function(e){return!("[object Error]"!==k(e)||O&&"object"==typeof e&&O in e)}(t)){var K=H(t,T);return 0===K.length?"["+String(t)+"]":"{ ["+String(t)+"] "+K.join(", ")+" }"}if("object"==typeof t&&c){if(I&&"function"==typeof t[I])return t[I]();if("function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{u.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var W=[];return a.call(t,(function(e,r){W.push(T(r,t,!0)+" => "+T(e,t))})),L("Map",i.call(t),W,S)}if(function(e){if(!u||!e||"object"!=typeof e)return!1;try{u.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var $=[];return l.call(t,(function(e){$.push(T(e,t))})),L("Set",u.call(t),$,S)}if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{p.call(e,p);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return D("WeakMap");if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{p.call(e,p)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return D("WeakSet");if(function(e){if(!h||!e||"object"!=typeof e)return!1;try{return h.call(e),!0}catch(e){}return!1}(t))return D("WeakRef");if(function(e){return!("[object Number]"!==k(e)||O&&"object"==typeof e&&O in e)}(t))return q(T(Number(t)));if(function(e){if(!e||"object"!=typeof e||!v)return!1;try{return v.call(e),!0}catch(e){}return!1}(t))return q(T(v.call(t)));if(function(e){return!("[object Boolean]"!==k(e)||O&&"object"==typeof e&&O in e)}(t))return q(f.call(t));if(function(e){return!("[object String]"!==k(e)||O&&"object"==typeof e&&O in e)}(t))return q(T(String(t)));if(!function(e){return!("[object Date]"!==k(e)||O&&"object"==typeof e&&O in e)}(t)&&!function(e){return!("[object RegExp]"!==k(e)||O&&"object"==typeof e&&O in e)}(t)){var Q=H(t,T),J=E?E(t)===Object.prototype:t instanceof Object||t.constructor===Object,X=t instanceof Object?"":"null prototype",Y=!J&&O&&Object(t)===t&&O in t?k(t).slice(8,-1):X?"Object":"",Z=(J||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(Y||X?"["+[].concat(Y||[],X||[]).join(": ")+"] ":"");return 0===Q.length?Z+"{}":S?Z+"{"+U(Q,S)+"}":Z+"{ "+Q.join(", ")+" }"}return String(t)};var _=Object.prototype.hasOwnProperty||function(e){return e in this};function N(e,t){return _.call(e,t)}function k(e){return y.call(e)}function x(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}function j(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return j(e.slice(0,t.maxStringLength),t)+n}return C(e.replace(/(['\\])/g,"\\$1").replace(/[\x00-\x1f]/g,M),"single",t)}function M(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+t.toString(16).toUpperCase()}function q(e){return"Object("+e+")"}function D(e){return e+" { ? }"}function L(e,t,r,n){return e+" ("+t+") {"+(n?U(r,n):r.join(", "))+"}"}function U(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+e.join(","+r)+"\n"+t.prev}function H(e,t){var r=P(e),n=[];if(r){n.length=e.length;for(var o=0;o<e.length;o++)n[o]=N(e,o)?t(e[o],e):""}for(var i in e)N(e,i)&&(r&&String(Number(i))===i&&i<e.length||(/[^\w$]/.test(i)?n.push(t(i,e)+": "+t(e[i],e)):n.push(i+": "+t(e[i],e))));if("function"==typeof b)for(var a=b(e),s=0;s<a.length;s++)S.call(e,a[s])&&n.push("["+t(a[s])+"]: "+t(e[a[s]],e));return n}},5798:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,n="RFC3986";e.exports={default:n,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:n}},129:(e,t,r)=>{"use strict";var n=r(8261),o=r(5235),i=r(5798);e.exports={formats:i,parse:o,stringify:n}},5235:(e,t,r)=>{"use strict";var n=r(2769),o=Object.prototype.hasOwnProperty,i=Array.isArray,a={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:n.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,n){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=r.depth>0&&/(\[[^[\]]*])/.exec(i),u=s?i.slice(0,s.index):i,l=[];if(u){if(!r.plainObjects&&o.call(Object.prototype,u)&&!r.allowPrototypes)return;l.push(u)}for(var p=0;r.depth>0&&null!==(s=a.exec(i))&&p<r.depth;){if(p+=1,!r.plainObjects&&o.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;l.push(s[1])}return s&&l.push("["+i.slice(s.index)+"]"),function(e,t,r,n){for(var o=n?t:c(t,r),i=e.length-1;i>=0;--i){var a,s=e[i];if("[]"===s&&r.parseArrays)a=[].concat(o);else{a=r.plainObjects?Object.create(null):{};var u="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,l=parseInt(u,10);r.parseArrays||""!==u?!isNaN(l)&&s!==u&&String(l)===u&&l>=0&&r.parseArrays&&l<=r.arrayLimit?(a=[])[l]=o:a[u]=o:a={0:o}}o=a}return o}(l,t,r,n)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?a.charset:e.charset;return{allowDots:void 0===e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:a.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:a.comma,decoder:"function"==typeof e.decoder?e.decoder:a.decoder,delimiter:"string"==typeof e.delimiter||n.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var l="string"==typeof e?function(e,t){var r,u={},l=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,p=t.parameterLimit===1/0?void 0:t.parameterLimit,d=l.split(t.delimiter,p),h=-1,f=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?f="utf-8":"utf8=%26%2310003%3B"===d[r]&&(f="iso-8859-1"),h=r,r=d.length);for(r=0;r<d.length;++r)if(r!==h){var y,g,m=d[r],v=m.indexOf("]="),b=-1===v?m.indexOf("="):v+1;-1===b?(y=t.decoder(m,a.decoder,f,"key"),g=t.strictNullHandling?null:""):(y=t.decoder(m.slice(0,b),a.decoder,f,"key"),g=n.maybeMap(c(m.slice(b+1),t),(function(e){return t.decoder(e,a.decoder,f,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===f&&(g=s(g)),m.indexOf("[]=")>-1&&(g=i(g)?[g]:g),o.call(u,y)?u[y]=n.combine(u[y],g):u[y]=g}return u}(e,r):e,p=r.plainObjects?Object.create(null):{},d=Object.keys(l),h=0;h<d.length;++h){var f=d[h],y=u(f,l[f],r,"string"==typeof e);p=n.merge(p,y,r)}return!0===r.allowSparse?p:n.compact(p)}},8261:(e,t,r)=>{"use strict";var n=r(7478),o=r(2769),i=r(5798),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},c=Array.isArray,u=Array.prototype.push,l=function(e,t){u.apply(e,c(t)?t:[t])},p=Date.prototype.toISOString,d=i.default,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:o.encode,encodeValuesOnly:!1,format:d,formatter:i.formatters[d],indices:!1,serializeDate:function(e){return p.call(e)},skipNulls:!1,strictNullHandling:!1},f=function e(t,r,i,a,s,u,p,d,f,y,g,m,v,b,w){var S,E=t;if(w.has(t))throw new RangeError("Cyclic object value");if("function"==typeof p?E=p(r,E):E instanceof Date?E=y(E):"comma"===i&&c(E)&&(E=o.maybeMap(E,(function(e){return e instanceof Date?y(e):e}))),null===E){if(a)return u&&!v?u(r,h.encoder,b,"key",g):r;E=""}if("string"==typeof(S=E)||"number"==typeof S||"boolean"==typeof S||"symbol"==typeof S||"bigint"==typeof S||o.isBuffer(E))return u?[m(v?r:u(r,h.encoder,b,"key",g))+"="+m(u(E,h.encoder,b,"value",g))]:[m(r)+"="+m(String(E))];var T,I=[];if(void 0===E)return I;if("comma"===i&&c(E))T=[{value:E.length>0?E.join(",")||null:void 0}];else if(c(p))T=p;else{var O=Object.keys(E);T=d?O.sort(d):O}for(var C=0;C<T.length;++C){var A=T[C],P="object"==typeof A&&void 0!==A.value?A.value:E[A];if(!s||null!==P){var R=c(E)?"function"==typeof i?i(r,A):r:r+(f?"."+A:"["+A+"]");w.set(t,!0);var _=n();l(I,e(P,R,i,a,s,u,p,d,f,y,g,m,v,b,_))}}return I};e.exports=function(e,t){var r,o=e,u=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!a.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var n=i.formatters[r],o=h.filter;return("function"==typeof e.filter||c(e.filter))&&(o=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:void 0===e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:void 0===e.delimiter?h.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:h.encode,encoder:"function"==typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:o,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"==typeof u.filter?o=(0,u.filter)("",o):c(u.filter)&&(r=u.filter);var p,d=[];if("object"!=typeof o||null===o)return"";p=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var y=s[p];r||(r=Object.keys(o)),u.sort&&r.sort(u.sort);for(var g=n(),m=0;m<r.length;++m){var v=r[m];u.skipNulls&&null===o[v]||l(d,f(o[v],v,y,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.format,u.formatter,u.encodeValuesOnly,u.charset,g))}var b=d.join(u.delimiter),w=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),b.length>0?w+b:""}},2769:(e,t,r)=>{"use strict";var n=r(5798),o=Object.prototype.hasOwnProperty,i=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)void 0!==e[n]&&(r[n]=e[n]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],n=0;n<t.length;++n)for(var o=t[n],a=o.obj[o.prop],s=Object.keys(a),c=0;c<s.length;++c){var u=s[c],l=a[u];"object"==typeof l&&null!==l&&-1===r.indexOf(l)&&(t.push({obj:a,prop:u}),r.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var n=[],o=0;o<r.length;++o)void 0!==r[o]&&n.push(r[o]);t.obj[t.prop]=n}}}(t),e},decode:function(e,t,r){var n=e.replace(/\+/g," ");if("iso-8859-1"===r)return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch(e){return n}},encode:function(e,t,r,o,i){if(0===e.length)return e;var s=e;if("symbol"==typeof e?s=Symbol.prototype.toString.call(e):"string"!=typeof e&&(s=String(e)),"iso-8859-1"===r)return escape(s).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<s.length;++u){var l=s.charCodeAt(u);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122||i===n.RFC1738&&(40===l||41===l)?c+=s.charAt(u):l<128?c+=a[l]:l<2048?c+=a[192|l>>6]+a[128|63&l]:l<55296||l>=57344?c+=a[224|l>>12]+a[128|l>>6&63]+a[128|63&l]:(u+=1,l=65536+((1023&l)<<10|1023&s.charCodeAt(u)),c+=a[240|l>>18]+a[128|l>>12&63]+a[128|l>>6&63]+a[128|63&l])}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)},merge:function e(t,r,n){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(n&&(n.plainObjects||n.allowPrototypes)||!o.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var a=t;return i(t)&&!i(r)&&(a=s(t,n)),i(t)&&i(r)?(r.forEach((function(r,i){if(o.call(t,i)){var a=t[i];a&&"object"==typeof a&&r&&"object"==typeof r?t[i]=e(a,r,n):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var a=r[i];return o.call(t,i)?t[i]=e(t[i],a,n):t[i]=a,t}),a)}}},7478:(e,t,r)=>{"use strict";var n=r(210),o=r(1924),i=r(631),a=n("%TypeError%"),s=n("%WeakMap%",!0),c=n("%Map%",!0),u=o("WeakMap.prototype.get",!0),l=o("WeakMap.prototype.set",!0),p=o("WeakMap.prototype.has",!0),d=o("Map.prototype.get",!0),h=o("Map.prototype.set",!0),f=o("Map.prototype.has",!0),y=function(e,t){for(var r,n=e;null!==(r=n.next);n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,n={assert:function(e){if(!n.has(e))throw new a("Side channel does not contain "+i(e))},get:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return u(e,n)}else if(c){if(t)return d(t,n)}else if(r)return function(e,t){var r=y(e,t);return r&&r.value}(r,n)},has:function(n){if(s&&n&&("object"==typeof n||"function"==typeof n)){if(e)return p(e,n)}else if(c){if(t)return f(t,n)}else if(r)return function(e,t){return!!y(e,t)}(r,n);return!1},set:function(n,o){s&&n&&("object"==typeof n||"function"==typeof n)?(e||(e=new s),l(e,n,o)):c?(t||(t=new c),h(t,n,o)):(r||(r={key:{},next:null}),function(e,t,r){var n=y(e,t);n?n.value=r:e.next={key:t,next:e.next,value:r}}(r,n,o))}};return n}},4654:()=>{}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{ErrorResponse:()=>W,LocalizableString:()=>V,MetadataValue:()=>G,Metric:()=>F,MetricValue:()=>K,Response:()=>z,TimeSeriesElement:()=>B});var t={};r.r(t),r.d(t,{ErrorResponse:()=>xr,LocalizableString:()=>Nr,MetricAvailability:()=>kr,MetricDefinition:()=>_r,MetricDefinitionCollection:()=>Rr});var n={};r.r(n),r.d(n,{ErrorResponse:()=>Fr,MetricNamespace:()=>Hr,MetricNamespaceCollection:()=>Ur,MetricNamespaceName:()=>zr});var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a,s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function c(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function u(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function l(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function p(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function d(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function h(e){var t=e.requestOptions,r=e.tracingOptions,n=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(e,["requestOptions","tracingOptions"]);return t&&(n=s(s({},n),t)),r&&(n.spanOptions=r.spanOptions,n.tracingContext=r.tracingContext),n}function f(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function y(e){for(var t=atob(e),r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}Object.create,Object.create;var g=new Uint8Array(16);function m(){if(!a&&!(a="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return a(g)}const v=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,b=function(e){return"string"==typeof e&&v.test(e)};for(var w=[],S=0;S<256;++S)w.push((S+256).toString(16).substr(1));const E=function(e,t,r){var n=(e=e||{}).random||(e.rng||m)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var o=0;o<16;++o)t[r+o]=n[o];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(w[e[t+0]]+w[e[t+1]]+w[e[t+2]]+w[e[t+3]]+"-"+w[e[t+4]]+w[e[t+5]]+"-"+w[e[t+6]]+w[e[t+7]]+"-"+w[e[t+8]]+w[e[t+9]]+"-"+w[e[t+10]]+w[e[t+11]]+w[e[t+12]]+w[e[t+13]]+w[e[t+14]]+w[e[t+15]]).toLowerCase();if(!b(r))throw TypeError("Stringified UUID is invalid");return r}(n)};var T="$",I="_",O=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i,C="undefined"!=typeof process&&!!process.version&&!!process.versions&&!!process.versions.node;function A(){return E()}function P(e,t){return new Promise((function(r){return setTimeout((function(){return r(t)}),e)}))}var R=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function _(e,t,r){return e&&t?e.split(t).join(r||""):e}var N=function(){function e(e,t){void 0===e&&(e={}),this.modelMappers=e,this.isXML=t}return e.prototype.validateConstraints=function(e,t,r){var n=function(e,n){throw new Error('"'+r+'" with value "'+t+'" should satisfy the constraint "'+e+'": '+n+".")};if(e.constraints&&null!=t){var o=t,i=e.constraints,a=i.ExclusiveMaximum,s=i.ExclusiveMinimum,c=i.InclusiveMaximum,u=i.InclusiveMinimum,l=i.MaxItems,p=i.MaxLength,d=i.MinItems,h=i.MinLength,f=i.MultipleOf,y=i.Pattern,g=i.UniqueItems;null!=a&&o>=a&&n("ExclusiveMaximum",a),null!=s&&o<=s&&n("ExclusiveMinimum",s),null!=c&&o>c&&n("InclusiveMaximum",c),null!=u&&o<u&&n("InclusiveMinimum",u);var m=t;if(null!=l&&m.length>l&&n("MaxItems",l),null!=p&&m.length>p&&n("MaxLength",p),null!=d&&m.length<d&&n("MinItems",d),null!=h&&m.length<h&&n("MinLength",h),null!=f&&o%f!=0&&n("MultipleOf",f),y){var v="string"==typeof y?new RegExp(y):y;"string"==typeof t&&null!==t.match(v)||n("Pattern",y)}g&&m.some((function(e,t,r){return r.indexOf(e)!==t}))&&n("UniqueItems",g)}},e.prototype.serialize=function(e,t,r,n){var o,i,a;void 0===n&&(n={});var c={rootName:null!==(o=n.rootName)&&void 0!==o?o:"",includeRoot:null!==(i=n.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(a=n.xmlCharKey)&&void 0!==a?a:I},u={},l=e.type.name;r||(r=e.serializedName),null!==l.match(/^Sequence$/i)&&(u=[]),e.isConstant&&(t=e.defaultValue);var p=e.required,d=e.nullable;if(p&&d&&void 0===t)throw new Error(r+" cannot be undefined.");if(p&&!d&&null==t)throw new Error(r+" cannot be null or undefined.");if(!p&&!1===d&&null===t)throw new Error(r+" cannot be null.");return null==t?u=t:(this.validateConstraints(e,t,r),null!==l.match(/^any$/i)?u=t:null!==l.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?u=function(e,t,r){if(null!=r)if(null!==e.match(/^Number$/i)){if("number"!=typeof r)throw new Error(t+" with value "+r+" must be of type number.")}else if(null!==e.match(/^String$/i)){if("string"!=typeof r.valueOf())throw new Error(t+' with value "'+r+'" must be of type string.')}else if(null!==e.match(/^Uuid$/i)){if("string"!=typeof r.valueOf()||(o=r,!O.test(o)))throw new Error(t+' with value "'+r+'" must be of type string and a valid uuid.')}else if(null!==e.match(/^Boolean$/i)){if("boolean"!=typeof r)throw new Error(t+" with value "+r+" must be of type boolean.")}else if(null!==e.match(/^Stream$/i)){var n=typeof r;if(!("string"===n||"function"===n||r instanceof ArrayBuffer||ArrayBuffer.isView(r)||("function"==typeof Blob||"object"==typeof Blob)&&r instanceof Blob))throw new Error(t+" must be a string, Blob, ArrayBuffer, ArrayBufferView, or a function returning NodeJS.ReadableStream.")}var o;return r}(l,r,t):null!==l.match(/^Enum$/i)?u=function(e,t,r){if(!t)throw new Error("Please provide a set of allowedValues to validate "+e+" as an Enum Type.");if(!t.some((function(e){return"string"==typeof e.valueOf()?e.toLowerCase()===r.toLowerCase():e===r})))throw new Error(r+" is not a valid value for "+e+". The valid values are: "+JSON.stringify(t)+".");return r}(r,e.type.allowedValues,t):null!==l.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?u=function(e,t,r){if(null!=t)if(null!==e.match(/^Date$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString().substring(0,10):new Date(t).toISOString().substring(0,10)}else if(null!==e.match(/^DateTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in ISO8601 format.");t=t instanceof Date?t.toISOString():new Date(t).toISOString()}else if(null!==e.match(/^DateTimeRfc1123$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123 format.");t=t instanceof Date?t.toUTCString():new Date(t).toUTCString()}else if(null!==e.match(/^UnixTime$/i)){if(!(t instanceof Date||"string"==typeof t.valueOf()&&!isNaN(Date.parse(t))))throw new Error(r+" must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.");t=function(e){if(e)return"string"==typeof e.valueOf()&&(e=new Date(e)),Math.floor(e.getTime()/1e3)}(t)}else if(null!==e.match(/^TimeSpan$/i)&&!function(e){return R.test(e)}(t))throw new Error(r+' must be a string in ISO 8601 format. Instead was "'+t+'".');return t}(l,t,r):null!==l.match(/^ByteArray$/i)?u=function(e,t){var r="";if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");r=f(t)}return r}(r,t):null!==l.match(/^Base64Url$/i)?u=function(e,t){var r="";if(null!=t){if(!(t instanceof Uint8Array))throw new Error(e+" must be of type Uint8Array.");r=function(e){if(e){if(!(e instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function(e,t){for(var r=e.length;r-1>=0&&"="===e[r-1];)--r;return e.substr(0,r)}(f(e)).replace(/\+/g,"-").replace(/\//g,"_")}}(t)||""}return r}(r,t):null!==l.match(/^Sequence$/i)?u=function(e,t,r,n,o,i){var a,c;if(!Array.isArray(r))throw new Error(n+" must be of type Array.");var u=t.type.element;if(!u||"object"!=typeof u)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n+".");for(var l=[],p=0;p<r.length;p++){var d=e.serialize(u,r[p],n,i);if(o&&u.xmlNamespace){var h=u.xmlNamespacePrefix?"xmlns:"+u.xmlNamespacePrefix:"xmlns";"Composite"===u.type.name?(l[p]=s({},d),l[p][T]=((a={})[h]=u.xmlNamespace,a)):(l[p]={},l[p][i.xmlCharKey]=d,l[p][T]=((c={})[h]=u.xmlNamespace,c))}else l[p]=d}return l}(this,e,t,r,Boolean(this.isXML),c):null!==l.match(/^Dictionary$/i)?u=function(e,t,r,n,o,i){var a;if("object"!=typeof r)throw new Error(n+" must be of type object.");var s=t.type.value;if(!s||"object"!=typeof s)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n+".");for(var c={},u=0,l=Object.keys(r);u<l.length;u++){var p=l[u],d=e.serialize(s,r[p],n,i);c[p]=M(s,d,o,i)}if(o&&t.xmlNamespace){var h=t.xmlNamespacePrefix?"xmlns:"+t.xmlNamespacePrefix:"xmlns",f=c;return f[T]=((a={})[h]=t.xmlNamespace,a),f}return c}(this,e,t,r,Boolean(this.isXML),c):null!==l.match(/^Composite$/i)&&(u=function(e,t,r,n,o,i){var a,c;if(L(e,t)&&(t=D(e,t,r,"clientName")),null!=r){for(var u={},l=j(e,t,n),p=0,d=Object.keys(l);p<d.length;p++){var h=d[p],f=l[h];if(!f.readOnly){var y=void 0,g=u;if(e.isXML)y=f.xmlIsWrapped?f.xmlName:f.xmlElementName||f.xmlName;else{var m=k(f.serializedName);y=m.pop();for(var v=0,b=m;v<b.length;v++){var w=b[v];null!=g[w]||null==r[h]&&void 0===f.defaultValue||(g[w]={}),g=g[w]}}if(null!=g){if(o&&t.xmlNamespace){var S=t.xmlNamespacePrefix?"xmlns:"+t.xmlNamespacePrefix:"xmlns";g[T]=s(s({},g[T]),((a={})[S]=t.xmlNamespace,a))}var E=""!==f.serializedName?n+"."+f.serializedName:n,I=r[h],O=L(e,t);O&&O.clientName===h&&null==I&&(I=t.serializedName);var C=e.serialize(f,I,E,i);if(void 0!==C&&null!=y){var A=M(f,C,o,i);o&&f.xmlIsAttribute?(g[T]=g[T]||{},g[T][y]=C):o&&f.xmlIsWrapped?g[y]=((c={})[f.xmlElementName]=A,c):g[y]=A}}}}var P=function(e,t,r){var n=t.type.additionalProperties;if(!n&&t.type.className){var o=x(e,t,r);return null==o?void 0:o.type.additionalProperties}return n}(e,t,n);if(P){var R=Object.keys(l),_=function(t){R.every((function(e){return e!==t}))&&(u[t]=e.serialize(P,r[t],n+'["'+t+'"]',i))};for(var N in r)_(N)}return u}return r}(this,e,t,r,Boolean(this.isXML),c))),u},e.prototype.deserialize=function(e,t,r,n){var o,i,a;void 0===n&&(n={});var s,c={rootName:null!==(o=n.rootName)&&void 0!==o?o:"",includeRoot:null!==(i=n.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(a=n.xmlCharKey)&&void 0!==a?a:I};if(null==t)return this.isXML&&"Sequence"===e.type.name&&!e.xmlIsWrapped&&(t=[]),void 0!==e.defaultValue&&(t=e.defaultValue),t;var u=e.type.name;if(r||(r=e.serializedName),null!==u.match(/^Composite$/i))s=function(e,t,r,n,o){var i;L(e,t)&&(t=D(e,t,r,"serializedName"));for(var a=j(e,t,n),s={},c=[],u=0,l=Object.keys(a);u<l.length;u++){var p=l[u],d=a[p],h=k(a[p].serializedName);c.push(h[0]);var f=d.serializedName,y=d.xmlName,g=d.xmlElementName,m=n;""!==f&&void 0!==f&&(m=n+"."+f);var v=d.headerCollectionPrefix;if(v){for(var b={},w=0,S=Object.keys(r);w<S.length;w++){var E=S[w];E.startsWith(v)&&(b[E.substring(v.length)]=e.deserialize(d.type.value,r[E],m,o)),c.push(E)}s[p]=b}else if(e.isXML)if(d.xmlIsAttribute&&r[T])s[p]=e.deserialize(d,r[T][y],m,o);else{var I=g||y||f;if(d.xmlIsWrapped){var O=r[y],C=null!==(i=null==O?void 0:O[g])&&void 0!==i?i:[];s[p]=e.deserialize(d,C,m,o)}else{var A=r[I];s[p]=e.deserialize(d,A,m,o)}}else{for(var P=void 0,R=r,_=0,N=h;_<N.length;_++){var x=N[_];if(!R)break;R=R[x]}P=R;var M=t.type.polymorphicDiscriminator;M&&p===M.clientName&&null==P&&(P=t.serializedName);var U=void 0;Array.isArray(r[p])&&""===a[p].serializedName?(P=r[p],s=e.deserialize(d,P,m,o)):void 0===P&&void 0===d.defaultValue||(U=e.deserialize(d,P,m,o),s[p]=U)}}var H=t.type.additionalProperties;if(H){var z=function(e){for(var t in a)if(k(a[t].serializedName)[0]===e)return!1;return!0};for(var F in r)z(F)&&(s[F]=e.deserialize(H,r[F],n+'["'+F+'"]',o))}else if(r)for(var V=0,B=Object.keys(r);V<B.length;V++)void 0!==s[p=B[V]]||c.includes(p)||q(p,o)||(s[p]=r[p]);return s}(this,e,t,r,c);else{if(this.isXML){var l=c.xmlCharKey,p=t;null!=p[T]&&null!=p[l]&&(t=p[l])}null!==u.match(/^Number$/i)?(s=parseFloat(t),isNaN(s)&&(s=t)):null!==u.match(/^Boolean$/i)?s="true"===t||"false"!==t&&t:null!==u.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?s=t:null!==u.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?s=new Date(t):null!==u.match(/^UnixTime$/i)?s=function(e){if(e)return new Date(1e3*e)}(t):null!==u.match(/^ByteArray$/i)?s=y(t):null!==u.match(/^Base64Url$/i)?s=function(e){if(e){if(e&&"string"!=typeof e.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return y(e=e.replace(/-/g,"+").replace(/_/g,"/"))}}(t):null!==u.match(/^Sequence$/i)?s=function(e,t,r,n,o){var i=t.type.element;if(!i||"object"!=typeof i)throw new Error('element" metadata for an Array must be defined in the mapper and it must of type "object" in '+n);if(r){Array.isArray(r)||(r=[r]);for(var a=[],s=0;s<r.length;s++)a[s]=e.deserialize(i,r[s],n+"["+s+"]",o);return a}return r}(this,e,t,r,c):null!==u.match(/^Dictionary$/i)&&(s=function(e,t,r,n,o){var i=t.type.value;if(!i||"object"!=typeof i)throw new Error('"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in '+n);if(r){for(var a={},s=0,c=Object.keys(r);s<c.length;s++){var u=c[s];a[u]=e.deserialize(i,r[u],n,o)}return a}return r}(this,e,t,r,c))}return e.isConstant&&(s=e.defaultValue),s},e}();function k(e){var t=[],r="";if(e)for(var n=0,o=e.split(".");n<o.length;n++){var i=o[n];"\\"===i.charAt(i.length-1)?r+=i.substr(0,i.length-1)+".":(r+=i,t.push(r),r="")}return t}function x(e,t,r){var n=t.type.className;if(!n)throw new Error('Class name for model "'+r+'" is not provided in the mapper "'+JSON.stringify(t,void 0,2)+'".');return e.modelMappers[n]}function j(e,t,r){var n=t.type.modelProperties;if(!n){var o=x(e,t,r);if(!o)throw new Error('mapper() cannot be null or undefined for model "'+t.type.className+'".');if(!(n=null==o?void 0:o.type.modelProperties))throw new Error('modelProperties cannot be null or undefined in the mapper "'+JSON.stringify(o)+'" of type "'+t.type.className+'" for object "'+r+'".')}return n}function M(e,t,r,n){var o;if(!r||!e.xmlNamespace)return t;var i=((o={})[e.xmlNamespacePrefix?"xmlns:"+e.xmlNamespacePrefix:"xmlns"]=e.xmlNamespace,o);if(["Composite"].includes(e.type.name)){if(t[T])return t;var a=s({},t);return a[T]=i,a}var c={};return c[n.xmlCharKey]=t,c[T]=i,c}function q(e,t){return[T,t.xmlCharKey].includes(e)}function D(e,t,r,n){var o=L(e,t);if(o){var i=o[n];if(null!=i){var a=r[i];if(null!=a){var s=t.type.uberParent||t.type.className,c=a===s?a:s+"."+a,u=e.modelMappers.discriminators[c];u&&(t=u)}}}return t}function L(e,t){return t.type.polymorphicDiscriminator||U(e,t.type.uberParent)||U(e,t.type.className)}function U(e,t){return t&&e.modelMappers[t]&&e.modelMappers[t].type.polymorphicDiscriminator}var H=function(e){for(var t={},r=0,n=["Base64Url","Boolean","ByteArray","Composite","Date","DateTime","DateTimeRfc1123","Dictionary","Enum","Number","Object","Sequence","String","Stream","TimeSpan","UnixTime"];r<n.length;r++){var o=n[r];t[o]=o}return t}();const z={type:{name:"Composite",className:"Response",modelProperties:{cost:{constraints:{InclusiveMinimum:0},serializedName:"cost",type:{name:"Number"}},timespan:{serializedName:"timespan",required:!0,type:{name:"String"}},interval:{serializedName:"interval",type:{name:"TimeSpan"}},namespace:{serializedName:"namespace",type:{name:"String"}},resourceregion:{serializedName:"resourceregion",type:{name:"String"}},value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"Metric"}}}}}}},F={type:{name:"Composite",className:"Metric",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"String"}},name:{serializedName:"name",type:{name:"Composite",className:"LocalizableString"}},unit:{serializedName:"unit",required:!0,type:{name:"Enum",allowedValues:["Count","Bytes","Seconds","CountPerSecond","BytesPerSecond","Percent","MilliSeconds","ByteSeconds","Unspecified","Cores","MilliCores","NanoCores","BitsPerSecond"]}},timeseries:{serializedName:"timeseries",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"TimeSeriesElement"}}}}}}},V={type:{name:"Composite",className:"LocalizableString",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}},localizedValue:{serializedName:"localizedValue",type:{name:"String"}}}}},B={type:{name:"Composite",className:"TimeSeriesElement",modelProperties:{metadatavalues:{serializedName:"metadatavalues",type:{name:"Sequence",element:{type:{name:"Composite",className:"MetadataValue"}}}},data:{serializedName:"data",type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricValue"}}}}}}},G={type:{name:"Composite",className:"MetadataValue",modelProperties:{name:{serializedName:"name",type:{name:"Composite",className:"LocalizableString"}},value:{serializedName:"value",type:{name:"String"}}}}},K={type:{name:"Composite",className:"MetricValue",modelProperties:{timeStamp:{serializedName:"timeStamp",required:!0,type:{name:"DateTime"}},average:{serializedName:"average",type:{name:"Number"}},minimum:{serializedName:"minimum",type:{name:"Number"}},maximum:{serializedName:"maximum",type:{name:"Number"}},total:{serializedName:"total",type:{name:"Number"}},count:{serializedName:"count",type:{name:"Number"}}}}},W={type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}};class ${constructor(e){this.client=e}list(e,t){const r={resourceUri:e,options:h(t||{})};return this.client.sendOperationRequest(r,J)}}const Q=new N(e,!1),J={path:"/{resourceUri}/providers/microsoft.insights/metrics",httpMethod:"GET",responses:{200:{bodyMapper:z},default:{bodyMapper:W}},queryParameters:[{parameterPath:["options","timespan"],mapper:{serializedName:"timespan",type:{name:"String"}}},{parameterPath:["options","interval"],mapper:{serializedName:"interval",type:{name:"TimeSpan"}}},{parameterPath:["options","metricnames"],mapper:{serializedName:"metricnames",type:{name:"String"}}},{parameterPath:["options","aggregation"],mapper:{serializedName:"aggregation",type:{name:"String"}}},{parameterPath:["options","top"],mapper:{serializedName:"top",type:{name:"Number"}}},{parameterPath:["options","orderby"],mapper:{serializedName:"orderby",type:{name:"String"}}},{parameterPath:["options","filter"],mapper:{serializedName:"$filter",type:{name:"String"}}},{parameterPath:["options","resultType"],mapper:{serializedName:"resultType",type:{name:"Enum",allowedValues:["Data","Metadata"]}}},{parameterPath:"apiVersion",mapper:{serializedName:"api-version",required:!0,type:{name:"String"}}},{parameterPath:["options","metricnamespace"],mapper:{serializedName:"metricnamespace",type:{name:"String"}}}],urlParameters:[{parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},{parameterPath:"resourceUri",mapper:{serializedName:"resourceUri",required:!0,type:{name:"String"}},skipEncoding:!0}],headerParameters:[{parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}}],serializer:Q};var X;!function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.INFO=3]="INFO"}(X||(X={}));var Y,Z=function(){function e(e,t){this._nextPolicy=e,this._options=t}return e.prototype.shouldLog=function(e){return this._options.shouldLog(e)},e.prototype.log=function(e,t){this._options.log(e,t)},e}(),ee=function(){function e(e){this._logger=e}return e.prototype.shouldLog=function(e){return!!this._logger&&e!==X.OFF&&e<=this._logger.minimumLogLevel},e.prototype.log=function(e,t){this._logger&&this.shouldLog(e)&&this._logger.log(e,t)},e}(),te="undefined"!=typeof process&&process.env&&process.env.DEBUG||void 0,re=[],ne=[],oe=[];te&&ae(te);var ie=Object.assign((function(e){return ce(e)}),{enable:ae,enabled:se,disable:function(){var e=Y||"";return ae(""),e},log:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e.length>0){var r=String(e[0]);r.includes(":error")?console.error.apply(console,d(e)):r.includes(":warning")?console.warn.apply(console,d(e)):r.includes(":info")?console.info.apply(console,d(e)):(r.includes(":verbose"),console.debug.apply(console,d(e)))}}});function ae(e){var t,r,n,o;Y=e,re=[],ne=[];var i=/\*/g,a=e.split(",").map((function(e){return e.trim().replace(i,".*?")}));try{for(var s=l(a),c=s.next();!c.done;c=s.next()){var u=c.value;u.startsWith("-")?ne.push(new RegExp("^"+u.substr(1)+"$")):re.push(new RegExp("^"+u+"$"))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}try{for(var p=l(oe),d=p.next();!d.done;d=p.next()){var h=d.value;h.enabled=se(h.namespace)}}catch(e){n={error:e}}finally{try{d&&!d.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}}function se(e){var t,r,n,o;if(e.endsWith("*"))return!0;try{for(var i=l(ne),a=i.next();!a.done;a=i.next())if(a.value.test(e))return!1}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}try{for(var s=l(re),c=s.next();!c.done;c=s.next())if(c.value.test(e))return!0}catch(e){n={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return!1}function ce(e){var t=Object.assign((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.enabled&&(r.length>0&&(r[0]=e+" "+r[0]),t.log.apply(t,d(r)))}),{enabled:se(e),destroy:ue,log:ie.log,namespace:e,extend:le});return oe.push(t),t}function ue(){var e=oe.indexOf(this);return e>=0&&(oe.splice(e,1),!0)}function le(e){var t=ce(this.namespace+":"+e);return t.log=this.log,t}const pe=ie;var de,he=new Set,fe="undefined"!=typeof process&&process.env&&process.env.AZURE_LOG_LEVEL||void 0,ye=pe("azure");ye.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];pe.log.apply(pe,d(e))};var ge=["verbose","info","warning","error"];fe&&(Ee(fe)?function(e){var t,r;if(e&&!Ee(e))throw new Error("Unknown log level '"+e+"'. Acceptable values: "+ge.join(","));de=e;var n=[];try{for(var o=l(he),i=o.next();!i.done;i=o.next()){var a=i.value;Se(a)&&n.push(a.namespace)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}pe.enable(n.join(","))}(fe):console.error("AZURE_LOG_LEVEL set to unknown log level '"+fe+"'; logging is not enabled. Acceptable values: "+ge.join(", ")+"."));var me={verbose:400,info:300,warning:200,error:100};function ve(e){var t=ye.extend(e);return be(ye,t),{error:we(t,"error"),warning:we(t,"warning"),info:we(t,"info"),verbose:we(t,"verbose")}}function be(e,t){t.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.log.apply(e,d(t))}}function we(e,t){var r=Object.assign(e.extend(t),{level:t});if(be(e,r),Se(r)){var n=pe.disable();pe.enable(n+","+r.namespace)}return he.add(r),r}function Se(e){return!!(de&&me[e.level]<=me[de])}function Ee(e){return ge.includes(e)}var Te=ve("core-http"),Ie=function(){function e(){this._rawQuery={}}return e.prototype.any=function(){return Object.keys(this._rawQuery).length>0},e.prototype.keys=function(){return Object.keys(this._rawQuery)},e.prototype.set=function(e,t){var r=t;if(e)if(null!=r){var n=Array.isArray(r)?r:r.toString();this._rawQuery[e]=n}else delete this._rawQuery[e]},e.prototype.get=function(e){return e?this._rawQuery[e]:void 0},e.prototype.toString=function(){var e="";for(var t in this._rawQuery){e&&(e+="&");var r=this._rawQuery[t];if(Array.isArray(r)){for(var n=[],o=0,i=r;o<i.length;o++){var a=i[o];n.push(t+"="+a)}e+=n.join("&")}else e+=t+"="+r}return e},e.parse=function(t){var r=new e;if(t){t.startsWith("?")&&(t=t.substring(1));for(var n="ParameterName",o="",i="",a=0;a<t.length;++a){var s=t[a];switch(n){case"ParameterName":switch(s){case"=":n="ParameterValue";break;case"&":o="",i="";break;default:o+=s}break;case"ParameterValue":switch(s){case"&":r.set(o,i),o="",i="",n="ParameterName";break;default:i+=s}break;default:throw new Error("Unrecognized URLQuery parse state: "+n)}}"ParameterValue"===n&&r.set(o,i)}return r},e}(),Oe=function(){function e(){}return e.prototype.setScheme=function(e){e?this.set(e,"SCHEME"):this._scheme=void 0},e.prototype.getScheme=function(){return this._scheme},e.prototype.setHost=function(e){e?this.set(e,"SCHEME_OR_HOST"):this._host=void 0},e.prototype.getHost=function(){return this._host},e.prototype.setPort=function(e){null==e||""===e?this._port=void 0:this.set(e.toString(),"PORT")},e.prototype.getPort=function(){return this._port},e.prototype.setPath=function(e){if(e){var t=e.indexOf("://");if(-1!==t){var r=e.lastIndexOf("/",t);this.set(-1===r?e:e.substr(r+1),"SCHEME")}else this.set(e,"PATH")}else this._path=void 0},e.prototype.appendPath=function(e){if(e){var t=this.getPath();t&&(t.endsWith("/")||(t+="/"),e.startsWith("/")&&(e=e.substring(1)),e=t+e),this.set(e,"PATH")}},e.prototype.getPath=function(){return this._path},e.prototype.setQuery=function(e){this._query=e?Ie.parse(e):void 0},e.prototype.setQueryParameter=function(e,t){e&&(this._query||(this._query=new Ie),this._query.set(e,t))},e.prototype.getQueryParameterValue=function(e){return this._query?this._query.get(e):void 0},e.prototype.getQuery=function(){return this._query?this._query.toString():void 0},e.prototype.set=function(e,t){for(var r=new Ae(e,t);r.next();){var n=r.current(),o=void 0;if(n)switch(n.type){case"SCHEME":this._scheme=n.text||void 0;break;case"HOST":this._host=n.text||void 0;break;case"PORT":this._port=n.text||void 0;break;case"PATH":o=n.text||void 0,this._path&&"/"!==this._path&&"/"===o||(this._path=o);break;case"QUERY":this._query=Ie.parse(n.text);break;default:throw new Error("Unrecognized URLTokenType: "+n.type)}}},e.prototype.toString=function(){var e="";return this._scheme&&(e+=this._scheme+"://"),this._host&&(e+=this._host),this._port&&(e+=":"+this._port),this._path&&(this._path.startsWith("/")||(e+="/"),e+=this._path),this._query&&this._query.any()&&(e+="?"+this._query.toString()),e},e.prototype.replaceAll=function(e,t){e&&(this.setScheme(_(this.getScheme(),e,t)),this.setHost(_(this.getHost(),e,t)),this.setPort(_(this.getPort(),e,t)),this.setPath(_(this.getPath(),e,t)),this.setQuery(_(this.getQuery(),e,t)))},e.parse=function(t){var r=new e;return r.set(t,"SCHEME_OR_HOST"),r},e}(),Ce=function(){function e(e,t){this.text=e,this.type=t}return e.scheme=function(t){return new e(t,"SCHEME")},e.host=function(t){return new e(t,"HOST")},e.port=function(t){return new e(t,"PORT")},e.path=function(t){return new e(t,"PATH")},e.query=function(t){return new e(t,"QUERY")},e}(),Ae=function(){function e(e,t){this._text=e,this._textLength=e?e.length:0,this._currentState=null!=t?t:"SCHEME_OR_HOST",this._currentIndex=0}return e.prototype.current=function(){return this._currentToken},e.prototype.next=function(){if(Pe(this))switch(this._currentState){case"SCHEME":t=function(e){return ke(e,(function(e){return function(e){var t=e.charCodeAt(0);return 48<=t&&t<=57||65<=t&&t<=90||97<=t&&t<=122}(e)}))}(e=this),e._currentToken=Ce.scheme(t),Pe(e)?e._currentState="HOST":e._currentState="DONE";break;case"SCHEME_OR_HOST":!function(e){var t=xe(e,":","/","?");Pe(e)?":"===Re(e)?"://"===Ne(e,3)?(e._currentToken=Ce.scheme(t),e._currentState="HOST"):(e._currentToken=Ce.host(t),e._currentState="PORT"):(e._currentToken=Ce.host(t),"/"===Re(e)?e._currentState="PATH":e._currentState="QUERY"):(e._currentToken=Ce.host(t),e._currentState="DONE")}(this);break;case"HOST":!function(e){"://"===Ne(e,3)&&_e(e,3);var t=xe(e,":","/","?");e._currentToken=Ce.host(t),Pe(e)?":"===Re(e)?e._currentState="PORT":"/"===Re(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PORT":!function(e){":"===Re(e)&&_e(e);var t=xe(e,"/","?");e._currentToken=Ce.port(t),Pe(e)?"/"===Re(e)?e._currentState="PATH":e._currentState="QUERY":e._currentState="DONE"}(this);break;case"PATH":!function(e){var t=xe(e,"?");e._currentToken=Ce.path(t),Pe(e)?e._currentState="QUERY":e._currentState="DONE"}(this);break;case"QUERY":!function(e){"?"===Re(e)&&_e(e);var t=function(e){var t="";return e._currentIndex<e._textLength&&(t=e._text.substring(e._currentIndex),e._currentIndex=e._textLength),t}(e);e._currentToken=Ce.query(t),e._currentState="DONE"}(this);break;default:throw new Error("Unrecognized URLTokenizerState: "+this._currentState)}else this._currentToken=void 0;var e,t;return!!this._currentToken},e}();function Pe(e){return e._currentIndex<e._textLength}function Re(e){return e._text[e._currentIndex]}function _e(e,t){Pe(e)&&(t||(t=1),e._currentIndex+=t)}function Ne(e,t){var r=e._currentIndex+t;return e._textLength<r&&(r=e._textLength),e._text.substring(e._currentIndex,r)}function ke(e,t){for(var r="";Pe(e);){var n=Re(e);if(!t(n))break;r+=n,_e(e)}return r}function xe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return ke(e,(function(e){return-1===t.indexOf(e)}))}var je="REDACTED",Me=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent"],qe=["api-version"],De=function(){function e(e){var t=void 0===e?{}:e,r=t.allowedHeaderNames,n=void 0===r?[]:r,o=t.allowedQueryParameters,i=void 0===o?[]:o;n=Array.isArray(n)?Me.concat(n):Me,i=Array.isArray(i)?qe.concat(i):qe,this.allowedHeaderNames=new Set(n.map((function(e){return e.toLowerCase()}))),this.allowedQueryParameters=new Set(i.map((function(e){return e.toLowerCase()})))}return e.prototype.sanitize=function(e){return JSON.stringify(e,this.replacer.bind(this),2)},e.prototype.replacer=function(e,t){return t instanceof Error?s(s({},t),{name:t.name,message:t.message}):"_headersMap"===e?this.sanitizeHeaders(e,t):"url"===e?this.sanitizeUrl(t):"query"===e?this.sanitizeQuery(t):"body"!==e&&"response"!==e&&"operationSpec"!==e?t:void 0},e.prototype.sanitizeHeaders=function(e,t){return this.sanitizeObject(t,this.allowedHeaderNames,(function(e,t){return e[t].value}))},e.prototype.sanitizeQuery=function(e){return this.sanitizeObject(e,this.allowedQueryParameters,(function(e,t){return e[t]}))},e.prototype.sanitizeObject=function(e,t,r){if("object"!=typeof e||null===e)return e;for(var n={},o=0,i=Object.keys(e);o<i.length;o++){var a=i[o];t.has(a.toLowerCase())?n[a]=r(e,a):n[a]=je}return n},e.prototype.sanitizeUrl=function(e){if("string"!=typeof e||null===e)return e;var t=Oe.parse(e),r=t.getQuery();if(!r)return e;for(var n=Ie.parse(r),o=0,i=n.keys();o<i.length;o++){var a=i[o];this.allowedQueryParameters.has(a.toLowerCase())||n.set(a,je)}return t.setQuery(n.toString()),t.toString()},e}();function Le(e){return void 0===e&&(e={}),{create:function(t,r){return new Ue(t,r,e)}}}var Ue=function(e){function t(t,r,n){var o=void 0===n?{}:n,i=o.logger,a=void 0===i?Te.info:i,s=o.allowedHeaderNames,c=void 0===s?[]:s,u=o.allowedQueryParameters,l=void 0===u?[]:u,p=e.call(this,t,r)||this;return p.logger=a,p.sanitizer=new De({allowedHeaderNames:c,allowedQueryParameters:l}),p}return i(t,e),Object.defineProperty(t.prototype,"allowedHeaderNames",{get:function(){return this.sanitizer.allowedHeaderNames},set:function(e){this.sanitizer.allowedHeaderNames=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"allowedQueryParameters",{get:function(){return this.sanitizer.allowedQueryParameters},set:function(e){this.sanitizer.allowedQueryParameters=e},enumerable:!1,configurable:!0}),t.prototype.sendRequest=function(e){var t=this;return this.logger.enabled?(this.logRequest(e),this._nextPolicy.sendRequest(e).then((function(e){return t.logResponse(e)}))):this._nextPolicy.sendRequest(e)},t.prototype.logRequest=function(e){this.logger("Request: "+this.sanitizer.sanitize(e))},t.prototype.logResponse=function(e){return this.logger("Response status code: "+e.status),this.logger("Headers: "+this.sanitizer.sanitize(e.headers)),e},t}(Z);function He(e){return ze(e.parameterPath,e.mapper)}function ze(e,t){return"string"==typeof e?e:Array.isArray(e)?e.join("."):t.serializedName}var Fe,Ve={},Be=new De,Ge=function(e){function t(r,n,o,i,a){var s=e.call(this,r)||this;return s.name="RestError",s.code=n,s.statusCode=o,s.request=i,s.response=a,Object.setPrototypeOf(s,t.prototype),s}return i(t,e),t.prototype[Ve]=function(){return"RestError: "+this.message+" \n "+Be.sanitize(this)},t.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",t.PARSE_ERROR="PARSE_ERROR",t}(Error),Ke=document.implementation.createDocument(null,null,null),We=new DOMParser;function $e(e,t){var r,n,o;void 0===t&&(t={});try{var i={rootName:null!==(r=t.rootName)&&void 0!==r?r:"",includeRoot:null!==(n=t.includeRoot)&&void 0!==n&&n,xmlCharKey:null!==(o=t.xmlCharKey)&&void 0!==o?o:I},a=We.parseFromString(e,"application/xml");!function(e){var t=e.getElementsByTagName("parsererror");if(t.length>0&&function(){var e;if(void 0===Fe)try{Fe=null!==(e=We.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI)&&void 0!==e?e:""}catch(e){Fe=""}return Fe}())for(var r=0;r<t.length;r++)if(t[r].namespaceURI===Fe)throw new Error(t[r].innerHTML)}(a);var s;return s=Qe(i.includeRoot?a:a.childNodes[0],i),Promise.resolve(s)}catch(e){return Promise.reject(e)}}function Qe(e,t){var r={},n=e.childNodes.length,o=e.childNodes[0],i=o&&1===n&&o.nodeType===Node.TEXT_NODE&&o.nodeValue||void 0,a=function(e){return function(e){return!!e.attributes}(e)&&e.hasAttributes()?e:void 0}(e);if(a){r[T]={};for(var s=0;s<a.attributes.length;s++){var c=a.attributes[s];r[T][c.nodeName]=c.nodeValue}i&&(r[t.xmlCharKey]=i)}else 0===n?r="":i&&(r=i);if(!i)for(s=0;s<n;s++){var u=e.childNodes[s];if(u.nodeType!==Node.TEXT_NODE){var l=Qe(u,t);r[u.nodeName]?Array.isArray(r[u.nodeName])?r[u.nodeName].push(l):r[u.nodeName]=[r[u.nodeName],l]:r[u.nodeName]=l}}return r}var Je=new XMLSerializer;function Xe(e,t){var r,n,o;void 0===t&&(t={});var i={rootName:null!==(r=t.rootName)&&void 0!==r?r:"root",includeRoot:null!==(n=t.includeRoot)&&void 0!==n&&n,xmlCharKey:null!==(o=t.xmlCharKey)&&void 0!==o?o:I},a=Ze(e,i.rootName,i)[0];return'<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'+Je.serializeToString(a)}function Ye(e){for(var t=[],r=0,n=Object.keys(e);r<n.length;r++){var o=n[r],i=Ke.createAttribute(o);i.value=e[o].toString(),t.push(i)}return t}function Ze(e,t,r){if(null==e||"string"==typeof e||"number"==typeof e||"boolean"==typeof e)return(u=Ke.createElement(t)).textContent=null==e?"":e.toString(),[u];if(Array.isArray(e)){for(var n=[],o=0,i=e;o<i.length;o++)for(var a=0,s=Ze(i[o],t,r);a<s.length;a++){var c=s[a];n.push(c)}return n}if("object"==typeof e){for(var u=Ke.createElement(t),l=0,p=Object.keys(e);l<p.length;l++){var d=p[l];if(d===T)for(var h=0,f=Ye(e[d]);h<f.length;h++){var y=f[h];u.attributes.setNamedItem(y)}else if(d===r.xmlCharKey)u.textContent=e[d].toString();else for(var g=0,m=Ze(e[d],d,r);g<m.length;g++)c=m[g],u.appendChild(c)}return[u]}throw new Error("Illegal value passed to buildObject: "+e)}function et(e,t){return{create:function(r,n){return new it(r,n,e,t)}}}var tt,rt=["application/json","text/json"],nt=["application/xml","application/atom+xml"],ot={expectedContentTypes:{json:rt,xml:nt}},it=function(e){function t(t,r,n,o){var i;void 0===o&&(o={});var a=e.call(this,t,r)||this;return a.jsonContentTypes=n&&n.json||rt,a.xmlContentTypes=n&&n.xml||nt,a.xmlCharKey=null!==(i=o.xmlCharKey)&&void 0!==i?i:I,a}return i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){var t=this;return u(this,(function(r){return[2,this._nextPolicy.sendRequest(e).then((function(e){return function(e,t,r,n){var o,i,a;void 0===n&&(n={});var s={rootName:null!==(o=n.rootName)&&void 0!==o?o:"",includeRoot:null!==(i=n.includeRoot)&&void 0!==i&&i,xmlCharKey:null!==(a=n.xmlCharKey)&&void 0!==a?a:I};return function(e,t,r,n){var o,i=function(e){var t='Error "'+e+'" occurred while parsing the response body - '+r.bodyAsText+".",n=e.code||Ge.PARSE_ERROR,o=new Ge(t,n,r.status,r.request,r);return Promise.reject(o)};if(!(null===(o=r.request.streamResponseStatusCodes)||void 0===o?void 0:o.has(r.status))&&!r.request.streamResponseBody&&r.bodyAsText){var a=r.bodyAsText,s=r.headers.get("Content-Type")||"",c=s?s.split(";").map((function(e){return e.toLowerCase()})):[];if(0===c.length||c.some((function(t){return-1!==e.indexOf(t)})))return new Promise((function(e){r.parsedBody=JSON.parse(a),e(r)})).catch(i);if(c.some((function(e){return-1!==t.indexOf(e)})))return $e(a,n).then((function(e){return r.parsedBody=e,r})).catch(i)}return Promise.resolve(r)}(e,t,r,s).then((function(e){if(!function(e){var t=e.request.shouldDeserialize;return void 0===t||("boolean"==typeof t?t:t(e))}(e))return e;var t=e.request.operationSpec;if(!t||!t.responses)return e;var o=function(e){var t,r=e.request,n=r.operationSpec;if(n){var o=r.operationResponseGetter;t=o?o(n,e):n.responses[e.status]}return t}(e),i=function(e,t,r){var n,o=200<=e.status&&e.status<300;if(function(e){var t=Object.keys(e.responses);return 0===t.length||1===t.length&&"default"===t[0]}(t)?o:r){if(!r)return{error:null,shouldReturnResponse:!1};if(!r.isError)return{error:null,shouldReturnResponse:!1}}var i=null!=r?r:t.responses.default,a=(null===(n=e.request.streamResponseStatusCodes)||void 0===n?void 0:n.has(e.status))||e.request.streamResponseBody?"Unexpected status code: "+e.status:e.bodyAsText,s=new Ge(a,void 0,e.status,e.request,e);if(!i)throw s;var c=i.bodyMapper,u=i.headersMapper;try{if(e.parsedBody){var l=e.parsedBody,p=void 0;if(c){var d=l;t.isXML&&c.type.name===H.Sequence&&(d="object"==typeof l?l[c.xmlElementName]:[]),p=t.serializer.deserialize(c,d,"error.response.parsedBody")}var h=l.error||p||l;s.code=h.code,h.message&&(s.message=h.message),c&&(s.response.parsedBody=p)}e.headers&&u&&(s.response.parsedHeaders=t.serializer.deserialize(u,e.headers.rawHeaders(),"operationRes.parsedHeaders"))}catch(t){s.message='Error "'+t.message+'" occurred in deserializing the responseBody - "'+e.bodyAsText+'" for the default response.'}return{error:s,shouldReturnResponse:!1}}(e,t,o),a=i.error,s=i.shouldReturnResponse;if(a)throw a;if(s)return e;if(o){if(o.bodyMapper){var c=e.parsedBody;t.isXML&&o.bodyMapper.type.name===H.Sequence&&(c="object"==typeof c?c[o.bodyMapper.xmlElementName]:[]);try{e.parsedBody=t.serializer.deserialize(o.bodyMapper,c,"operationRes.parsedBody",n)}catch(t){throw new Ge("Error "+t+" occurred in deserializing the responseBody - "+e.bodyAsText,void 0,e.status,e.request,e)}}else"HEAD"===t.httpMethod&&(e.parsedBody=r.status>=200&&r.status<300);o.headersMapper&&(e.parsedHeaders=t.serializer.deserialize(o.headersMapper,e.headers.rawHeaders(),"operationRes.parsedHeaders",n))}return e}))}(t.jsonContentTypes,t.xmlContentTypes,e,{xmlCharKey:t.xmlCharKey})}))]}))}))},t}(Z),at=3e4,st=9e4;function ct(e){return"number"==typeof e}function ut(e,t,r,n,o){return!!t(n,o)&&r.retryCount<e}function lt(e,t,r){void 0===t&&(t={retryCount:0,retryInterval:0}),r&&(t.error&&(r.innerError=t.error),t.error=r),t.retryCount++;var n=Math.pow(2,t.retryCount-1)-1;return n*=.8*e.retryInterval+Math.floor(Math.random()*(.4*e.retryInterval)),t.retryInterval=Math.min(e.minRetryInterval+n,e.maxRetryInterval),t}function pt(e,t,r){return{create:function(n,o){return new ht(n,o,e,t,r)}}}!function(e){e[e.Exponential=0]="Exponential"}(tt||(tt={}));var dt={maxRetries:3,retryDelayInMs:at,maxRetryDelayInMs:st},ht=function(e){function t(t,r,n,o,i){var a=e.call(this,t,r)||this;return a.retryCount=ct(n)?n:3,a.retryInterval=ct(o)?o:at,a.maxRetryInterval=ct(i)?i:st,a}return i(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then((function(r){return ft(t,e,r)})).catch((function(r){return ft(t,e,r.response,void 0,r)}))},t}(Z);function ft(e,t,r,n,o){return c(this,void 0,void 0,(function(){function i(e){var t=null==e?void 0:e.status;return!(void 0===t||t<500&&408!==t||501===t||505===t)}var a,s,c;return u(this,(function(u){switch(u.label){case 0:if(n=lt({retryInterval:e.retryInterval,minRetryInterval:0,maxRetryInterval:e.maxRetryInterval},n,o),(a=t.abortSignal&&t.abortSignal.aborted)||!ut(e.retryCount,i,n,r))return[3,6];Te.info("Retrying request in "+n.retryInterval),u.label=1;case 1:return u.trys.push([1,4,,5]),[4,P(n.retryInterval)];case 2:return u.sent(),[4,e._nextPolicy.sendRequest(t.clone())];case 3:return s=u.sent(),[2,ft(e,t,s,n)];case 4:return c=u.sent(),[2,ft(e,t,r,n,c)];case 5:return[3,7];case 6:if(a||o||!r)throw n.error||new Ge("Failed to send the request.",Ge.REQUEST_SEND_ERROR,r&&r.status,r&&r.request,r);return[2,r];case 7:return[2]}}))}))}function yt(e){return void 0===e&&(e="x-ms-client-request-id"),{create:function(t,r){return new gt(t,r,e)}}}var gt=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o._requestIdHeaderName=n,o}return i(t,e),t.prototype.sendRequest=function(e){return e.headers.contains(this._requestIdHeaderName)||e.headers.set(this._requestIdHeaderName,e.requestId),this._nextPolicy.sendRequest(e)},t}(Z);function mt(e){return e.toLowerCase()}function vt(e){if(e&&"object"==typeof e){var t=e;if("function"==typeof t.rawHeaders&&"function"==typeof t.clone&&"function"==typeof t.get&&"function"==typeof t.set&&"function"==typeof t.contains&&"function"==typeof t.remove&&"function"==typeof t.headersArray&&"function"==typeof t.headerValues&&"function"==typeof t.headerNames&&"function"==typeof t.toJson)return!0}return!1}var bt=function(){function e(e){if(this._headersMap={},e)for(var t in e)this.set(t,e[t])}return e.prototype.set=function(e,t){this._headersMap[mt(e)]={name:e,value:t.toString()}},e.prototype.get=function(e){var t=this._headersMap[mt(e)];return t?t.value:void 0},e.prototype.contains=function(e){return!!this._headersMap[mt(e)]},e.prototype.remove=function(e){var t=this.contains(e);return delete this._headersMap[mt(e)],t},e.prototype.rawHeaders=function(){var e={};for(var t in this._headersMap){var r=this._headersMap[t];e[r.name.toLowerCase()]=r.value}return e},e.prototype.headersArray=function(){var e=[];for(var t in this._headersMap)e.push(this._headersMap[t]);return e},e.prototype.headerNames=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].name);return e},e.prototype.headerValues=function(){for(var e=[],t=this.headersArray(),r=0;r<t.length;++r)e.push(t[r].value);return e},e.prototype.toJson=function(){return this.rawHeaders()},e.prototype.toString=function(){return JSON.stringify(this.toJson())},e.prototype.clone=function(){return new e(this.rawHeaders())},e}(),wt="authorization",St="Retry-After";var Et=function(){return"x-ms-useragent"};function Tt(){var e,t,r,n=[{key:"core-http",value:"1.2.4"}],o=function(){var e=self.navigator;return[{key:"OS",value:(e.oscpu||e.platform).replace(" ","")}]}();return e=n.concat(o),void 0===t&&(t=" "),void 0===r&&(r="/"),e.map((function(e){var t=e.value?""+r+e.value:"";return""+e.key+t})).join(t)}function It(e){var t=e&&void 0!==e.key&&null!==e.key?e.key:"x-ms-useragent",r=e&&void 0!==e.value&&null!==e.value?e.value:Tt();return{create:function(e,n){return new Ot(e,n,t,r)}}}var Ot=function(e){function t(t,r,n,o){var i=e.call(this,t,r)||this;return i._nextPolicy=t,i._options=r,i.headerKey=n,i.headerValue=o,i}return i(t,e),t.prototype.sendRequest=function(e){return this.addUserAgentHeader(e),this._nextPolicy.sendRequest(e)},t.prototype.addUserAgentHeader=function(e){e.headers||(e.headers=new bt),!e.headers.get(this.headerKey)&&this.headerValue&&e.headers.set(this.headerKey,this.headerValue)},t}(Z),Ct=["GET","HEAD"],At={handleRedirects:!0,maxRetries:20};function Pt(e){return void 0===e&&(e=20),{create:function(t,r){return new Rt(t,r,e)}}}var Rt=function(e){function t(t,r,n){void 0===n&&(n=20);var o=e.call(this,t,r)||this;return o.maxRetries=n,o}return i(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e).then((function(e){return _t(t,e,0)}))},t}(Z);function _t(e,t,r){var n=t.request,o=t.status,i=t.headers.get("location");if(i&&(300===o||301===o&&Ct.includes(n.method)||302===o&&Ct.includes(n.method)||303===o&&"POST"===n.method||307===o)&&(!e.maxRetries||r<e.maxRetries)){var a=Oe.parse(n.url);return a.setPath(i),n.url=a.toString(),303===o&&(n.method="GET",delete n.body),e._nextPolicy.sendRequest(n).then((function(t){return _t(e,t,r+1)}))}return Promise.resolve(t)}var Nt=function(e){function t(t,r,n){void 0===n&&(n=30);var o=e.call(this,t,r)||this;return o._retryTimeout=n,o}return i(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).then((function(r){return function(e,t,r){if(409===r.status){var n=function(e){var t,r;if(e){try{r=JSON.parse(e)}catch(e){}if(r&&r.error&&r.error.message&&r.error.code&&"MissingSubscriptionRegistration"===r.error.code){var n=r.error.message.match(/.*'(.*)'/i);n&&(t=n.pop())}}return t}(r.bodyAsText);if(n){var o=function(e){var t=e.match(/.*\/subscriptions\/[a-f0-9-]+\//gi);if(!t||!t[0])throw new Error("Unable to extract subscriptionId from the given url - "+e+".");return t[0]}(t.url);return function(e,t,r,n){var o=t+"providers/"+r+"/register?api-version=2016-02-01",i=t+"providers/"+r+"?api-version=2016-02-01",a=kt(n);return a.method="POST",a.url=o,e._nextPolicy.sendRequest(a).then((function(t){if(200!==t.status)throw new Error("Autoregistration of "+r+" failed. Please try registering manually.");return xt(e,i,n)}))}(e,o,n,t).catch((function(){return!1})).then((function(n){return n?(t.headers.set("x-ms-client-request-id",A()),e._nextPolicy.sendRequest(t.clone())):r}))}}return Promise.resolve(r)}(t,e,r)}))},t}(Z);function kt(e,t){void 0===t&&(t=!1);var r=e.clone();return t&&(r.url=e.url),r.headers.set("x-ms-client-request-id",A()),r.headers.set("Content-Type","application/json; charset=utf-8"),r}function xt(e,t,r){var n=kt(r);return n.url=t,n.method="GET",e._nextPolicy.sendRequest(n).then((function(n){var o=n.parsedBody;return!(!n.parsedBody||!o.registrationState||"Registered"!==o.registrationState)||P(1e3*e._retryTimeout).then((function(){return xt(e,t,r)}))}))}var jt={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function Mt(e,t,r,n){return{create:function(o,i){return new Dt(o,i,e,t,r,n)}}}var qt,Dt=function(e){function t(t,r,n,o,i,a){var s=e.call(this,t,r)||this;return s.retryCount=ct(n)?n:3,s.retryInterval=ct(o)?o:at,s.minRetryInterval=ct(i)?i:3e3,s.maxRetryInterval=ct(a)?a:st,s}return i(t,e),t.prototype.sendRequest=function(e){var t=this;return this._nextPolicy.sendRequest(e.clone()).catch((function(r){return Lt(t,e,r.response,r)}))},t}(Z);function Lt(e,t,r,n,o){return c(this,void 0,void 0,(function(){function i(e,t){return!(!t||!t.code||"ETIMEDOUT"!==t.code&&"ESOCKETTIMEDOUT"!==t.code&&"ECONNREFUSED"!==t.code&&"ECONNRESET"!==t.code&&"ENOENT"!==t.code)}var a;return u(this,(function(s){switch(s.label){case 0:if(o=lt(e,o,n),!ut(e.retryCount,i,o,r,n))return[3,5];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,P(o.retryInterval)];case 2:return s.sent(),[2,e._nextPolicy.sendRequest(t.clone())];case 3:return a=s.sent(),[2,Lt(e,t,r,a,o)];case 4:return[3,6];case 5:return n?[2,Promise.reject(o.error)]:[2,r];case 6:return[2]}}))}))}!function(e){e.Csv=",",e.Ssv=" ",e.Tsv="\t",e.Pipes="|",e.Multi="Multi"}(qt||(qt={}));var Ut=function(){function e(e,t,r,n,o,i,a,s,c,u,l,p,d,h,f){this.streamResponseBody=i,this.streamResponseStatusCodes=f,this.url=e||"",this.method=t||"GET",this.headers=vt(o)?o:new bt(o),this.body=r,this.query=n,this.formData=void 0,this.withCredentials=a||!1,this.abortSignal=s,this.timeout=c||0,this.onUploadProgress=u,this.onDownloadProgress=l,this.proxySettings=p,this.keepAlive=d,this.decompressResponse=h,this.requestId=this.headers.get("x-ms-client-request-id")||A()}return e.prototype.validateRequestProperties=function(){if(!this.method)throw new Error("WebResource.method is required.");if(!this.url)throw new Error("WebResource.url is required.")},e.prototype.prepare=function(e){if(!e)throw new Error("options object is required");if(void 0===e.method||null===e.method||"string"!=typeof e.method.valueOf())throw new Error("options.method must be a string.");if(e.url&&e.pathTemplate)throw new Error("options.url and options.pathTemplate are mutually exclusive. Please provide exactly one of them.");if(!(void 0!==e.pathTemplate&&null!==e.pathTemplate&&"string"==typeof e.pathTemplate.valueOf()||void 0!==e.url&&null!==e.url&&"string"==typeof e.url.valueOf()))throw new Error("Please provide exactly one of options.pathTemplate or options.url.");if(e.url){if("string"!=typeof e.url)throw new Error('options.url must be of type "string".');this.url=e.url}if(e.method){var t=["GET","PUT","HEAD","DELETE","OPTIONS","POST","PATCH","TRACE"];if(-1===t.indexOf(e.method.toUpperCase()))throw new Error('The provided method "'+e.method+'" is invalid. Supported HTTP methods are: '+JSON.stringify(t))}if(this.method=e.method.toUpperCase(),e.pathTemplate){var r=e.pathTemplate,n=e.pathParameters;if("string"!=typeof r)throw new Error('options.pathTemplate must be of type "string".');e.baseUrl||(e.baseUrl="https://management.azure.com");var o=e.baseUrl,i=o+(o.endsWith("/")?"":"/")+(r.startsWith("/")?r.slice(1):r),a=i.match(/({[\w-]*\s*[\w-]*})/gi);if(a&&a.length){if(!n)throw new Error("pathTemplate: "+r+" has been provided. Hence, options.pathParameters must also be provided.");a.forEach((function(e){var t=e.slice(1,-1),o=n[t];if(null==o||"string"!=typeof o&&"object"!=typeof o){var a=JSON.stringify(n,void 0,2);throw new Error("pathTemplate: "+r+" contains the path parameter "+t+" however, it is not present in parameters: "+a+'.The value of the path parameter can either be a "string" of the form { '+t+': "some sample value" } or it can be an "object" of the form { "'+t+'": { value: "some sample value", skipUrlEncoding: true } }.')}if("string"==typeof o.valueOf()&&(i=i.replace(e,encodeURIComponent(o))),"object"==typeof o.valueOf()){if(!o.value)throw new Error("options.pathParameters["+t+'] is of type "object" but it does not contain a "value" property.');i=o.skipUrlEncoding?i.replace(e,o.value):i.replace(e,encodeURIComponent(o.value))}}))}this.url=i}if(e.queryParameters){var s=e.queryParameters;if("object"!=typeof s)throw new Error('options.queryParameters must be of type object. It should be a JSON object of "query-parameter-name" as the key and the "query-parameter-value" as the value. The "query-parameter-value" may be fo type "string" or an "object" of the form { value: "query-parameter-value", skipUrlEncoding: true }.');this.url&&-1===this.url.indexOf("?")&&(this.url+="?");var c=[];for(var u in this.query={},s){var l=s[u];if(l)if("string"==typeof l)c.push(u+"="+encodeURIComponent(l)),this.query[u]=encodeURIComponent(l);else if("object"==typeof l){if(!l.value)throw new Error("options.queryParameters["+u+'] is of type "object" but it does not contain a "value" property.');l.skipUrlEncoding?(c.push(u+"="+l.value),this.query[u]=l.value):(c.push(u+"="+encodeURIComponent(l.value)),this.query[u]=encodeURIComponent(l.value))}}this.url+=c.join("&")}if(e.headers)for(var p=e.headers,d=0,h=Object.keys(e.headers);d<h.length;d++){var f=h[d];this.headers.set(f,p[f])}return this.headers.get("accept-language")||this.headers.set("accept-language","en-US"),this.headers.get("x-ms-client-request-id")||e.disableClientRequestId||this.headers.set("x-ms-client-request-id",this.requestId),this.headers.get("Content-Type")||this.headers.set("Content-Type","application/json; charset=utf-8"),this.body=e.body,void 0!==e.body&&null!==e.body&&(e.bodyIsStream?(this.headers.get("Transfer-Encoding")||this.headers.set("Transfer-Encoding","chunked"),"application/octet-stream"!==this.headers.get("Content-Type")&&this.headers.set("Content-Type","application/octet-stream")):(e.serializationMapper&&(this.body=new N(e.mappers).serialize(e.serializationMapper,e.body,"requestBody")),e.disableJsonStringifyOnBody||(this.body=JSON.stringify(e.body)))),e.spanOptions&&(this.spanOptions=e.spanOptions),e.tracingContext&&(this.tracingContext=e.tracingContext),this.abortSignal=e.abortSignal,this.onDownloadProgress=e.onDownloadProgress,this.onUploadProgress=e.onUploadProgress,this},e.prototype.clone=function(){var t=new e(this.url,this.method,this.body,this.query,this.headers&&this.headers.clone(),this.streamResponseBody,this.withCredentials,this.abortSignal,this.timeout,this.onUploadProgress,this.onDownloadProgress,this.proxySettings,this.keepAlive,this.decompressResponse,this.streamResponseStatusCodes);return this.formData&&(t.formData=this.formData),this.operationSpec&&(t.operationSpec=this.operationSpec),this.shouldDeserialize&&(t.shouldDeserialize=this.shouldDeserialize),this.operationResponseGetter&&(t.operationResponseGetter=this.operationResponseGetter),t},e}(),Ht=new Error("ProxyPolicy is not supported in browser environment");function zt(e){return{create:function(e,t){throw Ht}}}!function(e){function t(t,r){throw e.call(this,t,r),Ht}i(t,e),t.prototype.sendRequest=function(e){throw Ht}}(Z);var Ft={TooManyRequests:429};function Vt(){return{create:function(e,t){return new Kt(e,t)}}}var Bt,Gt,Kt=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o._handleResponse=n||o._defaultResponseHandler,o}return i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){var t=this;return u(this,(function(r){return[2,this._nextPolicy.sendRequest(e.clone()).then((function(r){return r.status!==Ft.TooManyRequests?r:t._handleResponse(e,r)}))]}))}))},t.prototype._defaultResponseHandler=function(e,r){return c(this,void 0,void 0,(function(){var n,o,i=this;return u(this,(function(a){return(n=r.headers.get(St))&&(o=t.parseRetryAfterHeader(n))?[2,P(o).then((function(t){return i._nextPolicy.sendRequest(e)}))]:[2,r]}))}))},t.parseRetryAfterHeader=function(e){var r=Number(e);return Number.isNaN(r)?t.parseDateRetryAfterHeader(e):1e3*r},t.parseDateRetryAfterHeader=function(e){try{var t=Date.now(),r=Date.parse(e)-t;return Number.isNaN(r)?void 0:r}catch(e){return}},t}(Z),Wt=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.authenticationProvider=n,o}return i(t,e),t.prototype.signRequest=function(e){return this.authenticationProvider.signRequest(e)},t.prototype.sendRequest=function(e){var t=this;return this.signRequest(e).then((function(e){return t._nextPolicy.sendRequest(e)}))},t}(Z),$t={enable:!0},Qt=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.keepAliveOptions=n,o}return i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){return u(this,(function(t){return e.keepAlive=this.keepAliveOptions.enable,[2,this._nextPolicy.sendRequest(e)]}))}))},t}(Z),Jt=function(){function e(){}return e.prototype.context=function(){return{spanId:"",traceId:"",traceFlags:0}},e.prototype.end=function(e){},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),Xt=function(){function e(){}return e.prototype.startSpan=function(e,t){return new Jt},e.prototype.getCurrentSpan=function(){return new Jt},e.prototype.withSpan=function(e,t){return t()},e.prototype.bind=function(e,t){return e},e}(),Yt=Symbol.for("@azure/core-tracing.tracerCache3");function Zt(){return Bt||function(){var e=self,t=e[Yt],r=!0;if(t)if(4===t.version)Bt=t;else if(r=!1,t.tracer)throw new Error("Two incompatible versions of @azure/core-tracing have been loaded.\n          This library is 4, existing is "+t.version+".");Bt||(Bt={tracer:void 0,version:4}),r&&(e[Yt]=Bt)}(),Bt}var er,tr=r(6563);function rr(e,t){return(0,tr.setSpan)(e,t)}!function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(er||(er={}));var nr,or=tr.context;function ir(e){return function(t,r){var n=function(){var e=Zt();return e.tracer?e.tracer:(Gt||(Gt=new Xt),Gt)}(),o=(null==r?void 0:r.tracingOptions)||{},i=s({kind:er.INTERNAL},o.spanOptions),a=e.packagePrefix?e.packagePrefix+"."+t:t,c=n.startSpan(a,i,o.tracingContext);e.namespace&&c.setAttribute("az.namespace",e.namespace);var u=o.spanOptions||{};c.isRecording()&&e.namespace&&(u=s(s({},o.spanOptions),{attributes:s(s({},i.attributes),{"az.namespace":e.namespace})}));var l=s(s({},o),{spanOptions:u,tracingContext:rr(o.tracingContext||or.active(),c)});return{span:c,updatedOptions:s(s({},r),{tracingOptions:l})}}}!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(nr||(nr={}));var ar=ir({packagePrefix:"",namespace:""}),sr=function(e){function t(t,r,n){var o=e.call(this,t,r)||this;return o.userAgent=n.userAgent,o}return i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){var t,r,n,o,i,a,c,l;return u(this,(function(u){switch(u.label){case 0:if(!e.tracingContext)return[2,this._nextPolicy.sendRequest(e)];t=Oe.parse(e.url).getPath()||"/",(r=ar(t,{tracingOptions:{spanOptions:s(s({},e.spanOptions),{kind:er.CLIENT}),tracingContext:e.tracingContext}}).span).setAttributes({"http.method":e.method,"http.url":e.url,requestId:e.requestId}),this.userAgent&&r.setAttribute("http.user_agent",this.userAgent),u.label=1;case 1:return u.trys.push([1,3,,4]),n=r.context(),(o=function(e){var t=[];if(e.traceId||t.push("traceId"),e.spanId||t.push("spanId"),!t.length){var r=(e.traceFlags||0).toString(16),n=1===r.length?"0"+r:r;return"00-"+e.traceId+"-"+e.spanId+"-"+n}}(n))&&(e.headers.set("traceparent",o),(i=n.traceState&&n.traceState.serialize())&&e.headers.set("tracestate",i)),[4,this._nextPolicy.sendRequest(e)];case 2:return a=u.sent(),r.setAttribute("http.status_code",a.status),(c=a.headers.get("x-ms-request-id"))&&r.setAttribute("serviceRequestId",c),r.end(),[2,a];case 3:throw l=u.sent(),r.end(),l;case 4:return[2]}}))}))},t}(Z),cr=new Error("DisableResponseDecompressionPolicy is not supported in browser environment");!function(e){function t(t,r){throw e.call(this,t,r),cr}i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){return u(this,(function(e){throw cr}))}))}}(Z);var ur=function(e){function t(t,r){return e.call(this,t,r)||this}return i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){var t;return u(this,(function(r){return"string"==typeof e.body&&e.body.startsWith("[")&&(t=JSON.parse(e.body),Array.isArray(t)&&(e.body=t.map((function(e){return JSON.stringify(e)+"\n"})).join(""))),[2,this._nextPolicy.sendRequest(e)]}))}))},t}(Z),lr=URL,pr=new WeakMap,dr=new WeakMap,hr=function(){function e(){this.onabort=null,pr.set(this,[]),dr.set(this,!1)}return Object.defineProperty(e.prototype,"aborted",{get:function(){if(!dr.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");return dr.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e,"none",{get:function(){return new e},enumerable:!1,configurable:!0}),e.prototype.addEventListener=function(e,t){if(!pr.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");pr.get(this).push(t)},e.prototype.removeEventListener=function(e,t){if(!pr.has(this))throw new TypeError("Expected `this` to be an instance of AbortSignal.");var r=pr.get(this),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.dispatchEvent=function(e){throw new Error("This is a stub dispatchEvent implementation that should not be used.  It only exists for type-checking purposes.")},e}();function fr(e){if(!e.aborted){e.onabort&&e.onabort.call(e);var t=pr.get(e);t&&t.slice().forEach((function(t){t.call(e,{type:"abort"})})),dr.set(e,!0)}}var yr,gr=function(e){function t(t){var r=e.call(this,t)||this;return r.name="AbortError",r}return i(t,e),t}(Error),mr=(function(){function e(e){var t=this;if(this._signal=new hr,e){Array.isArray(e)||(e=arguments);for(var r=0,n=e;r<n.length;r++){var o=n[r];o.aborted?this.abort():o.addEventListener("abort",(function(){t.abort()}))}}}Object.defineProperty(e.prototype,"signal",{get:function(){return this._signal},enumerable:!1,configurable:!0}),e.prototype.abort=function(){fr(this._signal)},e.timeout=function(e){var t=new hr,r=setTimeout(fr,e,t);return"function"==typeof r.unref&&r.unref(),t}}(),function(){function e(){}return e.prototype.sendRequest=function(e){var t,r=new XMLHttpRequest;if(e.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");var n=e.abortSignal;if(n){if(n.aborted)return Promise.reject(new gr("The operation was aborted."));var o=function(){r.abort()};n.addEventListener("abort",o),r.addEventListener("readystatechange",(function(){r.readyState===XMLHttpRequest.DONE&&n.removeEventListener("abort",o)}))}if(vr(r.upload,e.onUploadProgress),vr(r,e.onDownloadProgress),e.formData){for(var i=e.formData,a=new FormData,s=function(e,t){t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"options")?a.append(e,t.value,t.options):a.append(e,t)},c=0,u=Object.keys(i);c<u.length;c++){var l=u[c],p=i[l];if(Array.isArray(p))for(var d=0;d<p.length;d++)s(l,p[d]);else s(l,p)}e.body=a,e.formData=void 0;var h=e.headers.get("Content-Type");h&&-1!==h.indexOf("multipart/form-data")&&e.headers.remove("Content-Type")}r.open(e.method,e.url),r.timeout=e.timeout,r.withCredentials=e.withCredentials;for(var f=0,y=e.headers.headersArray();f<y.length;f++){var g=y[f];r.setRequestHeader(g.name,g.value)}return r.responseType=(null===(t=e.streamResponseStatusCodes)||void 0===t?void 0:t.size)||e.streamResponseBody?"blob":"text",r.send(void 0===e.body?null:e.body),"blob"===r.responseType?new Promise((function(t,n){!function(e,t,r,n){e.addEventListener("readystatechange",(function(){var o;if(e.readyState===XMLHttpRequest.HEADERS_RECEIVED)if(t.streamResponseBody||(null===(o=t.streamResponseStatusCodes)||void 0===o?void 0:o.has(e.status))){var i=new Promise((function(r,n){e.addEventListener("load",(function(){r(e.response)})),wr(t,e,n)}));r({request:t,status:e.status,headers:br(e),blobBody:i})}else e.addEventListener("load",(function(){if(e.response){var o=new FileReader;o.onload=function(n){var o,i=null===(o=n.target)||void 0===o?void 0:o.result;r({request:t,status:e.status,headers:br(e),bodyAsText:i})},o.onerror=function(e){n(o.error)},o.readAsText(e.response,"UTF-8")}else r({request:t,status:e.status,headers:br(e)})}))}))}(r,e,t,n),wr(e,r,n)})):new Promise((function(t,n){r.addEventListener("load",(function(){return t({request:e,status:r.status,headers:br(r),bodyAsText:r.responseText})})),wr(e,r,n)}))},e}());function vr(e,t){t&&e.addEventListener("progress",(function(e){return t({loadedBytes:e.loaded})}))}function br(e){for(var t=new bt,r=0,n=e.getAllResponseHeaders().trim().split(/[\r\n]+/);r<n.length;r++){var o=n[r],i=o.indexOf(":"),a=o.slice(0,i),s=o.slice(i+2);t.set(a,s)}return t}function wr(e,t,r){t.addEventListener("error",(function(){return r(new Ge("Failed to send request to "+e.url,Ge.REQUEST_SEND_ERROR,void 0,e))}));var n=new gr("The operation was aborted.");t.addEventListener("abort",(function(){return r(n)})),t.addEventListener("timeout",(function(){return r(n)}))}var Sr=function(){function e(e,t){var r,n,o,a,l,p;if(t||(t={}),this._withCredentials=t.withCredentials||!1,this._httpClient=t.httpClient||(yr||(yr=new mr),yr),this._requestPolicyOptions=new ee(t.httpPipelineLogger),Array.isArray(t.requestPolicyFactories))Te.info("ServiceClient: using custom request policies"),r=t.requestPolicyFactories;else{var d=void 0;if((p=e)&&"function"==typeof p.getToken&&(void 0===p.signRequest||p.getToken.length>0))Te.info("ServiceClient: creating bearer token authentication policy from provided credentials"),o=void 0,a=this,l=t,d={create:function(t,r){var n,p,d=function(e,t){if(null==e?void 0:e.credentialScopes){var r=e.credentialScopes;return Array.isArray(r)?r.map((function(e){return new lr(e).toString()})):new lr(r).toString()}if(t)return t+"/.default"}(l,a.baseUri);if(!d)throw new Error("When using credential, the ServiceClient must contain a baseUri or a credentialScopes in ServiceClientOptions. Unable to create a bearerTokenAuthenticationPolicy");return null==o&&(n=function(e,t,r){var n=this,o=null,i=null,a=s(s({},jt),r),l={get isRefreshing(){return null!==o},get shouldRefresh(){var e;return!l.isRefreshing&&(null!==(e=null==i?void 0:i.expiresOnTimestamp)&&void 0!==e?e:0)-a.refreshWindowInMs<Date.now()},get mustRefresh(){return null===i||i.expiresOnTimestamp-a.forcedRefreshWindowInMs<Date.now()}};function p(r){var n;return l.isRefreshing||(o=function(e,t,r){return c(this,void 0,void 0,(function(){function n(){return c(this,void 0,void 0,(function(){var t;return u(this,(function(n){switch(n.label){case 0:if(!(Date.now()<r))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e()];case 2:return[2,n.sent()];case 3:return n.sent(),[2,null];case 4:return[3,7];case 5:return[4,e()];case 6:if(null===(t=n.sent()))throw new Error("Failed to refresh access token.");return[2,t];case 7:return[2]}}))}))}var o;return u(this,(function(e){switch(e.label){case 0:return[4,n()];case 1:o=e.sent(),e.label=2;case 2:return null!==o?[3,5]:[4,P(t)];case 3:return e.sent(),[4,n()];case 4:return o=e.sent(),[3,2];case 5:return[2,o]}}))}))}((function(){return e.getToken(t,r)}),a.retryIntervalInMs,null!==(n=null==i?void 0:i.expiresOnTimestamp)&&void 0!==n?n:Date.now()).then((function(e){return o=null,i=e})).catch((function(e){throw o=null,i=null,e}))),o}return function(e){return c(n,void 0,void 0,(function(){return u(this,(function(t){return l.mustRefresh?[2,p(e)]:(l.shouldRefresh&&p(e),[2,i])}))}))}}(e,d),p=function(e){function t(t,r){return e.call(this,t,r)||this}return i(t,e),t.prototype.sendRequest=function(e){return c(this,void 0,void 0,(function(){var t;return u(this,(function(r){switch(r.label){case 0:return[4,n({abortSignal:e.abortSignal,tracingOptions:{spanOptions:e.spanOptions,tracingContext:e.tracingContext}})];case 1:return t=r.sent().token,e.headers.set(wt,"Bearer "+t),[2,this._nextPolicy.sendRequest(e)]}}))}))},t}(Z),o={create:function(e,t){return new p(e,t)}}),o.create(t,r)}};else if(e&&"function"==typeof e.signRequest)Te.info("ServiceClient: creating signing policy from provided credentials"),n=e,d={create:function(e,t){return new Wt(e,t,n)}};else if(null!=e)throw new Error("The credentials argument must implement the TokenCredential interface");if(Te.info("ServiceClient: using default request policies"),r=function(e,t){var r=[];t.generateClientRequestIdHeader&&r.push(yt(t.clientRequestIdHeaderName)),e&&r.push(e);var n,o=Er(t.userAgentHeaderName,Et),i=Er(t.userAgent,Tt);return o&&i&&r.push(It({key:o,value:i})),r.push(Pt()),r.push((void 0===(n=t.rpRegistrationRetryTimeout)&&(n=30),{create:function(e,t){return new Nt(e,t,n)}})),t.noRetryPolicy||(r.push(pt()),r.push(Mt()),r.push(Vt())),r.push(et(t.deserializationContentTypes)),C&&r.push(zt(t.proxySettings)),r.push(Le({logger:Te.info})),r}(d,t),t.requestPolicyFactories){var h=t.requestPolicyFactories(r);h&&(r=h)}}this._requestPolicyFactories=r}return e.prototype.sendRequest=function(e){if(null==e||"object"!=typeof e)throw new Error("options cannot be null or undefined and it must be of type object.");var t;try{!function(e){if(e&&"object"==typeof e){var t=e;if("string"==typeof t.url&&"string"==typeof t.method&&"object"==typeof t.headers&&vt(t.headers)&&"function"==typeof t.validateRequestProperties&&"function"==typeof t.prepare&&"function"==typeof t.clone)return!0}return!1}(e)?t=(t=new Ut).prepare(e):(e.validateRequestProperties(),t=e)}catch(e){return Promise.reject(e)}var r=this._httpClient;if(this._requestPolicyFactories&&this._requestPolicyFactories.length>0)for(var n=this._requestPolicyFactories.length-1;n>=0;--n)r=this._requestPolicyFactories[n].create(r,this._requestPolicyOptions);return r.sendRequest(t)},e.prototype.sendOperationRequest=function(e,t,r){var n;return c(this,void 0,void 0,(function(){var o,i,a,s,c,l,p,d,h,f,y,g,m,v,b,w,S,E,O,C,A,P,R,_,N,k,x,j,M,q,D;return u(this,(function(u){switch(u.label){case 0:"function"==typeof e.options&&(r=e.options,e.options=void 0),o=null===(n=e.options)||void 0===n?void 0:n.serializerOptions,i=new Ut,u.label=1;case 1:if(u.trys.push([1,6,,7]),!(s=t.baseUrl||this.baseUri))throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a baseUri string property that contains the base URL to use.");if(i.method=t.httpMethod,i.operationSpec=t,c=Oe.parse(s),t.path&&c.appendPath(t.path),t.urlParameters&&t.urlParameters.length>0)for(l=0,p=t.urlParameters;l<p.length;l++)d=p[l],h=Tr(this,e,d,t.serializer),h=t.serializer.serialize(d.mapper,h,He(d),o),d.skipEncoding||(h=encodeURIComponent(h)),c.replaceAll("{"+(d.mapper.serializedName||He(d))+"}",h);if(t.queryParameters&&t.queryParameters.length>0)for(f=0,y=t.queryParameters;f<y.length;f++)if(g=y[f],null!=(m=Tr(this,e,g,t.serializer))){if(m=t.serializer.serialize(g.mapper,m,He(g),o),void 0!==g.collectionFormat&&null!==g.collectionFormat)if(g.collectionFormat===qt.Multi){if(0===m.length)continue;for(b in m)v=m[b],m[b]=null==v?"":v.toString()}else g.collectionFormat!==qt.Ssv&&g.collectionFormat!==qt.Tsv||(m=m.join(g.collectionFormat));if(!g.skipEncoding)if(Array.isArray(m))for(b in m)void 0!==m[b]&&null!==m[b]&&(m[b]=encodeURIComponent(m[b]));else m=encodeURIComponent(m);void 0!==g.collectionFormat&&null!==g.collectionFormat&&g.collectionFormat!==qt.Multi&&g.collectionFormat!==qt.Ssv&&g.collectionFormat!==qt.Tsv&&(m=m.join(g.collectionFormat)),c.setQueryParameter(g.mapper.serializedName||He(g),m)}if(i.url=c.toString(),(w=t.contentType||this.requestContentType)&&t.requestBody&&i.headers.set("Content-Type",w),t.headerParameters)for(S=0,E=t.headerParameters;S<E.length;S++)if(O=E[S],null!=(C=Tr(this,e,O,t.serializer)))if(C=t.serializer.serialize(O.mapper,C,He(O),o),A=O.mapper.headerCollectionPrefix)for(P=0,R=Object.keys(C);P<R.length;P++)_=R[P],i.headers.set(A+_,C[_]);else i.headers.set(O.mapper.serializedName||He(O),C);if(N=e.options){if(N.customHeaders)for(k in N.customHeaders)i.headers.set(k,N.customHeaders[k]);N.abortSignal&&(i.abortSignal=N.abortSignal),N.timeout&&(i.timeout=N.timeout),N.onUploadProgress&&(i.onUploadProgress=N.onUploadProgress),N.onDownloadProgress&&(i.onDownloadProgress=N.onDownloadProgress),N.spanOptions&&(i.spanOptions=N.spanOptions),N.tracingContext&&(i.tracingContext=N.tracingContext),void 0!==N.shouldDeserialize&&null!==N.shouldDeserialize&&(i.shouldDeserialize=N.shouldDeserialize)}i.withCredentials=this._withCredentials,function(e,t,r,n){var o,i,a,s,c,u,l=null!==(i=null===(o=r.options)||void 0===o?void 0:o.serializerOptions)&&void 0!==i?i:{},p={rootName:null!==(a=l.rootName)&&void 0!==a?a:"",includeRoot:null!==(s=l.includeRoot)&&void 0!==s&&s,xmlCharKey:null!==(c=l.xmlCharKey)&&void 0!==c?c:I},d=l.xmlCharKey;if(n.requestBody&&n.requestBody.mapper){t.body=Tr(e,r,n.requestBody,n.serializer);var h=n.requestBody.mapper,f=h.required,y=h.xmlName,g=h.xmlElementName,m=h.serializedName,v=h.xmlNamespace,b=h.xmlNamespacePrefix,w=h.type.name;try{if(void 0!==t.body&&null!==t.body||f){var S=He(n.requestBody);t.body=n.serializer.serialize(h,t.body,S,p);var E=w===H.Stream;if(n.isXML){var O=b?"xmlns:"+b:"xmlns",C=function(e,t,r,n,o){var i;if(e&&!["Composite","Sequence","Dictionary"].includes(r)){var a={};return a[o.xmlCharKey]=n,a[T]=((i={})[t]=e,i),a}return n}(v,O,w,t.body,p);w===H.Sequence?t.body=Xe(function(e,t,r,n){var o,i,a;if(Array.isArray(e)||(e=[e]),!r||!n)return(o={})[t]=e,o;var s=((i={})[t]=e,i);return s[T]=((a={})[r]=n,a),s}(C,g||y||m,O,v),{rootName:y||m,xmlCharKey:d}):E||(t.body=Xe(C,{rootName:y||m,xmlCharKey:d}))}else{if(w===H.String&&((null===(u=n.contentType)||void 0===u?void 0:u.match("text/plain"))||"text"===n.mediaType))return;E||(t.body=JSON.stringify(t.body))}}}catch(e){throw new Error('Error "'+e.message+'" occurred in serializing the payload - '+JSON.stringify(m,void 0,"  ")+".")}}else if(n.formDataParameters&&n.formDataParameters.length>0){t.formData={};for(var A=0,P=n.formDataParameters;A<P.length;A++){var R=P[A],_=Tr(e,r,R,n.serializer);if(null!=_){var N=R.mapper.serializedName||He(R);t.formData[N]=n.serializer.serialize(R.mapper,_,He(R),p)}}}}(this,i,e,t),void 0===i.streamResponseStatusCodes&&(i.streamResponseStatusCodes=function(e){var t=new Set;for(var r in e.responses){var n=e.responses[r];n.bodyMapper&&n.bodyMapper.type.name===H.Stream&&t.add(Number(r))}return t}(t)),x=void 0,j=void 0,u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.sendRequest(i)];case 3:return x=u.sent(),[3,5];case 4:return M=u.sent(),j=M,[3,5];case 5:return j?(j.response&&(j.details=Cr(j.response,t.responses[j.statusCode]||t.responses.default)),a=Promise.reject(j)):a=Promise.resolve(Cr(x,t.responses[x.status])),[3,7];case 6:return q=u.sent(),a=Promise.reject(q),[3,7];case 7:return(D=r)&&a.then((function(e){return D(null,e._response.parsedBody,e._response.request,e._response)})).catch((function(e){return D(e)})),[2,a]}}))}))},e}();function Er(e,t){var r;return"string"==typeof e?r=e:(r=t(),"function"==typeof e&&(r=e(r))),r}function Tr(e,t,r,n){return Ir(e,t,r.parameterPath,r.mapper,n)}function Ir(e,t,r,n,o){var i,a;"string"==typeof r&&(r=[r]);var s=null===(i=t.options)||void 0===i?void 0:i.serializerOptions;if(Array.isArray(r)){if(r.length>0){if(n.isConstant)a=n.defaultValue;else{var c=Or(t,r);c.propertyFound||(c=Or(e,r));var u=!1;c.propertyFound||(u=n.required||"options"===r[0]&&2===r.length),a=u?n.defaultValue:c.propertyValue}var l=ze(r,n);o.serialize(n,a,l,s)}}else for(var p in n.required&&(a={}),r){var d=n.type.modelProperties[p],h=r[p],f=Ir(e,t,h,d,o),y=ze(h,d);o.serialize(d,f,y,s),null!=f&&(a||(a={}),a[p]=f)}return a}function Or(e,t){for(var r={propertyFound:!1},n=0;n<t.length;++n){var o=t[n];if(null==e||!(o in e))break;e=e[o]}return n===t.length&&(r.propertyValue=e,r.propertyFound=!0),r}function Cr(e,t){var r,n=e.parsedHeaders,o=t&&t.bodyMapper,i=function(t){return Object.defineProperty(t,"_response",{value:e})};if(o){var a=o.type.name;if("Stream"===a)return i(s(s({},n),{blobBody:e.blobBody,readableStreamBody:e.readableStreamBody}));var c="Composite"===a&&o.type.modelProperties||{},u=Object.keys(c).some((function(e){return""===c[e].serializedName}));if("Sequence"===a||u){for(var l=function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}([],e.parsedBody||[]),p=0,d=Object.keys(c);p<d.length;p++){var h=d[p];c[h].serializedName&&(l[h]=e.parsedBody[h])}if(n)for(var f=0,y=Object.keys(n);f<y.length;f++)l[h=y[f]]=n[h];return i(l),l}if("Composite"===a||"Dictionary"===a)return i(s(s({},n),e.parsedBody))}return o||"HEAD"===e.request.method||"object"!=typeof(r=e.parsedBody)&&"function"!=typeof r||null===r?i(s(s({},n),{body:e.parsedBody})):i(s(s({},n),e.parsedBody))}class Ar extends Sr{constructor(e,t,r){if(void 0===e)throw new Error("'credentials' cannot be null");if(void 0===t)throw new Error("'apiVersion' cannot be null");if(r||(r={}),!r.userAgent){const e=Tt();r.userAgent=`monitor-metrics/1.0.0 ${e}`}super(e,r),this.requestContentType="application/json; charset=utf-8",this.baseUri=r.endpoint||"https://management.azure.com",this.apiVersion=t,this.$host=r.$host||"https://management.azure.com"}}class Pr extends Ar{constructor(e,t,r){super(e,t,r),this.metrics=new $(this)}}const Rr={type:{name:"Composite",className:"MetricDefinitionCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricDefinition"}}}}}}},_r={type:{name:"Composite",className:"MetricDefinition",modelProperties:{isDimensionRequired:{serializedName:"isDimensionRequired",type:{name:"Boolean"}},resourceId:{serializedName:"resourceId",type:{name:"String"}},namespace:{serializedName:"namespace",type:{name:"String"}},name:{serializedName:"name",type:{name:"Composite",className:"LocalizableString"}},unit:{serializedName:"unit",type:{name:"Enum",allowedValues:["Count","Bytes","Seconds","CountPerSecond","BytesPerSecond","Percent","MilliSeconds","ByteSeconds","Unspecified","Cores","MilliCores","NanoCores","BitsPerSecond"]}},primaryAggregationType:{serializedName:"primaryAggregationType",type:{name:"Enum",allowedValues:["None","Average","Count","Minimum","Maximum","Total"]}},supportedAggregationTypes:{serializedName:"supportedAggregationTypes",type:{name:"Sequence",element:{type:{name:"Enum",allowedValues:["None","Average","Count","Minimum","Maximum","Total"]}}}},metricAvailabilities:{serializedName:"metricAvailabilities",type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricAvailability"}}}},id:{serializedName:"id",type:{name:"String"}},dimensions:{serializedName:"dimensions",type:{name:"Sequence",element:{type:{name:"Composite",className:"LocalizableString"}}}}}}},Nr={type:{name:"Composite",className:"LocalizableString",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}},localizedValue:{serializedName:"localizedValue",type:{name:"String"}}}}},kr={type:{name:"Composite",className:"MetricAvailability",modelProperties:{timeGrain:{serializedName:"timeGrain",type:{name:"TimeSpan"}},retention:{serializedName:"retention",type:{name:"TimeSpan"}}}}},xr={type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}};class jr{constructor(e){this.client=e}list(e,t){const r={resourceUri:e,options:h(t||{})};return this.client.sendOperationRequest(r,qr)}}const Mr=new N(t,!1),qr={path:"/{resourceUri}/providers/microsoft.insights/metricDefinitions",httpMethod:"GET",responses:{200:{bodyMapper:Rr},default:{bodyMapper:xr}},queryParameters:[{parameterPath:"apiVersion",mapper:{serializedName:"api-version",required:!0,type:{name:"String"}}},{parameterPath:["options","metricnamespace"],mapper:{serializedName:"metricnamespace",type:{name:"String"}}}],urlParameters:[{parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},{parameterPath:"resourceUri",mapper:{serializedName:"resourceUri",required:!0,type:{name:"String"}},skipEncoding:!0}],headerParameters:[{parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}}],serializer:Mr};class Dr extends Sr{constructor(e,t,r){if(void 0===e)throw new Error("'credentials' cannot be null");if(void 0===t)throw new Error("'apiVersion' cannot be null");if(r||(r={}),!r.userAgent){const e=Tt();r.userAgent=`monitor-metrics-definitions/1.0.0 ${e}`}super(e,r),this.requestContentType="application/json; charset=utf-8",this.baseUri=r.endpoint||"https://management.azure.com",this.apiVersion=t,this.$host=r.$host||"https://management.azure.com"}}class Lr extends Dr{constructor(e,t,r){super(e,t,r),this.metricDefinitions=new jr(this)}}const Ur={type:{name:"Composite",className:"MetricNamespaceCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"MetricNamespace"}}}}}}},Hr={type:{name:"Composite",className:"MetricNamespace",modelProperties:{id:{serializedName:"id",type:{name:"String"}},type:{serializedName:"type",type:{name:"String"}},name:{serializedName:"name",type:{name:"String"}},properties:{serializedName:"properties",type:{name:"Composite",className:"MetricNamespaceName"}}}}},zr={type:{name:"Composite",className:"MetricNamespaceName",modelProperties:{metricNamespaceName:{serializedName:"metricNamespaceName",type:{name:"String"}}}}},Fr={type:{name:"Composite",className:"ErrorResponse",modelProperties:{code:{serializedName:"code",type:{name:"String"}},message:{serializedName:"message",type:{name:"String"}}}}};class Vr{constructor(e){this.client=e}list(e,t){const r={resourceUri:e,options:h(t||{})};return this.client.sendOperationRequest(r,Gr)}}const Br=new N(n,!1),Gr={path:"/{resourceUri}/providers/microsoft.insights/metricNamespaces",httpMethod:"GET",responses:{200:{bodyMapper:Ur},default:{bodyMapper:Fr}},queryParameters:[{parameterPath:"apiVersion",mapper:{serializedName:"api-version",required:!0,type:{name:"String"}}},{parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"String"}}}],urlParameters:[{parameterPath:"$host",mapper:{serializedName:"$host",required:!0,type:{name:"String"}},skipEncoding:!0},{parameterPath:"resourceUri",mapper:{serializedName:"resourceUri",required:!0,type:{name:"String"}},skipEncoding:!0}],headerParameters:[{parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}}],serializer:Br};class Kr extends Sr{constructor(e,t,r){if(void 0===e)throw new Error("'credentials' cannot be null");if(void 0===t)throw new Error("'apiVersion' cannot be null");if(r||(r={}),!r.userAgent){const e=Tt();r.userAgent=`monitor-metrics-namespaces/1.0.0 ${e}`}super(e,r),this.requestContentType="application/json; charset=utf-8",this.baseUri=r.endpoint||"https://management.azure.com",this.apiVersion=t,this.$host=r.$host||"https://management.azure.com"}}class Wr extends Kr{constructor(e,t,r){super(e,t,r),this.metricNamespaces=new Vr(this)}}class $r{constructor(e){this._metricsClient=new Pr(e,"2018-01-01",{}),this._definitionsClient=new Lr(e,"2018-01-01",{}),this._namespacesClient=new Wr(e,"2017-12-01-preview",{})}queryMetrics(e,t){return this._metricsClient.metrics.list(e,t)}getMetricDefinitions(e,t){return this._definitionsClient.metricDefinitions.list(e,t)}getMetricNamespaces(e,t){return this._namespacesClient.metricNamespaces.list(e,t)}}var Qr=function(e,t){return(Qr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function Jr(e,t){function r(){this.constructor=e}Qr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var Xr=function(){return(Xr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Yr(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{c(n.next(e))}catch(e){i(e)}}function s(e){try{c(n.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}c((n=n.apply(e,t||[])).next())}))}function Zr(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var en,tn=function(){function e(){}return e.createNewGuid=function(){var t=window.crypto;if(t&&t.getRandomValues){var r=new Uint8Array(16);return t.getRandomValues(r),r[6]|=64,r[6]&=79,r[8]|=128,r[8]&=191,e.decimalToHex(r[0])+e.decimalToHex(r[1])+e.decimalToHex(r[2])+e.decimalToHex(r[3])+"-"+e.decimalToHex(r[4])+e.decimalToHex(r[5])+"-"+e.decimalToHex(r[6])+e.decimalToHex(r[7])+"-"+e.decimalToHex(r[8])+e.decimalToHex(r[9])+"-"+e.decimalToHex(r[10])+e.decimalToHex(r[11])+e.decimalToHex(r[12])+e.decimalToHex(r[13])+e.decimalToHex(r[14])+e.decimalToHex(r[15])}for(var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx",o="0123456789abcdef",i=0,a="",s=0;s<36;s++)"-"!==n[s]&&"4"!==n[s]&&(i=16*Math.random()|0),"x"===n[s]?a+=o[i]:"y"===n[s]?(i&=3,a+=o[i|=8]):a+=n[s];return a},e.isGuid=function(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e.decimalToHex=function(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t},e.base64Encode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))},e.base64Decode=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Invalid base64 string")}return decodeURIComponent(atob(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))},e.deserialize=function(e){var t,r=/\+/g,n=/([^&=]+)=([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))},i={};for(t=n.exec(e);t;)i[o(t[1])]=o(t[2]),t=n.exec(e);return i},e}(),rn=function(){function e(){}return Object.defineProperty(e,"libraryName",{get:function(){return"Msal.js"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"claims",{get:function(){return"claims"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"clientId",{get:function(){return"clientId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"adalIdToken",{get:function(){return"adal.idtoken"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cachePrefix",{get:function(){return"msal"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"scopes",{get:function(){return"scopes"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"no_account",{get:function(){return"NO_ACCOUNT"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"upn",{get:function(){return"upn"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"domain_hint",{get:function(){return"domain_hint"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_select_account",{get:function(){return"&prompt=select_account"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt_none",{get:function(){return"&prompt=none"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"prompt",{get:function(){return"prompt"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"response_mode_fragment",{get:function(){return"&response_mode=fragment"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"resourceDelimiter",{get:function(){return"|"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"cacheDelimiter",{get:function(){return"."},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpWidth",{get:function(){return this._popUpWidth},set:function(e){this._popUpWidth=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"popUpHeight",{get:function(){return this._popUpHeight},set:function(e){this._popUpHeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"login",{get:function(){return"LOGIN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"renewToken",{get:function(){return"RENEW_TOKEN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"unknown",{get:function(){return"UNKNOWN"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ADFS",{get:function(){return"adfs"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"homeAccountIdentifier",{get:function(){return"homeAccountIdentifier"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"common",{get:function(){return"common"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"openidScope",{get:function(){return"openid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"profileScope",{get:function(){return"profile"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"oidcScopes",{get:function(){return[this.openidScope,this.profileScope]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypeRedirect",{get:function(){return"redirectInteraction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypePopup",{get:function(){return"popupInteraction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"interactionTypeSilent",{get:function(){return"silentInteraction"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"inProgress",{get:function(){return"inProgress"},enumerable:!0,configurable:!0}),e._popUpWidth=483,e._popUpHeight=600,e}();!function(e){e.SCOPE="scope",e.STATE="state",e.ERROR="error",e.ERROR_DESCRIPTION="error_description",e.ACCESS_TOKEN="access_token",e.ID_TOKEN="id_token",e.EXPIRES_IN="expires_in",e.SESSION_STATE="session_state",e.CLIENT_INFO="client_info"}(en||(en={}));var nn,on,an,sn="id_token",cn="token",un="id_token token";!function(e){e.AUTHORITY="authority",e.ACQUIRE_TOKEN_ACCOUNT="acquireTokenAccount",e.SESSION_STATE="session.state",e.STATE_LOGIN="state.login",e.STATE_ACQ_TOKEN="state.acquireToken",e.STATE_RENEW="state.renew",e.NONCE_IDTOKEN="nonce.idtoken",e.LOGIN_REQUEST="login.request",e.RENEW_STATUS="token.renew.status",e.URL_HASH="urlHash",e.INTERACTION_STATUS="interaction_status",e.REDIRECT_REQUEST="redirect_request"}(nn||(nn={})),function(e){e.IDTOKEN="idtoken",e.CLIENT_INFO="client.info"}(on||(on={})),function(e){e.LOGIN_ERROR="login.error",e.ERROR="error",e.ERROR_DESC="error.description"}(an||(an={}));var ln,pn=".well-known/openid-configuration";!function(e){e.ACCOUNT="account",e.SID="sid",e.LOGIN_HINT="login_hint",e.ORGANIZATIONS="organizations",e.CONSUMERS="consumers",e.ID_TOKEN="id_token",e.ACCOUNT_ID="accountIdentifier",e.HOMEACCOUNT_ID="homeAccountIdentifier"}(ln||(ln={}));var dn,hn=[ln.SID,ln.LOGIN_HINT],fn="GET",yn={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none"},gn="unexpected_error",mn="Unexpected error in authentication.",vn="no_window_object",bn="No window object available. Details:",wn=function(e){function t(r,n){var o=e.call(this,n)||this;return Object.setPrototypeOf(o,t.prototype),o.errorCode=r,o.errorMessage=n,o.name="AuthError",o}return Jr(t,e),t.createUnexpectedError=function(e){return new t(gn,mn+": "+e)},t.createNoWindowObjectError=function(e){return new t(vn,bn+" "+e)},t}(Error),Sn=function(){function e(){}return e.isEmpty=function(e){return void 0===e||!e||0===e.length},e.validateAndParseJsonCacheKey=function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t?t:null}catch(e){return null}},e}(),En="endpoints_resolution_error",Tn="Error: could not resolve endpoints. Please check network and try again.",In="popup_window_error",On="Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",Cn="token_renewal_error",An="Token renewal operation failed due to timeout.",Pn="invalid_id_token",Rn="Invalid ID token format.",_n="invalid_state_error",Nn="Invalid state.",kn="nonce_mismatch_error",xn="Nonce is not matching, Nonce received: ",jn="login_progress_error",Mn="Login_In_Progress: Error during login call - login is already in progress.",qn="acquiretoken_progress_error",Dn="AcquireToken_In_Progress: Error during login call - login is already in progress.",Ln="user_cancelled",Un="User cancelled the flow.",Hn="callback_error",zn="Error occurred in token received callback function.",Fn="user_login_error",Vn="User login is required. For silent calls, request must contain either sid or login_hint",Bn="user_non_existent",Gn="User object does not exist. Please call a login API.",Kn="client_info_decoding_error",Wn="The client info could not be parsed/decoded correctly. Please review the trace to determine the root cause.",$n="client_info_not_populated_error",Qn="The service did not populate client_info in the response, Please verify with the service team",Jn="null_or_empty_id_token",Xn="The idToken is null or empty. Please review the trace to determine the root cause.",Yn="id_token_parsing_error",Zn="ID token cannot be parsed. Please review stack trace to determine root cause.",eo="token_encoding_error",to="The token to be decoded is not encoded correctly.",ro="invalid_interaction_type",no="The interaction type passed to the handler was incorrect or unknown",oo="cannot_parse_cache",io="The cached token key is not a valid JSON and cannot be parsed",ao="block_token_requests",so="Token calls are blocked in hidden iframes",co=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientAuthError",Object.setPrototypeOf(o,t.prototype),o}return Jr(t,e),t.createEndpointResolutionError=function(e){var r=Tn;return e&&!Sn.isEmpty(e)&&(r+=" Details: "+e),new t(En,r)},t.createPopupWindowError=function(e){var r=On;return e&&!Sn.isEmpty(e)&&(r+=" Details: "+e),new t(In,r)},t.createTokenRenewalTimeoutError=function(){return new t(Cn,An)},t.createInvalidIdTokenError=function(e){return new t(Pn,Rn+" Given token: "+e)},t.createInvalidStateError=function(e,r){return new t(_n,Nn+" "+e+", state expected : "+r+".")},t.createNonceMismatchError=function(e,r){return new t(kn,xn+" "+e+", nonce expected : "+r+".")},t.createLoginInProgressError=function(){return new t(jn,Mn)},t.createAcquireTokenInProgressError=function(){return new t(qn,Dn)},t.createUserCancelledError=function(){return new t(Ln,Un)},t.createErrorInCallbackFunction=function(e){return new t(Hn,zn+" "+e+".")},t.createUserLoginRequiredError=function(){return new t(Fn,Vn)},t.createUserDoesNotExistError=function(){return new t(Bn,Gn)},t.createClientInfoDecodingError=function(e){return new t(Kn,Wn+" Failed with error: "+e)},t.createClientInfoNotPopulatedError=function(e){return new t($n,Qn+" Failed with error: "+e)},t.createIdTokenNullOrEmptyError=function(e){return new t(Jn,Xn+" Raw ID Token Value: "+e)},t.createIdTokenParsingError=function(e){return new t(Yn,Zn+" Failed with error: "+e)},t.createTokenEncodingError=function(e){return new t(eo,to+" Attempted to decode: "+e)},t.createInvalidInteractionTypeError=function(){return new t(ro,no)},t.createCacheParseError=function(e){return new t(oo,"invalid key: "+e+", "+io)},t.createBlockTokenRequestsInHiddenIframeError=function(){return new t(ao,so)},t}(wn),uo="no_config_set",lo="Configuration has not been set. Please call the UserAgentApplication constructor with a valid Configuration object.",po="storage_not_supported",ho="The value for the cacheLocation is not supported.",fo="no_redirect_callbacks",yo="No redirect callbacks have been set. Please call handleRedirectCallback() with the appropriate function arguments before continuing. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.",go="invalid_callback_object",mo="The object passed for the callback was invalid. More information is available here: https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL-basics.",vo="scopes_required",bo="Scopes are required to obtain an access token.",wo="empty_input_scopes_error",So="Scopes cannot be passed as empty array.",Eo="nonarray_input_scopes_error",To="Scopes cannot be passed as non-array.",Io="invalid_prompt_value",Oo="Supported prompt values are 'login', 'select_account', 'consent' and 'none'",Co={code:"invalid_authority_type",desc:"The given authority is not a valid type of authority supported by MSAL. Please see here for valid authorities: <insert URL here>."},Ao={code:"authority_uri_insecure",desc:"Authority URIs must use https."},Po={code:"authority_uri_invalid_path",desc:"Given authority URI is invalid."},Ro="untrusted_authority",_o="The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter or set validateAuthority=false.",No="b2c_known_authorities_not_set",ko="Must set known authorities when validateAuthority is set to True and using B2C",xo="claims_request_parsing_error",jo="Could not parse the given claims request object.",Mo={code:"empty_request_error",desc:"Request object is required."},qo="invalid_guid_sent_as_correlationId",Do="Please set the correlationId as a valid guid",Lo={code:"telemetry_config_error",desc:"Telemetry config is not configured with required values"},Uo="sso_silent_error",Ho="request must contain either sid or login_hint",zo="authority_metadata_error",Fo="Invalid authorityMetadata. Must be a JSON object containing authorization_endpoint, end_session_endpoint, and issuer fields.",Vo=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ClientConfigurationError",Object.setPrototypeOf(o,t.prototype),o}return Jr(t,e),t.createNoSetConfigurationError=function(){return new t(uo,""+lo)},t.createStorageNotSupportedError=function(e){return new t(po,ho+" Given location: "+e)},t.createRedirectCallbacksNotSetError=function(){return new t(fo,yo)},t.createInvalidCallbackObjectError=function(e){return new t(go,mo+" Given value for callback function: "+e)},t.createEmptyScopesArrayError=function(e){return new t(wo,So+" Given value: "+e+".")},t.createScopesNonArrayError=function(e){return new t(Eo,To+" Given value: "+e+".")},t.createScopesRequiredError=function(e){return new t(vo,bo+" Given value: "+e)},t.createInvalidPromptError=function(e){return new t(Io,Oo+" Given value: "+e)},t.createClaimsRequestParsingError=function(e){return new t(xo,jo+" Given value: "+e)},t.createEmptyRequestError=function(){return new t(Mo.code,Mo.desc)},t.createInvalidCorrelationIdError=function(){return new t(qo,Do)},t.createKnownAuthoritiesNotSetError=function(){return new t(No,ko)},t.createInvalidAuthorityTypeError=function(){return new t(Co.code,Co.desc)},t.createUntrustedAuthorityError=function(e){return new t(Ro,_o+" Provided Authority: "+e)},t.createTelemetryConfigError=function(e){var r={applicationName:"string",applicationVersion:"string",telemetryEmitter:"function"};return new t(Lo.code,Lo.desc+" mising values: "+Object.keys(r).reduce((function(t,n){return e[n]?t:t.concat([n+" ("+r[n]+")"])}),[]).join(","))},t.createSsoSilentError=function(){return new t(Uo,Ho)},t.createInvalidAuthorityMetadataError=function(){return new t(zo,Fo)},t}(co),Bo=function(){function e(){}return e.isIntersectingScopes=function(e,t){for(var r=this.trimAndConvertArrayToLowerCase(e.slice()),n=this.trimAndConvertArrayToLowerCase(t.slice()),o=0;o<n.length;o++)if(r.indexOf(n[o].toLowerCase())>-1)return!0;return!1},e.containsScope=function(e,t){var r=this.trimAndConvertArrayToLowerCase(e.slice());return this.trimAndConvertArrayToLowerCase(t.slice()).every((function(e){return r.indexOf(e.toString().toLowerCase())>=0}))},e.trimAndConvertToLowerCase=function(e){return e.trim().toLowerCase()},e.trimAndConvertArrayToLowerCase=function(e){var t=this;return e.map((function(e){return t.trimAndConvertToLowerCase(e)}))},e.trimScopes=function(e){return e.map((function(e){return e.trim()}))},e.removeElement=function(e,t){var r=this.trimAndConvertToLowerCase(t);return e.filter((function(e){return e!==r}))},e.parseScope=function(e){var t="";if(e)for(var r=0;r<e.length;++r)t+=r!==e.length-1?e[r]+" ":e[r];return t},e.validateInputScope=function(e,t){if(e){if(!Array.isArray(e))throw Vo.createScopesNonArrayError(e);if(e.length<1&&t)throw Vo.createEmptyScopesArrayError(e.toString())}else if(t)throw Vo.createScopesRequiredError(e)},e.getScopeFromState=function(e){if(e){var t=e.indexOf(rn.resourceDelimiter);if(t>-1&&t+1<e.length)return e.substring(t+1)}return""},e.appendScopes=function(e,t){if(e){var r=t?this.trimAndConvertArrayToLowerCase(t.slice()):null,n=this.trimAndConvertArrayToLowerCase(e.slice());return r?n.concat(r):n}return null},e.onlyContainsOidcScopes=function(e){var t=e.length,r=0;return e.indexOf(rn.openidScope)>-1&&(r+=1),e.indexOf(rn.profileScope)>-1&&(r+=1),t>0&&t===r},e.containsAnyOidcScopes=function(e){var t=e.indexOf(rn.openidScope)>-1,r=e.indexOf(rn.profileScope)>-1;return t||r},e.onlyContainsClientId=function(e,t){return!!e&&e.indexOf(t)>-1&&1===e.length},e.appendDefaultScopes=function(e){var t=e;return-1===t.indexOf(rn.openidScope)&&t.push(rn.openidScope),-1===t.indexOf(rn.profileScope)&&t.push(rn.profileScope),t},e.removeDefaultScopes=function(e){return e.filter((function(e){return e!==rn.openidScope&&e!==rn.profileScope}))},e.translateClientIdIfSingleScope=function(e,t){return this.onlyContainsClientId(e,t)?rn.oidcScopes:e},e}(),Go=function(){function e(){}return e.createNavigateUrl=function(e){var t=this.createNavigationUrlString(e),r=e.authorityInstance.AuthorizationEndpoint;return r.indexOf("?")<0?r+="?":r+="&",""+r+t.join("&")},e.createNavigationUrlString=function(e){var t=Bo.appendDefaultScopes(e.scopes),r=[];return r.push("response_type="+e.responseType),r.push("scope="+encodeURIComponent(Bo.parseScope(t))),r.push("client_id="+encodeURIComponent(e.clientId)),r.push("redirect_uri="+encodeURIComponent(e.redirectUri)),r.push("state="+encodeURIComponent(e.state)),r.push("nonce="+encodeURIComponent(e.nonce)),r.push("client_info=1"),r.push("x-client-SKU="+e.xClientSku),r.push("x-client-Ver="+e.xClientVer),e.promptValue&&r.push("prompt="+encodeURIComponent(e.promptValue)),e.claimsValue&&r.push("claims="+encodeURIComponent(e.claimsValue)),e.queryParameters&&r.push(e.queryParameters),e.extraQueryParameters&&r.push(e.extraQueryParameters),r.push("client-request-id="+encodeURIComponent(e.correlationId)),r},e.getCurrentUrl=function(){return window.location.href.split("?")[0].split("#")[0]},e.removeHashFromUrl=function(e){return e.split("#")[0]},e.replaceTenantPath=function(e,t){var r=e.toLowerCase(),n=this.GetUrlComponents(r),o=n.PathSegments;return!t||0===o.length||o[0]!==rn.common&&o[0]!==ln.ORGANIZATIONS&&o[0]!==ln.CONSUMERS||(o[0]=t),this.constructAuthorityUriFromObject(n,o)},e.constructAuthorityUriFromObject=function(e,t){return this.CanonicalizeUri(e.Protocol+"//"+e.HostNameAndPort+"/"+t.join("/"))},e.isCommonAuthority=function(e){var t=this.CanonicalizeUri(e),r=this.GetUrlComponents(t).PathSegments;return 0!==r.length&&r[0]===rn.common},e.isOrganizationsAuthority=function(e){var t=this.CanonicalizeUri(e),r=this.GetUrlComponents(t).PathSegments;return 0!==r.length&&r[0]===ln.ORGANIZATIONS},e.isConsumersAuthority=function(e){var t=this.CanonicalizeUri(e),r=this.GetUrlComponents(t).PathSegments;return 0!==r.length&&r[0]===ln.CONSUMERS},e.GetUrlComponents=function(e){if(!e)throw"Url required";var t=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),r=e.match(t);if(!r||r.length<6)throw"Valid url required";var n={Protocol:r[1],HostNameAndPort:r[4],AbsolutePath:r[5]},o=n.AbsolutePath.split("/");return o=o.filter((function(e){return e&&e.length>0})),n.PathSegments=o,r[6]&&(n.Search=r[6]),r[8]&&(n.Hash=r[8]),n},e.CanonicalizeUri=function(t){return t&&(t=t.toLowerCase()),t&&!e.endsWith(t,"/")&&(t+="/"),t},e.endsWith=function(e,t){return!(!e||!t)&&-1!==e.indexOf(t,e.length-t.length)},e.urlRemoveQueryStringParameter=function(e,t){if(Sn.isEmpty(e))return e;var r=new RegExp("(\\&"+t+"=)[^&]+");return e=e.replace(r,""),r=new RegExp("("+t+"=)[^&]+&"),e=e.replace(r,""),r=new RegExp("("+t+"=)[^&]+"),e.replace(r,"")},e.getHashFromUrl=function(e){var t=e.indexOf("#"),r=e.indexOf("#/");return r>-1?e.substring(r+2):t>-1?e.substring(t+1):e},e.urlContainsHash=function(t){var r=e.deserializeHash(t);return r.hasOwnProperty(en.ERROR_DESCRIPTION)||r.hasOwnProperty(en.ERROR)||r.hasOwnProperty(en.ACCESS_TOKEN)||r.hasOwnProperty(en.ID_TOKEN)},e.deserializeHash=function(t){var r=e.getHashFromUrl(t);return tn.deserialize(r)},e.getHostFromUri=function(e){var t=String(e).replace(/^(https?:)\/\//,"");return t.split("/")[0]},e}(),Ko=function(e,t,r,n,o){this.authority=Go.CanonicalizeUri(e),this.clientId=t,this.scopes=r,this.homeAccountIdentifier=tn.base64Encode(n)+"."+tn.base64Encode(o)},Wo=function(e,t,r,n){this.accessToken=e,this.idToken=t,this.expiresIn=r,this.homeAccountIdentifier=n},$o="1.4.10",Qo=function(){function e(e,t,r,n,o,i,a){this.authorityInstance=e,this.clientId=t,this.nonce=tn.createNewGuid(),this.scopes=o?o.slice():rn.oidcScopes,this.scopes=Bo.trimScopes(this.scopes),this.state=i,this.correlationId=a,this.xClientSku="MSAL.JS",this.xClientVer=$o,this.responseType=r,this.redirectUri=n}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance?this.authorityInstance.CanonicalAuthority:null},enumerable:!0,configurable:!0}),e.prototype.populateQueryParams=function(t,r,n,o){var i={};r&&(r.prompt&&(this.promptValue=r.prompt),r.claimsRequest&&(this.claimsValue=r.claimsRequest),e.isSSOParam(r)&&(i=this.constructUnifiedCacheQueryParameter(r,null))),n&&(i=this.constructUnifiedCacheQueryParameter(null,n)),i=this.addHintParameters(t,i);var a=r?r.extraQueryParameters:null;this.queryParameters=e.generateQueryParametersString(i),this.extraQueryParameters=e.generateQueryParametersString(a,o)},e.prototype.constructUnifiedCacheQueryParameter=function(e,t){var r,n;if(e)if(e.account){var o=e.account;o.sid?(r=ln.SID,n=o.sid):o.userName&&(r=ln.LOGIN_HINT,n=o.userName)}else e.sid?(r=ln.SID,n=e.sid):e.loginHint&&(r=ln.LOGIN_HINT,n=e.loginHint);else t&&t.hasOwnProperty(rn.upn)&&(r=ln.ID_TOKEN,n=t.upn);return this.addSSOParameter(r,n)},e.prototype.addHintParameters=function(e,t){return e&&!t[ln.SID]&&(!t[ln.LOGIN_HINT]&&e.sid&&this.promptValue===yn.NONE?t=this.addSSOParameter(ln.SID,e.sid,t):!t[ln.LOGIN_HINT]&&e.userName&&!Sn.isEmpty(e.userName)&&(t=this.addSSOParameter(ln.LOGIN_HINT,e.userName,t))),t},e.prototype.addSSOParameter=function(e,t,r){if(r||(r={}),!t)return r;switch(e){case ln.SID:r[ln.SID]=t;break;case ln.ID_TOKEN:case ln.LOGIN_HINT:r[ln.LOGIN_HINT]=t}return r},e.generateQueryParametersString=function(e,t){var r=null;return e&&Object.keys(e).forEach((function(n){n===rn.domain_hint&&(t||e[ln.SID])||(r?r+="&"+n+"="+encodeURIComponent(e[n]):r=n+"="+encodeURIComponent(e[n]))})),r},e.isSSOParam=function(e){return!(!e||!(e.account||e.sid||e.loginHint))},e.determineResponseType=function(e,t){return Bo.onlyContainsOidcScopes(t)?sn:e?this.responseTypeForMatchingAccounts(t):un},e.responseTypeForMatchingAccounts=function(e){return Bo.containsAnyOidcScopes(e)?un:cn},e}(),Jo=function(){function e(){}return e.prototype.sendRequestAsync=function(e,t,r){var n=this;return new Promise((function(r,o){var i=new XMLHttpRequest;if(i.open(t,e,!0),i.onload=function(){var e;(i.status<200||i.status>=300)&&o(n.handleError(i.responseText));try{e=JSON.parse(i.responseText)}catch(e){o(n.handleError(i.responseText))}var t={statusCode:i.status,body:e};r(t)},i.onerror=function(){o(i.status)},t!==fn)throw"not implemented";i.send()}))},e.prototype.handleError=function(e){var t;try{if((t=JSON.parse(e)).error)return t.error;throw e}catch(t){return e}},e}(),Xo=function(){function e(){}return e.setTrustedAuthoritiesFromConfig=function(t,r){t&&!this.getTrustedHostList().length&&r.forEach((function(t){e.TrustedHostList.push(t.toLowerCase())}))},e.getAliases=function(e,t,r){return Yr(this,void 0,void 0,(function(){var n,o,i;return Zr(this,(function(a){return n=new Jo,fn,o="https://login.microsoftonline.com/common//discovery/instance?api-version=1.1&authorization_endpoint="+e+"oauth2/v2.0/authorize",i=t.createAndStartHttpEvent(r,"GET",o,"getAliases"),[2,n.sendRequestAsync(o,"GET",!0).then((function(e){return i.httpResponseStatus=e.statusCode,t.stopEvent(i),e.body.metadata})).catch((function(e){throw i.serverErrorCode=e,t.stopEvent(i),e}))]}))}))},e.setTrustedAuthoritiesFromNetwork=function(t,r,n){return Yr(this,void 0,void 0,(function(){var o;return Zr(this,(function(i){switch(i.label){case 0:return[4,this.getAliases(t,r,n)];case 1:return i.sent().forEach((function(t){t.aliases.forEach((function(t){e.TrustedHostList.push(t.toLowerCase())}))})),o=Go.GetUrlComponents(t).HostNameAndPort,e.getTrustedHostList().length&&!e.IsInTrustedHostList(o)&&e.TrustedHostList.push(o.toLowerCase()),[2]}}))}))},e.getTrustedHostList=function(){return this.TrustedHostList},e.IsInTrustedHostList=function(e){return this.TrustedHostList.indexOf(e.toLowerCase())>-1},e.TrustedHostList=[],e}();!function(e){e[e.Default=0]="Default",e[e.Adfs=1]="Adfs"}(dn||(dn={}));var Yo,Zo=function(){function e(e,t,r){this.IsValidationEnabled=t,this.CanonicalAuthority=e,this.validateAsUri(),this.tenantDiscoveryResponse=r}return e.isAdfs=function(e){var t=Go.GetUrlComponents(e).PathSegments;return t.length&&t[0].toLowerCase()===rn.ADFS},Object.defineProperty(e.prototype,"AuthorityType",{get:function(){return e.isAdfs(this.canonicalAuthority)?dn.Adfs:dn.Default},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"Tenant",{get:function(){return this.CanonicalAuthorityUrlComponents.PathSegments[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"AuthorizationEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.AuthorizationEndpoint.replace(/{tenant}|{tenantid}/g,this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"EndSessionEndpoint",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.EndSessionEndpoint.replace(/{tenant}|{tenantid}/g,this.Tenant)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"SelfSignedJwtAudience",{get:function(){return this.validateResolved(),this.tenantDiscoveryResponse.Issuer.replace(/{tenant}|{tenantid}/g,this.Tenant)},enumerable:!0,configurable:!0}),e.prototype.validateResolved=function(){if(!this.hasCachedMetadata())throw"Please call ResolveEndpointsAsync first"},Object.defineProperty(e.prototype,"CanonicalAuthority",{get:function(){return this.canonicalAuthority},set:function(e){this.canonicalAuthority=Go.CanonicalizeUri(e),this.canonicalAuthorityUrlComponents=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"CanonicalAuthorityUrlComponents",{get:function(){return this.canonicalAuthorityUrlComponents||(this.canonicalAuthorityUrlComponents=Go.GetUrlComponents(this.CanonicalAuthority)),this.canonicalAuthorityUrlComponents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"DefaultOpenIdConfigurationEndpoint",{get:function(){return this.AuthorityType===dn.Adfs?""+this.CanonicalAuthority+pn:this.CanonicalAuthority+"v2.0/"+pn},enumerable:!0,configurable:!0}),e.prototype.validateAsUri=function(){var e;try{e=this.CanonicalAuthorityUrlComponents}catch(e){throw Co}if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Ao;if(!e.PathSegments||e.PathSegments.length<1)throw Po},e.prototype.DiscoverEndpoints=function(e,t,r){var n=new Jo,o=t.createAndStartHttpEvent(r,"GET",e,"openIdConfigurationEndpoint");return n.sendRequestAsync(e,"GET",!0).then((function(e){return o.httpResponseStatus=e.statusCode,t.stopEvent(o),{AuthorizationEndpoint:e.body.authorization_endpoint,EndSessionEndpoint:e.body.end_session_endpoint,Issuer:e.body.issuer}})).catch((function(e){throw o.serverErrorCode=e,t.stopEvent(o),e}))},e.prototype.resolveEndpointsAsync=function(e,t){return Yr(this,void 0,void 0,(function(){var r,n,o;return Zr(this,(function(i){switch(i.label){case 0:return this.IsValidationEnabled?(r=this.canonicalAuthorityUrlComponents.HostNameAndPort,0!==Xo.getTrustedHostList().length?[3,2]:[4,Xo.setTrustedAuthoritiesFromNetwork(this.canonicalAuthority,e,t)]):[3,3];case 1:i.sent(),i.label=2;case 2:if(!Xo.IsInTrustedHostList(r))throw Vo.createUntrustedAuthorityError(r);i.label=3;case 3:return n=this.GetOpenIdConfigurationEndpoint(),o=this,[4,this.DiscoverEndpoints(n,e,t)];case 4:return o.tenantDiscoveryResponse=i.sent(),[2,this.tenantDiscoveryResponse]}}))}))},e.prototype.hasCachedMetadata=function(){return!!(this.tenantDiscoveryResponse&&this.tenantDiscoveryResponse.AuthorizationEndpoint&&this.tenantDiscoveryResponse.EndSessionEndpoint&&this.tenantDiscoveryResponse.Issuer)},e.prototype.GetOpenIdConfigurationEndpoint=function(){return this.DefaultOpenIdConfigurationEndpoint},e}(),ei=function(){function e(t,r){if(!t||Sn.isEmpty(t))return this.uid="",void(this.utid="");try{var n=tn.base64Decode(t),o=JSON.parse(n);o&&(o.hasOwnProperty("uid")&&(this.uid=r?e.stripPolicyFromUid(o.uid,r):o.uid),o.hasOwnProperty("utid")&&(this.utid=o.utid))}catch(e){throw co.createClientInfoDecodingError(e)}}return Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid?this._uid:""},set:function(e){this._uid=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"utid",{get:function(){return this._utid?this._utid:""},set:function(e){this._utid=e},enumerable:!0,configurable:!0}),e.createClientInfoFromIdToken=function(t,r){var n={uid:t.subject,utid:""};return new e(tn.base64Encode(JSON.stringify(n)),r)},e.stripPolicyFromUid=function(e,t){var r=e.split("-"),n=t.split("/").reverse(),o="";return Sn.isEmpty(n[0])?n.length>1&&(o=n[1]):o=n[0],r[r.length-1]===o?r.slice(0,r.length-1).join("-"):e},e.prototype.encodeClientInfo=function(){var e=JSON.stringify({uid:this.uid,utid:this.utid});return tn.base64Encode(e)},e}(),ti=function(){function e(){}return e.parseExpiresIn=function(e){return e||(e="3599"),parseInt(e,10)},e.now=function(){return Math.round((new Date).getTime()/1e3)},e.relativeNowMs=function(){return window.performance.now()},e}(),ri=function(){function e(){}return e.decodeJwt=function(e){if(Sn.isEmpty(e))return null;var t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);return!t||t.length<4?null:{header:t[1],JWSPayload:t[2],JWSSig:t[3]}},e.validateExpirationIsWithinOffset=function(e,t){var r=t||300;return e&&e>ti.now()+r},e.extractIdToken=function(e){var t=this.decodeJwt(e);if(!t)return null;try{var r=t.JWSPayload,n=tn.base64Decode(r);return n?JSON.parse(n):null}catch(e){}return null},e}(),ni=function(e){if(Sn.isEmpty(e))throw co.createIdTokenNullOrEmptyError(e);try{this.rawIdToken=e,this.claims=ri.extractIdToken(e),this.claims&&(this.claims.hasOwnProperty("iss")&&(this.issuer=this.claims.iss),this.claims.hasOwnProperty("oid")&&(this.objectId=this.claims.oid),this.claims.hasOwnProperty("sub")&&(this.subject=this.claims.sub),this.claims.hasOwnProperty("tid")&&(this.tenantId=this.claims.tid),this.claims.hasOwnProperty("ver")&&(this.version=this.claims.ver),this.claims.hasOwnProperty("preferred_username")?this.preferredName=this.claims.preferred_username:this.claims.hasOwnProperty("upn")&&(this.preferredName=this.claims.upn),this.claims.hasOwnProperty("name")&&(this.name=this.claims.name),this.claims.hasOwnProperty("nonce")&&(this.nonce=this.claims.nonce),this.claims.hasOwnProperty("exp")&&(this.expiration=this.claims.exp),this.claims.hasOwnProperty("home_oid")&&(this.homeObjectId=this.claims.home_oid),this.claims.hasOwnProperty("sid")&&(this.sid=this.claims.sid),this.claims.hasOwnProperty("cloud_instance_host_name")&&(this.cloudInstance=this.claims.cloud_instance_host_name))}catch(e){throw co.createIdTokenParsingError(e)}},oi=function(e,t){this.key=e,this.value=t},ii=function(){function e(e){if(!window)throw wn.createNoWindowObjectError("Browser storage class could not find window object");if(void 0===window[e]||null===window[e])throw Vo.createStorageNotSupportedError(e);this.cacheLocation=e}return e.prototype.setItem=function(e,t,r){window[this.cacheLocation].setItem(e,t),r&&this.setItemCookie(e,t)},e.prototype.getItem=function(e,t){return t&&this.getItemCookie(e)?this.getItemCookie(e):window[this.cacheLocation].getItem(e)},e.prototype.removeItem=function(e){return window[this.cacheLocation].removeItem(e)},e.prototype.clear=function(){return window[this.cacheLocation].clear()},e.prototype.setItemCookie=function(e,t,r){var n=encodeURIComponent(e)+"="+encodeURIComponent(t)+";path=/;";r&&(n+="expires="+this.getCookieExpirationTime(r)+";"),document.cookie=n},e.prototype.getItemCookie=function(e){for(var t=encodeURIComponent(e)+"=",r=document.cookie.split(";"),n=0;n<r.length;n++){for(var o=r[n];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t))return decodeURIComponent(o.substring(t.length,o.length))}return""},e.prototype.clearItemCookie=function(e){this.setItemCookie(e,"",-1)},e.prototype.getCookieExpirationTime=function(e){var t=new Date;return new Date(t.getTime()+24*e*60*60*1e3).toUTCString()},e}(),ai=function(){function e(){}return e.validateRequest=function(e,t,r,n){if(!t&&!e)throw Vo.createEmptyRequestError();var o,i;e&&(o=t?Bo.appendScopes(e.scopes,e.extraScopesToConsent):e.scopes,Bo.validateInputScope(o,!t),o=Bo.translateClientIdIfSingleScope(o,r),this.validatePromptParameter(e.prompt),i=this.validateEQParameters(e.extraQueryParameters,e.claimsRequest),this.validateClaimsRequest(e.claimsRequest));var a=this.validateAndGenerateState(e&&e.state,n),s=this.validateAndGenerateCorrelationId(e&&e.correlationId);return Xr({},e,{extraQueryParameters:i,scopes:o,state:a,correlationId:s})},e.validatePromptParameter=function(e){if(e&&[yn.LOGIN,yn.SELECT_ACCOUNT,yn.CONSENT,yn.NONE].indexOf(e)<0)throw Vo.createInvalidPromptError(e)},e.validateEQParameters=function(e,t){var r=Xr({},e);return r?(t&&delete r[rn.claims],hn.forEach((function(e){r[e]&&delete r[e]})),r):null},e.validateClaimsRequest=function(e){if(e)try{JSON.parse(e)}catch(e){throw Vo.createClaimsRequestParsingError(e)}},e.validateAndGenerateState=function(t,r){return Sn.isEmpty(t)?e.generateLibraryState(r):""+e.generateLibraryState(r)+rn.resourceDelimiter+t},e.generateLibraryState=function(e){var t={id:tn.createNewGuid(),ts:ti.now(),method:e},r=JSON.stringify(t);return tn.base64Encode(r)},e.parseLibraryState=function(e){var t=decodeURIComponent(e).split(rn.resourceDelimiter)[0];if(tn.isGuid(t))return{id:t,ts:ti.now(),method:rn.interactionTypeRedirect};try{var r=tn.base64Decode(t);return JSON.parse(r)}catch(t){throw co.createInvalidStateError(e,null)}},e.validateAndGenerateCorrelationId=function(e){if(e&&!tn.isGuid(e))throw Vo.createInvalidCorrelationIdError();return tn.isGuid(e)?e:tn.createNewGuid()},e.createRequestSignature=function(e){return""+e.scopes.join(" ").toLowerCase()+rn.resourceDelimiter+e.authority},e}(),si=function(e){function t(t,r,n){var o=e.call(this,r)||this;return o.clientId=t,o.rollbackEnabled=!0,o.migrateCacheEntries(n),o}return Jr(t,e),t.prototype.migrateCacheEntries=function(t){var r,n=this,o=rn.cachePrefix+"."+on.IDTOKEN,i=rn.cachePrefix+"."+on.CLIENT_INFO,a=rn.cachePrefix+"."+an.ERROR,s=rn.cachePrefix+"."+an.ERROR_DESC,c=e.prototype.getItem.call(this,o);if(c)try{r=new ni(c)}catch(e){return}if(r&&r.claims&&r.claims.aud===this.clientId){var u=[c,e.prototype.getItem.call(this,i),e.prototype.getItem.call(this,a),e.prototype.getItem.call(this,s)];[on.IDTOKEN,on.CLIENT_INFO,an.ERROR,an.ERROR_DESC].forEach((function(e,r){return n.duplicateCacheEntry(e,u[r],t)}))}},t.prototype.duplicateCacheEntry=function(e,t,r){t&&this.setItem(e,t,r)},t.prototype.generateCacheKey=function(e,t){try{return JSON.parse(e),e}catch(r){return 0===e.indexOf(""+rn.cachePrefix)||0===e.indexOf(rn.adalIdToken)?e:t?rn.cachePrefix+"."+this.clientId+"."+e:rn.cachePrefix+"."+e}},t.prototype.matchKeyForType=function(e,t,r,n){var o=Sn.validateAndParseJsonCacheKey(e);if(!o)return null;var i=e.match(t)&&e.match(r),a=!1;switch(n){case en.ACCESS_TOKEN:a=!!e.match(rn.scopes);break;case en.ID_TOKEN:a=!e.match(rn.scopes)}return i&&a?o:null},t.prototype.setItem=function(t,r,n){e.prototype.setItem.call(this,this.generateCacheKey(t,!0),r,n),this.rollbackEnabled&&!n&&e.prototype.setItem.call(this,this.generateCacheKey(t,!1),r,n)},t.prototype.getItem=function(t,r){return e.prototype.getItem.call(this,this.generateCacheKey(t,!0),r)},t.prototype.removeItem=function(t){e.prototype.removeItem.call(this,this.generateCacheKey(t,!0)),this.rollbackEnabled&&e.prototype.removeItem.call(this,this.generateCacheKey(t,!1))},t.prototype.resetCacheItems=function(){var t,r=window[this.cacheLocation];for(t in r)r.hasOwnProperty(t)&&-1!==t.indexOf(rn.cachePrefix)&&e.prototype.removeItem.call(this,t)},t.prototype.resetTempCacheItems=function(t){var r=this,n=t&&ai.parseLibraryState(t).id,o=this.tokenRenewalInProgress(t),i=window[this.cacheLocation];n&&!o&&Object.keys(i).forEach((function(t){-1!==t.indexOf(n)&&(r.removeItem(t),e.prototype.clearItemCookie.call(r,t))})),this.removeItem(nn.INTERACTION_STATUS),this.removeItem(nn.REDIRECT_REQUEST)},t.prototype.setItemCookie=function(t,r,n){e.prototype.setItemCookie.call(this,this.generateCacheKey(t,!0),r,n),this.rollbackEnabled&&e.prototype.setItemCookie.call(this,this.generateCacheKey(t,!1),r,n)},t.prototype.clearItemCookie=function(t){e.prototype.clearItemCookie.call(this,this.generateCacheKey(t,!0)),this.rollbackEnabled&&e.prototype.clearItemCookie.call(this,this.generateCacheKey(t,!1))},t.prototype.getItemCookie=function(t){return e.prototype.getItemCookie.call(this,this.generateCacheKey(t,!0))},t.prototype.getAllTokensByType=function(e,t,r){var n=this;return Object.keys(window[this.cacheLocation]).reduce((function(o,i){var a=n.matchKeyForType(i,e,t,r);if(a){var s=n.getItem(i);if(s)try{var c=new oi(a,JSON.parse(s));return o.concat([c])}catch(e){return o}}return o}),[])},t.prototype.getAllAccessTokens=function(e,t){return this.getAllTokensByType(e,t,en.ACCESS_TOKEN)},t.prototype.getAllIdTokens=function(e,t){return this.getAllTokensByType(e,t,en.ID_TOKEN)},t.prototype.getAllTokens=function(e,t){var r=this.getAllAccessTokens(e,t),n=this.getAllIdTokens(e,t);return r.concat(n)},t.prototype.tokenRenewalInProgress=function(e){var r=this.getItem(t.generateTemporaryCacheKey(nn.RENEW_STATUS,e));return!(!r||r!==rn.inProgress)},t.prototype.clearMsalCookie=function(r){var n=this;r?(this.clearItemCookie(t.generateTemporaryCacheKey(nn.NONCE_IDTOKEN,r)),this.clearItemCookie(t.generateTemporaryCacheKey(nn.STATE_LOGIN,r)),this.clearItemCookie(t.generateTemporaryCacheKey(nn.LOGIN_REQUEST,r)),this.clearItemCookie(t.generateTemporaryCacheKey(nn.STATE_ACQ_TOKEN,r))):document.cookie.split(";").forEach((function(t){var r=t.trim().split("=")[0];r.indexOf(rn.cachePrefix)>-1&&e.prototype.clearItemCookie.call(n,r)}))},t.generateAcquireTokenAccountKey=function(e,t){var r=ai.parseLibraryState(t).id;return""+nn.ACQUIRE_TOKEN_ACCOUNT+rn.resourceDelimiter+e+rn.resourceDelimiter+r},t.generateAuthorityKey=function(e){return t.generateTemporaryCacheKey(nn.AUTHORITY,e)},t.generateTemporaryCacheKey=function(e,t){var r=ai.parseLibraryState(t).id;return""+e+rn.resourceDelimiter+r},t}(ii),ci=function(){function e(e,t,r,n,o,i,a){this.accountIdentifier=e,this.homeAccountIdentifier=t,this.userName=r,this.name=n,this.idToken=o,this.idTokenClaims=o,this.sid=i,this.environment=a}return e.createAccount=function(t,r){var n,o=t.objectId||t.subject,i=r?r.uid:"",a=r?r.utid:"";return Sn.isEmpty(i)||(n=Sn.isEmpty(a)?tn.base64Encode(i):tn.base64Encode(i)+"."+tn.base64Encode(a)),new e(o,n,t.preferredName,t.name,t.claims,t.sid,t.issuer)},e.compareAccounts=function(e,t){return!!(e&&t&&e.homeAccountIdentifier&&t.homeAccountIdentifier&&e.homeAccountIdentifier===t.homeAccountIdentifier)},e}(),ui=function(){function e(){}return e.isInIframe=function(){return window.parent!==window},e.isInPopup=function(){return!(!window.opener||window.opener===window)},e.generateFrameName=function(e,t){return""+e+rn.resourceDelimiter+t},e.monitorIframeForHash=function(t,r,n,o){return new Promise((function(i,a){var s=ti.relativeNowMs()+r;o.verbose("monitorWindowForIframe polling started");var c=setInterval((function(){if(ti.relativeNowMs()>s)return o.error("monitorIframeForHash unable to find hash in url, timing out"),o.errorPii("monitorIframeForHash polling timed out for url: "+n),clearInterval(c),void a(co.createTokenRenewalTimeoutError());var e;try{e=t.location.href}catch(e){}e&&Go.urlContainsHash(e)&&(o.verbose("monitorIframeForHash found url in hash"),clearInterval(c),i(t.location.hash))}),e.POLLING_INTERVAL_MS)}))},e.monitorPopupForHash=function(t,r,n,o){return new Promise((function(i,a){var s=r/e.POLLING_INTERVAL_MS,c=0;o.verbose("monitorWindowForHash polling started");var u=setInterval((function(){if(t.closed)return o.error("monitorWindowForHash window closed"),clearInterval(u),void a(co.createUserCancelledError());var e;try{e=t.location.href}catch(e){}e&&"about:blank"!==e&&(c++,e&&Go.urlContainsHash(e)?(o.verbose("monitorPopupForHash found url in hash"),clearInterval(u),i(t.location.hash)):c>s&&(o.error("monitorPopupForHash unable to find hash in url, timing out"),o.errorPii("monitorPopupForHash polling timed out for url: "+n),clearInterval(u),a(co.createTokenRenewalTimeoutError())))}),e.POLLING_INTERVAL_MS)}))},e.loadFrame=function(e,t,r,n){var o=this;return n.infoPii("LoadFrame: "+t),new Promise((function(i,a){setTimeout((function(){var r=o.loadFrameSync(e,t,n);r?i(r):a("Unable to load iframe with name: "+t)}),r)}))},e.loadFrameSync=function(t,r,n){var o=e.addHiddenIFrame(r,n);return o?(""!==o.src&&"about:blank"!==o.src||(o.src=t,n.infoPii("Frame Name : "+r+" Navigated to: "+t)),o):null},e.addHiddenIFrame=function(e,t){if(void 0===e)return null;t.infoPii("Add msal frame to document:"+e);var r=document.getElementById(e);if(!r){if(document.createElement&&document.documentElement&&-1===window.navigator.userAgent.indexOf("MSIE 5.0")){var n=document.createElement("iframe");n.setAttribute("id",e),n.setAttribute("aria-hidden","true"),n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),r=document.getElementsByTagName("body")[0].appendChild(n)}else document.body&&document.body.insertAdjacentHTML&&document.body.insertAdjacentHTML("beforeend","<iframe name='"+e+"' id='"+e+"' style='display:none'></iframe>");window.frames&&window.frames[e]&&(r=window.frames[e])}return r},e.removeHiddenIframe=function(e){document.body===e.parentNode&&document.body.removeChild(e)},e.getIframeWithHash=function(e){var t=document.getElementsByTagName("iframe");return Array.apply(null,Array(t.length)).map((function(e,r){return t.item(r)})).filter((function(t){try{return t.contentWindow.location.hash===e}catch(e){return!1}}))[0]},e.getPopups=function(){return window.openedWindows||(window.openedWindows=[]),window.openedWindows},e.getPopUpWithHash=function(t){return e.getPopups().filter((function(e){try{return e.location.hash===t}catch(e){return!1}}))[0]},e.trackPopup=function(t){e.getPopups().push(t)},e.closePopups=function(){e.getPopups().forEach((function(e){return e.close()}))},e.blockReloadInHiddenIframes=function(){if(Go.urlContainsHash(window.location.hash)&&e.isInIframe())throw co.createBlockTokenRequestsInHiddenIframeError()},e.checkIfBackButtonIsPressed=function(e){var t=e.getItem(nn.REDIRECT_REQUEST);if(t&&!Go.urlContainsHash(window.location.hash)){var r=t.split(rn.resourceDelimiter);r.shift();var n=r.length>0?r.join(rn.resourceDelimiter):null;e.resetTempCacheItems(n)}},e.clearUrlFragment=function(){"function"==typeof history.replaceState?history.replaceState(null,null,""+window.location.pathname+window.location.search):window.location.hash=""},e.POLLING_INTERVAL_MS=50,e}(),li=function(){function e(){}return e.setResponseIdToken=function(e,t){if(!e)return null;if(!t)return e;var r=Number(t.expiration);return r&&!e.expiresOn&&(e.expiresOn=new Date(1e3*r)),Xr({},e,{idToken:t,idTokenClaims:t.claims,uniqueId:t.objectId||t.subject,tenantId:t.tenantId})},e.buildAuthResponse=function(t,r,n,o,i,a){switch(n.responseType){case sn:return r=Xr({},r,{tokenType:en.ID_TOKEN,account:o,scopes:i,accountState:a}),(r=e.setResponseIdToken(r,t)).idToken?r:null;case un:return(r=e.setResponseIdToken(r,t))&&r.accessToken&&r.idToken?r:null;case cn:return e.setResponseIdToken(r,t);default:return null}},e}(),pi=function(){function e(){}return e.saveMetadataFromNetwork=function(e,t,r){return Yr(this,void 0,void 0,(function(){var n;return Zr(this,(function(o){switch(o.label){case 0:return[4,e.resolveEndpointsAsync(t,r)];case 1:return n=o.sent(),this.metadataMap.set(e.CanonicalAuthority,n),[2,n]}}))}))},e.getMetadata=function(e){return this.metadataMap.get(e)},e.saveMetadataFromConfig=function(e,t){try{if(t){var r=JSON.parse(t);if(!r.authorization_endpoint||!r.end_session_endpoint||!r.issuer)throw Vo.createInvalidAuthorityMetadataError();this.metadataMap.set(e,{AuthorizationEndpoint:r.authorization_endpoint,EndSessionEndpoint:r.end_session_endpoint,Issuer:r.issuer})}}catch(e){throw Vo.createInvalidAuthorityMetadataError()}},e.CreateInstance=function(e,t,r){return Sn.isEmpty(e)?null:(r&&this.saveMetadataFromConfig(e,r),new Zo(e,t,this.metadataMap.get(e)))},e.metadataMap=new Map,e}();!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose"}(Yo||(Yo={}));var di=function(){function e(e,t){void 0===t&&(t={}),this.level=Yo.Info;var r=t.correlationId,n=void 0===r?"":r,o=t.level,i=void 0===o?Yo.Info:o,a=t.piiLoggingEnabled,s=void 0!==a&&a;this.localCallback=e,this.correlationId=n,this.level=i,this.piiLoggingEnabled=s}return e.prototype.logMessage=function(e,t,r){if(!(e>this.level||!this.piiLoggingEnabled&&r)){var n,o=(new Date).toUTCString();n=Sn.isEmpty(this.correlationId)?o+":1.4.10-"+Yo[e]+(r?"-pii":"")+" "+t:o+":"+this.correlationId+"-1.4.10-"+Yo[e]+(r?"-pii":"")+" "+t,this.executeCallback(e,n,r)}},e.prototype.executeCallback=function(e,t,r){this.localCallback&&this.localCallback(e,t,r)},e.prototype.error=function(e){this.logMessage(Yo.Error,e,!1)},e.prototype.errorPii=function(e){this.logMessage(Yo.Error,e,!0)},e.prototype.warning=function(e){this.logMessage(Yo.Warning,e,!1)},e.prototype.warningPii=function(e){this.logMessage(Yo.Warning,e,!0)},e.prototype.info=function(e){this.logMessage(Yo.Info,e,!1)},e.prototype.infoPii=function(e){this.logMessage(Yo.Info,e,!0)},e.prototype.verbose=function(e){this.logMessage(Yo.Verbose,e,!1)},e.prototype.verbosePii=function(e){this.logMessage(Yo.Verbose,e,!0)},e.prototype.isPiiLoggingEnabled=function(){return this.piiLoggingEnabled},e}(),hi={clientId:"",authority:null,validateAuthority:!0,authorityMetadata:"",knownAuthorities:[],redirectUri:function(){return Go.getCurrentUrl()},postLogoutRedirectUri:function(){return Go.getCurrentUrl()},navigateToLoginRequestUrl:!0},fi={cacheLocation:"sessionStorage",storeAuthStateInCookie:!1},yi={logger:new di(null),loadFrameTimeout:6e3,tokenRenewalOffsetSeconds:300,navigateFrameWait:500},gi={isAngular:!1,unprotectedResources:new Array,protectedResourceMap:new Map},mi="server_unavailable",vi="Server is temporarily unavailable.",bi="unknown_server_error",wi=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="ServerError",Object.setPrototypeOf(o,t.prototype),o}return Jr(t,e),t.createServerUnavailableError=function(){return new t(mi,vi)},t.createUnknownServerError=function(e){return new t(bi,e)},t}(wn),Si="interaction_required",Ei="consent_required",Ti="login_required",Ii=function(e){function t(r,n){var o=e.call(this,r,n)||this;return o.name="InteractionRequiredAuthError",Object.setPrototypeOf(o,t.prototype),o}return Jr(t,e),t.isInteractionRequiredError=function(e){return e&&[Si,Ei,Ti].indexOf(e)>-1},t.createLoginRequiredAuthError=function(e){return new t(Ti,e)},t.createInteractionRequiredAuthError=function(e){return new t(Si,e)},t.createConsentRequiredAuthError=function(e){return new t(Ei,e)},t}(wi);function Oi(e){return{uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:"",scopes:null,expiresOn:null,account:null,accountState:e,fromCache:!1}}var Ci="event_name",Ai="elapsed_time",Pi=function(e){var t=Go.GetUrlComponents(e);if(Zo.isAdfs(e))return e;var r=t.PathSegments;if(r&&r.length>=2){var n="tfp"===r[1]?2:1;n<r.length&&(r[n]="<tenant>")}return t.Protocol+"//"+t.HostNameAndPort+"/"+r.join("/")},Ri=function(e){return tn.base64Encode(e)},_i=function(e){return"msal."+(e||"")},Ni=function(){return!!("undefined"!=typeof window&&"performance"in window&&window.performance.mark&&window.performance.measure)};const ki=function(){function e(e,t,r){var n;this.eventId=tn.createNewGuid(),this.label=r,this.event=((n={})[_i(Ci)]=e,n[_i(Ai)]=-1,n["Microsoft.MSAL.correlation_id"]=t,n)}return e.prototype.setElapsedTime=function(e){this.event[_i(Ai)]=e},e.prototype.stop=function(){var e,t,r;this.setElapsedTime(+Date.now()-+this.startTimestamp),e=this.displayName,t=this.perfStartMark,r=this.perfEndMark,Ni()&&(window.performance.mark(r),window.performance.measure(e,t,r),window.performance.clearMeasures(e),window.performance.clearMarks(t),window.performance.clearMarks(r))},e.prototype.start=function(){var e;this.startTimestamp=Date.now(),this.event[_i("start_time")]=this.startTimestamp,e=this.perfStartMark,Ni()&&window.performance.mark(e)},Object.defineProperty(e.prototype,"telemetryCorrelationId",{get:function(){return this.event["Microsoft.MSAL.correlation_id"]},set:function(e){this.event["Microsoft.MSAL.correlation_id"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventName",{get:function(){return this.event[_i(Ci)]},enumerable:!0,configurable:!0}),e.prototype.get=function(){return Xr({},this.event,{eventId:this.eventId})},Object.defineProperty(e.prototype,"key",{get:function(){return this.telemetryCorrelationId+"_"+this.eventId+"-"+this.eventName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayName",{get:function(){return"Msal-"+this.label+"-"+this.telemetryCorrelationId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perfStartMark",{get:function(){return"start-"+this.key},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"perfEndMark",{get:function(){return"end-"+this.key},enumerable:!0,configurable:!0}),e}(),xi=function(e){function t(t,r,n,o){var i=e.call(this,_i("default_event"),r,"DefaultEvent")||this;return i.event[_i("client_id")]=n,i.event[_i("sdk_plaform")]=t.sdk,i.event[_i("sdk_version")]=t.sdkVersion,i.event[_i("application_name")]=t.applicationName,i.event[_i("application_version")]=t.applicationVersion,i.event[_i("effective_connection_speed")]=t.networkInformation&&t.networkInformation.connectionSpeed,i.event.Microsoft_MSAL_ui_event_count=i.getEventCount(_i("ui_event"),o),i.event.Microsoft_MSAL_http_event_count=i.getEventCount(_i("http_event"),o),i.event.Microsoft_MSAL_cache_event_count=i.getEventCount(_i("cache_event"),o),i}return Jr(t,e),t.prototype.getEventCount=function(e,t){return t[e]?t[e]:0},t}(ki);var ji,Mi,qi,Di=_i("authority"),Li=_i("authority_type"),Ui=_i("ui_behavior"),Hi=_i("tenant_id"),zi=_i("user_id"),Fi=_i("was_successful"),Vi=_i("api_error_code"),Bi=_i("login_hint");!function(e){e[e.AcquireTokenRedirect=2001]="AcquireTokenRedirect",e[e.AcquireTokenSilent=2002]="AcquireTokenSilent",e[e.AcquireTokenPopup=2003]="AcquireTokenPopup",e[e.LoginRedirect=2004]="LoginRedirect",e[e.LoginPopup=2005]="LoginPopup",e[e.Logout=2006]="Logout"}(Mi||(Mi={})),function(e){e.AcquireTokenRedirect="AcquireTokenRedirect",e.AcquireTokenSilent="AcquireTokenSilent",e.AcquireTokenPopup="AcquireTokenPopup",e.LoginRedirect="LoginRedirect",e.LoginPopup="LoginPopup",e.Logout="Logout"}(qi||(qi={}));var Gi=((ji={})[qi.AcquireTokenSilent]=Mi.AcquireTokenSilent,ji[qi.AcquireTokenPopup]=Mi.AcquireTokenPopup,ji[qi.AcquireTokenRedirect]=Mi.AcquireTokenRedirect,ji[qi.LoginPopup]=Mi.LoginPopup,ji[qi.LoginRedirect]=Mi.LoginRedirect,ji[qi.Logout]=Mi.Logout,ji);const Ki=function(e){function t(t,r,n){var o=e.call(this,_i("api_event"),t,n)||this;return n&&(o.apiCode=Gi[n],o.apiEventIdentifier=n),o.piiEnabled=r,o}return Jr(t,e),Object.defineProperty(t.prototype,"apiEventIdentifier",{set:function(e){this.event["msal.api_telem_id"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiCode",{set:function(e){this.event["msal.api_id"]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authority",{set:function(e){this.event[Di]=Pi(e).toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiErrorCode",{set:function(e){this.event[Vi]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tenantId",{set:function(e){this.event[Hi]=this.piiEnabled&&e?Ri(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accountId",{set:function(e){this.event[zi]=this.piiEnabled&&e?Ri(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wasSuccessful",{get:function(){return!0===this.event[Fi]},set:function(e){this.event[Fi]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loginHint",{set:function(e){this.event[Bi]=this.piiEnabled&&e?Ri(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"authorityType",{set:function(e){this.event[Li]=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"promptType",{set:function(e){this.event[Ui]=e.toLowerCase()},enumerable:!0,configurable:!0}),t}(ki);var Wi=_i("http_path"),$i=_i("user_agent"),Qi=_i("query_parameters"),Ji=_i("api_version"),Xi=_i("response_code"),Yi=_i("oauth_error_code"),Zi=_i("http_method"),ea=_i("request_id_header"),ta=_i("spe_info"),ra=_i("server_error_code"),na=_i("server_sub_error_code"),oa=_i("url");const ia=function(e){function t(t,r){return e.call(this,_i("http_event"),t,r)||this}return Jr(t,e),Object.defineProperty(t.prototype,"url",{set:function(e){var t=Pi(e);this.event[oa]=t&&t.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpPath",{set:function(e){this.event[Wi]=Pi(e).toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userAgent",{set:function(e){this.event[$i]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"queryParams",{set:function(e){this.event[Qi]=Qo.generateQueryParametersString(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"apiVersion",{set:function(e){this.event[Ji]=e.toLowerCase()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpResponseStatus",{set:function(e){this.event[Xi]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"oAuthErrorCode",{set:function(e){this.event[Yi]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"httpMethod",{set:function(e){this.event[Zi]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"requestIdHeader",{set:function(e){this.event[ea]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speInfo",{set:function(e){this.event[ta]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverErrorCode",{set:function(e){this.event[ra]=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverSubErrorCode",{set:function(e){this.event[na]=e},enumerable:!0,configurable:!0}),t}(ki),aa=function(){function e(e,t,r){this.completedEvents={},this.inProgressEvents={},this.eventCountByCorrelationId={},this.onlySendFailureTelemetry=!1,this.telemetryPlatform=Xr({sdk:rn.libraryName,sdkVersion:$o,networkInformation:{connectionSpeed:"undefined"!=typeof navigator&&navigator.connection&&navigator.connection.effectiveType}},e.platform),this.clientId=e.clientId,this.onlySendFailureTelemetry=e.onlySendFailureTelemetry,this.telemetryEmitter=t,this.logger=r}return e.getTelemetrymanagerStub=function(e,t){return new this({platform:{applicationName:"UnSetStub",applicationVersion:"0.0"},clientId:e},(function(){}),t)},e.prototype.startEvent=function(e){this.logger.verbose("Telemetry Event started: "+e.key),this.telemetryEmitter&&(e.start(),this.inProgressEvents[e.key]=e)},e.prototype.stopEvent=function(e){if(this.logger.verbose("Telemetry Event stopped: "+e.key),this.telemetryEmitter&&this.inProgressEvents[e.key]){e.stop(),this.incrementEventCount(e);var t=this.completedEvents[e.telemetryCorrelationId];this.completedEvents[e.telemetryCorrelationId]=(t||[]).concat([e]),delete this.inProgressEvents[e.key]}},e.prototype.flush=function(e){var t=this;if(this.logger.verbose("Flushing telemetry events: "+e),this.telemetryEmitter&&this.completedEvents[e]){var r=this.getOrphanedEvents(e);r.forEach((function(e){return t.incrementEventCount(e)}));var n=this.completedEvents[e].concat(r);delete this.completedEvents[e];var o=this.eventCountByCorrelationId[e];if(delete this.eventCountByCorrelationId[e],n&&n.length){var i=new xi(this.telemetryPlatform,e,this.clientId,o),a=n.concat([i]);this.telemetryEmitter(a.map((function(e){return e.get()})))}}},e.prototype.createAndStartApiEvent=function(e,t){var r=new Ki(e,this.logger.isPiiLoggingEnabled(),t);return this.startEvent(r),r},e.prototype.stopAndFlushApiEvent=function(e,t,r,n){t.wasSuccessful=r,n&&(t.apiErrorCode=n),this.stopEvent(t),this.flush(e)},e.prototype.createAndStartHttpEvent=function(e,t,r,n){var o=new ia(e,n);return o.url=r,o.httpMethod=t,this.startEvent(o),o},e.prototype.incrementEventCount=function(e){var t,r=e.eventName,n=this.eventCountByCorrelationId[e.telemetryCorrelationId];n?n[r]=n[r]?n[r]+1:1:this.eventCountByCorrelationId[e.telemetryCorrelationId]=((t={})[r]=1,t)},e.prototype.getOrphanedEvents=function(e){var t=this;return Object.keys(this.inProgressEvents).reduce((function(r,n){if(-1!==n.indexOf(e)){var o=t.inProgressEvents[n];return delete t.inProgressEvents[n],r.concat([o])}return r}),[])},e}();var sa=function(){function e(){}return e.filterTokenCacheItemsByScope=function(e,t){return e.filter((function(e){var r=e.key.scopes.split(" "),n=Bo.removeDefaultScopes(t);return 0===n.length?Bo.containsScope(r,t):Bo.containsScope(r,n)}))},e.filterTokenCacheItemsByAuthority=function(e,t){return e.filter((function(e){return Go.CanonicalizeUri(e.key.authority)===t}))},e.filterTokenCacheItemsByDomain=function(e,t){return e.filter((function(e){return Go.GetUrlComponents(e.key.authority).HostNameAndPort===t}))},e}(),ca=function(){function e(e){this.authResponseCallback=null,this.tokenReceivedCallback=null,this.errorReceivedCallback=null,this.config=function(e){var t=e.auth,r=e.cache,n=void 0===r?{}:r,o=e.system,i=void 0===o?{}:o,a=e.framework,s=void 0===a?{}:a;return{auth:Xr({},hi,t),cache:Xr({},fi,n),system:Xr({},yi,i),framework:Xr({},gi,s)}}(e),this.logger=this.config.system.logger,this.clientId=this.config.auth.clientId,this.inCookie=this.config.cache.storeAuthStateInCookie,this.telemetryManager=this.getTelemetryManagerFromConfig(this.config.system.telemetry,this.clientId),Xo.setTrustedAuthoritiesFromConfig(this.config.auth.validateAuthority,this.config.auth.knownAuthorities),pi.saveMetadataFromConfig(this.config.auth.authority,this.config.auth.authorityMetadata),this.authority=this.config.auth.authority||"https://login.microsoftonline.com/common",this.cacheStorage=new si(this.clientId,this.config.cache.cacheLocation,this.inCookie),window.activeRenewals={},window.renewStates=[],window.callbackMappedToRenewStates={},window.promiseMappedToRenewStates={},window.msal=this;var t=window.location.hash,r=Go.urlContainsHash(t);ui.checkIfBackButtonIsPressed(this.cacheStorage),r&&this.getResponseState(t).method===rn.interactionTypeRedirect&&this.handleRedirectAuthenticationResponse(t)}return Object.defineProperty(e.prototype,"authority",{get:function(){return this.authorityInstance.CanonicalAuthority},set:function(e){this.authorityInstance=pi.CreateInstance(e,this.config.auth.validateAuthority)},enumerable:!0,configurable:!0}),e.prototype.getAuthorityInstance=function(){return this.authorityInstance},e.prototype.handleRedirectCallback=function(e,t){if(!e)throw Vo.createInvalidCallbackObjectError(e);t?(this.tokenReceivedCallback=e,this.errorReceivedCallback=t,this.logger.warning("This overload for callback is deprecated - please change the format of the callbacks to a single callback as shown: (err: AuthError, response: AuthResponse).")):this.authResponseCallback=e,this.redirectError?this.authErrorHandler(rn.interactionTypeRedirect,this.redirectError,this.redirectResponse):this.redirectResponse&&this.authResponseHandler(rn.interactionTypeRedirect,this.redirectResponse)},e.prototype.urlContainsHash=function(e){return this.logger.verbose("UrlContainsHash has been called"),Go.urlContainsHash(e)},e.prototype.authResponseHandler=function(e,t,r){if(this.logger.verbose("AuthResponseHandler has been called"),e===rn.interactionTypeRedirect)this.logger.verbose("Interaction type is redirect"),this.errorReceivedCallback?(this.logger.verbose("Two callbacks were provided to handleRedirectCallback, calling success callback with response"),this.tokenReceivedCallback(t)):this.authResponseCallback&&(this.logger.verbose("One callback was provided to handleRedirectCallback, calling authResponseCallback with response"),this.authResponseCallback(null,t));else{if(e!==rn.interactionTypePopup)throw co.createInvalidInteractionTypeError();this.logger.verbose("Interaction type is popup, resolving"),r(t)}},e.prototype.authErrorHandler=function(e,t,r,n){if(this.logger.verbose("AuthErrorHandler has been called"),this.cacheStorage.removeItem(nn.INTERACTION_STATUS),e===rn.interactionTypeRedirect)if(this.logger.verbose("Interaction type is redirect"),this.errorReceivedCallback)this.logger.verbose("Two callbacks were provided to handleRedirectCallback, calling error callback"),this.errorReceivedCallback(t,r.accountState);else{if(!this.authResponseCallback)throw this.logger.verbose("handleRedirectCallback has not been called and no callbacks are registered, throwing error"),t;this.logger.verbose("One callback was provided to handleRedirectCallback, calling authResponseCallback with error"),this.authResponseCallback(t,r)}else{if(e!==rn.interactionTypePopup)throw co.createInvalidInteractionTypeError();this.logger.verbose("Interaction type is popup, rejecting"),n(t)}},e.prototype.loginRedirect=function(e){this.logger.verbose("LoginRedirect has been called");var t=ai.validateRequest(e,!0,this.clientId,rn.interactionTypeRedirect);this.acquireTokenInteractive(rn.interactionTypeRedirect,!0,t,null,null)},e.prototype.acquireTokenRedirect=function(e){this.logger.verbose("AcquireTokenRedirect has been called");var t=ai.validateRequest(e,!1,this.clientId,rn.interactionTypeRedirect);this.acquireTokenInteractive(rn.interactionTypeRedirect,!1,t,null,null)},e.prototype.loginPopup=function(e){var t=this;this.logger.verbose("LoginPopup has been called");var r=ai.validateRequest(e,!0,this.clientId,rn.interactionTypePopup),n=this.telemetryManager.createAndStartApiEvent(r.correlationId,qi.LoginPopup);return new Promise((function(e,n){t.acquireTokenInteractive(rn.interactionTypePopup,!0,r,e,n)})).then((function(e){return t.logger.verbose("Successfully logged in"),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,n,!0),e})).catch((function(e){throw t.cacheStorage.resetTempCacheItems(r.state),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,n,!1,e.errorCode),e}))},e.prototype.acquireTokenPopup=function(e){var t=this;this.logger.verbose("AcquireTokenPopup has been called");var r=ai.validateRequest(e,!1,this.clientId,rn.interactionTypePopup),n=this.telemetryManager.createAndStartApiEvent(r.correlationId,qi.AcquireTokenPopup);return new Promise((function(e,n){t.acquireTokenInteractive(rn.interactionTypePopup,!1,r,e,n)})).then((function(e){return t.logger.verbose("Successfully acquired token"),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,n,!0),e})).catch((function(e){throw t.cacheStorage.resetTempCacheItems(r.state),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,n,!1,e.errorCode),e}))},e.prototype.acquireTokenInteractive=function(e,t,r,n,o){var i=this;this.logger.verbose("AcquireTokenInteractive has been called"),ui.blockReloadInHiddenIframes();var a,s=this.cacheStorage.getItem(nn.INTERACTION_STATUS);if(e===rn.interactionTypeRedirect&&this.cacheStorage.setItem(nn.REDIRECT_REQUEST,""+rn.inProgress+rn.resourceDelimiter+r.state),s===rn.inProgress){var c=t?co.createLoginInProgressError():co.createAcquireTokenInProgressError(),u=Oi(this.getAccountState(r.state));return this.cacheStorage.resetTempCacheItems(r.state),void this.authErrorHandler(e,c,u,o)}if(r&&r.account&&!t?(a=r.account,this.logger.verbose("Account set from request")):(a=this.getAccount(),this.logger.verbose("Account set from MSAL Cache")),a||Qo.isSSOParam(r))this.logger.verbose("User session exists, login not required"),this.acquireTokenHelper(a,e,t,r,n,o);else{if(!t)return this.logger.verbose("AcquireToken call, no context or account given"),this.logger.info("User login is required"),u=Oi(this.getAccountState(r.state)),this.cacheStorage.resetTempCacheItems(r.state),void this.authErrorHandler(e,co.createUserLoginRequiredError(),u,o);if(this.extractADALIdToken()&&!r.scopes){this.logger.info("ADAL's idToken exists. Extracting login information from ADAL's idToken");var l=this.buildIDTokenRequest(r);this.silentLogin=!0,this.acquireTokenSilent(l).then((function(t){i.silentLogin=!1,i.logger.info("Unified cache call is successful"),i.authResponseHandler(e,t,n)}),(function(a){i.silentLogin=!1,i.logger.error("Error occurred during unified cache ATS: "+a),i.acquireTokenHelper(null,e,t,r,n,o)}))}else this.logger.verbose("Login call but no token found, proceed to login"),this.acquireTokenHelper(null,e,t,r,n,o)}},e.prototype.acquireTokenHelper=function(e,t,r,n,o,i){return Yr(this,void 0,void 0,(function(){var a,s,c,u,l,p,d,h,f,y;return Zr(this,(function(g){switch(g.label){case 0:this.logger.verbose("AcquireTokenHelper has been called"),this.logger.verbose("Interaction type: "+t+". isLoginCall: "+r),this.cacheStorage.setItem(nn.INTERACTION_STATUS,rn.inProgress),a=n.scopes?n.scopes.join(" ").toLowerCase():rn.oidcScopes.join(" "),this.logger.verbosePii("Request signature: "+a),c=n&&n.authority?pi.CreateInstance(n.authority,this.config.auth.validateAuthority,n.authorityMetadata):this.authorityInstance,g.label=1;case 1:return g.trys.push([1,11,,12]),c.hasCachedMetadata()?[3,3]:(this.logger.verbose("No cached metadata for authority"),[4,pi.saveMetadataFromNetwork(c,this.telemetryManager,n.correlationId)]);case 2:return g.sent(),[3,4];case 3:this.logger.verbose("Cached metadata found for authority"),g.label=4;case 4:if(l=r?sn:this.getTokenType(e,n.scopes),p=n.redirectStartPage||window.location.href,s=new Qo(c,this.clientId,l,this.getRedirectUri(n&&n.redirectUri),n.scopes,n.state,n.correlationId),this.logger.verbose("Finished building server authentication request"),this.updateCacheEntries(s,e,r,p),this.logger.verbose("Updating cache entries"),s.populateQueryParams(e,n),this.logger.verbose("Query parameters populated from account"),d=Go.createNavigateUrl(s)+rn.response_mode_fragment,t===rn.interactionTypeRedirect)r?this.logger.verbose("Interaction type redirect but login call is true. State not cached"):(this.cacheStorage.setItem(si.generateTemporaryCacheKey(nn.STATE_ACQ_TOKEN,n.state),s.state,this.inCookie),this.logger.verbose("State cached for redirect"),this.logger.verbosePii("State cached: "+s.state));else{if(t!==rn.interactionTypePopup)throw this.logger.verbose("Invalid interaction error. State not cached"),co.createInvalidInteractionTypeError();window.renewStates.push(s.state),window.requestType=r?rn.login:rn.renewToken,this.logger.verbose("State saved to window"),this.logger.verbosePii("State saved: "+s.state),this.registerCallback(s.state,a,o,i)}if(t!==rn.interactionTypePopup)return[3,9];this.logger.verbose("Interaction type is popup. Generating popup window");try{u=this.openPopup(d,"msal",rn.popUpWidth,rn.popUpHeight),ui.trackPopup(u)}catch(e){if(this.logger.info(In+":"+On),this.cacheStorage.setItem(an.ERROR,In),this.cacheStorage.setItem(an.ERROR_DESC,On),i)return i(co.createPopupWindowError()),[2]}if(!u)return[3,8];g.label=5;case 5:return g.trys.push([5,7,,8]),[4,ui.monitorPopupForHash(u,this.config.system.loadFrameTimeout,d,this.logger)];case 6:return h=g.sent(),this.handleAuthenticationResponse(h),this.cacheStorage.removeItem(nn.INTERACTION_STATUS),this.logger.info("Closing popup window"),this.config.framework.isAngular&&this.broadcast("msal:popUpHashChanged",h),ui.closePopups(),[3,8];case 7:return f=g.sent(),i&&i(f),this.config.framework.isAngular?this.broadcast("msal:popUpClosed",f.errorCode+rn.resourceDelimiter+f.errorMessage):(this.cacheStorage.removeItem(nn.INTERACTION_STATUS),u.close()),[3,8];case 8:return[3,10];case 9:n.onRedirectNavigate?(this.logger.verbose("Invoking onRedirectNavigate callback"),!1!==n.onRedirectNavigate(d)?(this.logger.verbose("onRedirectNavigate did not return false, navigating"),this.navigateWindow(d)):this.logger.verbose("onRedirectNavigate returned false, stopping navigation")):(this.logger.verbose("Navigating window to urlNavigate"),this.navigateWindow(d)),g.label=10;case 10:return[3,12];case 11:return y=g.sent(),this.logger.error(y),this.cacheStorage.resetTempCacheItems(n.state),this.authErrorHandler(t,co.createEndpointResolutionError(y.toString),Oi(n.state),i),u&&u.close(),[3,12];case 12:return[2]}}))}))},e.prototype.ssoSilent=function(e){if(this.logger.verbose("ssoSilent has been called"),!e)throw Vo.createEmptyRequestError();if(!e.sid&&!e.loginHint)throw Vo.createSsoSilentError();return this.acquireTokenSilent(Xr({},e,{scopes:rn.oidcScopes}))},e.prototype.acquireTokenSilent=function(e){var t=this;this.logger.verbose("AcquireTokenSilent has been called");var r=ai.validateRequest(e,!1,this.clientId,rn.interactionTypeSilent),n=this.telemetryManager.createAndStartApiEvent(r.correlationId,qi.AcquireTokenSilent),o=ai.createRequestSignature(r);return new Promise((function(e,n){return Yr(t,void 0,void 0,(function(){var t,i,a,s,c,u,l,p,d,h,f;return Zr(this,(function(y){switch(y.label){case 0:if(ui.blockReloadInHiddenIframes(),t=r.scopes.join(" ").toLowerCase(),this.logger.verbosePii("Serialized scopes: "+t),r.account?(i=r.account,this.logger.verbose("Account set from request")):(i=this.getAccount(),this.logger.verbose("Account set from MSAL Cache")),a=this.cacheStorage.getItem(rn.adalIdToken),!i&&!r.sid&&!r.loginHint&&Sn.isEmpty(a))return this.logger.info("User login is required"),[2,n(co.createUserLoginRequiredError())];if(s=this.getTokenType(i,r.scopes),this.logger.verbose("Response type: "+s),c=new Qo(pi.CreateInstance(r.authority,this.config.auth.validateAuthority,r.authorityMetadata),this.clientId,s,this.getRedirectUri(r.redirectUri),r.scopes,r.state,r.correlationId),this.logger.verbose("Finished building server authentication request"),Qo.isSSOParam(r)||i?(c.populateQueryParams(i,r,null,!0),this.logger.verbose("Query parameters populated from existing SSO or account")):i||Sn.isEmpty(a)?this.logger.verbose("No additional query parameters added"):(u=ri.extractIdToken(a),this.logger.verbose("ADAL's idToken exists. Extracting login information from ADAL's idToken to populate query parameters"),c.populateQueryParams(i,null,u,!0)),!(l=r.claimsRequest||c.claimsValue)&&!r.forceRefresh)try{d=this.getCachedToken(c,i)}catch(e){p=e}return d?(this.logger.verbose("Token found in cache lookup"),this.logger.verbosePii("Scopes found: "+JSON.stringify(d.scopes)),e(d),[2,null]):[3,1];case 1:return p?(this.logger.infoPii(p.errorCode+":"+p.errorMessage),n(p),[2,null]):[3,2];case 2:void 0,h=l?"Skipped cache lookup since claims were given":r.forceRefresh?"Skipped cache lookup since request.forceRefresh option was set to true":"No valid token found in cache lookup",this.logger.verbose(h),c.authorityInstance||(c.authorityInstance=r.authority?pi.CreateInstance(r.authority,this.config.auth.validateAuthority,r.authorityMetadata):this.authorityInstance),this.logger.verbosePii("Authority instance: "+c.authority),y.label=3;case 3:return y.trys.push([3,7,,8]),c.authorityInstance.hasCachedMetadata()?[3,5]:(this.logger.verbose("No cached metadata for authority"),[4,pi.saveMetadataFromNetwork(c.authorityInstance,this.telemetryManager,r.correlationId)]);case 4:return y.sent(),this.logger.verbose("Authority has been updated with endpoint discovery response"),[3,6];case 5:this.logger.verbose("Cached metadata found for authority"),y.label=6;case 6:return window.activeRenewals[o]?(this.logger.verbose("Renewing token in progress. Registering callback"),this.registerCallback(window.activeRenewals[o],o,e,n)):r.scopes&&Bo.onlyContainsOidcScopes(r.scopes)?(this.logger.verbose("OpenID Connect scopes only, renewing idToken"),this.silentLogin=!0,this.renewIdToken(o,e,n,i,c)):(this.logger.verbose("Renewing access token"),this.renewToken(o,e,n,i,c)),[3,8];case 7:return f=y.sent(),this.logger.error(f),n(co.createEndpointResolutionError(f.toString())),[2,null];case 8:return[2]}}))}))})).then((function(e){return t.logger.verbose("Successfully acquired token"),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,n,!0),e})).catch((function(e){throw t.cacheStorage.resetTempCacheItems(r.state),t.telemetryManager.stopAndFlushApiEvent(r.correlationId,n,!1,e.errorCode),e}))},e.prototype.openPopup=function(e,t,r,n){this.logger.verbose("OpenPopup has been called");try{var o=window.screenLeft?window.screenLeft:window.screenX,i=window.screenTop?window.screenTop:window.screenY,a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,c=a/2-r/2+o,u=s/2-n/2+i,l=window.open(e,t,"width="+r+", height="+n+", top="+u+", left="+c+", scrollbars=yes");if(!l)throw co.createPopupWindowError();return l.focus&&l.focus(),l}catch(e){throw this.cacheStorage.removeItem(nn.INTERACTION_STATUS),co.createPopupWindowError(e.toString())}},e.prototype.loadIframeTimeout=function(e,t,r){return Yr(this,void 0,void 0,(function(){var n,o,i,a,s;return Zr(this,(function(c){switch(c.label){case 0:return n=window.activeRenewals[r],this.logger.verbosePii("Set loading state to pending for: "+r+":"+n),this.cacheStorage.setItem(si.generateTemporaryCacheKey(nn.RENEW_STATUS,n),rn.inProgress),this.config.system.navigateFrameWait?[4,ui.loadFrame(e,t,this.config.system.navigateFrameWait,this.logger)]:[3,2];case 1:return i=c.sent(),[3,3];case 2:i=ui.loadFrameSync(e,t,this.logger),c.label=3;case 3:o=i,c.label=4;case 4:return c.trys.push([4,6,,7]),[4,ui.monitorIframeForHash(o.contentWindow,this.config.system.loadFrameTimeout,e,this.logger)];case 5:return(a=c.sent())&&this.handleAuthenticationResponse(a),[3,7];case 6:throw s=c.sent(),this.cacheStorage.getItem(si.generateTemporaryCacheKey(nn.RENEW_STATUS,n))===rn.inProgress&&(this.logger.verbose("Loading frame has timed out after: "+this.config.system.loadFrameTimeout/1e3+" seconds for scope/authority "+r+":"+n),n&&window.callbackMappedToRenewStates[n]&&window.callbackMappedToRenewStates[n](null,s),this.cacheStorage.removeItem(si.generateTemporaryCacheKey(nn.RENEW_STATUS,n))),ui.removeHiddenIframe(o),s;case 7:return ui.removeHiddenIframe(o),[2]}}))}))},e.prototype.navigateWindow=function(e,t){if(!e||Sn.isEmpty(e))throw this.logger.info("Navigate url is empty"),wn.createUnexpectedError("Navigate url is empty");var r=t||window,n=t?"Navigated Popup window to:"+e:"Navigate to:"+e;this.logger.infoPii(n),r.location.assign(e)},e.prototype.registerCallback=function(e,t,r,n){var o=this;window.activeRenewals[t]=e,window.promiseMappedToRenewStates[e]||(window.promiseMappedToRenewStates[e]=[]),window.promiseMappedToRenewStates[e].push({resolve:r,reject:n}),window.callbackMappedToRenewStates[e]||(window.callbackMappedToRenewStates[e]=function(r,n){window.activeRenewals[t]=null;for(var i=0;i<window.promiseMappedToRenewStates[e].length;++i)try{if(n)window.promiseMappedToRenewStates[e][i].reject(n);else{if(!r)throw o.cacheStorage.resetTempCacheItems(e),wn.createUnexpectedError("Error and response are both null");window.promiseMappedToRenewStates[e][i].resolve(r)}}catch(e){o.logger.warning(e)}window.promiseMappedToRenewStates[e]=null,window.callbackMappedToRenewStates[e]=null})},e.prototype.logout=function(e){this.logger.verbose("Logout has been called"),this.logoutAsync(e)},e.prototype.logoutAsync=function(e){return Yr(this,void 0,void 0,(function(){var t,r,n,o,i,a;return Zr(this,(function(s){switch(s.label){case 0:t=e||tn.createNewGuid(),r=this.telemetryManager.createAndStartApiEvent(t,qi.Logout),this.clearCache(),this.account=null,s.label=1;case 1:return s.trys.push([1,5,,6]),this.authorityInstance.hasCachedMetadata()?[3,3]:(this.logger.verbose("No cached metadata for authority"),[4,pi.saveMetadataFromNetwork(this.authorityInstance,this.telemetryManager,e)]);case 2:return s.sent(),[3,4];case 3:this.logger.verbose("Cached metadata found for authority"),s.label=4;case 4:return n="client-request-id="+t,o=void 0,this.getPostLogoutRedirectUri()?(o="&post_logout_redirect_uri="+encodeURIComponent(this.getPostLogoutRedirectUri()),this.logger.verbose("redirectUri found and set")):(o="",this.logger.verbose("No redirectUri set for app. postLogoutQueryParam is empty")),i=void 0,this.authorityInstance.EndSessionEndpoint?(i=this.authorityInstance.EndSessionEndpoint+"?"+n+o,this.logger.verbose("EndSessionEndpoint found and urlNavigate set"),this.logger.verbosePii("urlNavigate set to: "+this.authorityInstance.EndSessionEndpoint)):(i=this.authority+"oauth2/v2.0/logout?"+n+o,this.logger.verbose("No endpoint, urlNavigate set to default")),this.telemetryManager.stopAndFlushApiEvent(t,r,!0),this.logger.verbose("Navigating window to urlNavigate"),this.navigateWindow(i),[3,6];case 5:return a=s.sent(),this.telemetryManager.stopAndFlushApiEvent(t,r,!1,a.errorCode),[3,6];case 6:return[2]}}))}))},e.prototype.clearCache=function(){this.logger.verbose("Clearing cache"),window.renewStates=[];for(var e=this.cacheStorage.getAllTokens(rn.clientId,rn.homeAccountIdentifier),t=0;t<e.length;t++)this.cacheStorage.removeItem(JSON.stringify(e[t].key));this.cacheStorage.resetCacheItems(),this.cacheStorage.clearMsalCookie(),this.logger.verbose("Cache cleared")},e.prototype.clearCacheForScope=function(e){this.logger.verbose("Clearing access token from cache");for(var t=this.cacheStorage.getAllAccessTokens(rn.clientId,rn.homeAccountIdentifier),r=0;r<t.length;r++){var n=t[r];n.value.accessToken===e&&(this.cacheStorage.removeItem(JSON.stringify(n.key)),this.logger.verbosePii("Access token removed: "+n.key))}},e.prototype.isCallback=function(e){return this.logger.info("isCallback will be deprecated in favor of urlContainsHash in MSAL.js v2.0."),this.logger.verbose("isCallback has been called"),Go.urlContainsHash(e)},e.prototype.processCallBack=function(e,t,r){var n,o;this.logger.info("ProcessCallBack has been called. Processing callback from redirect response"),t||(this.logger.verbose("StateInfo is null, getting stateInfo from hash"),t=this.getResponseState(e));try{n=this.saveTokenFromHash(e,t)}catch(e){o=e}try{this.cacheStorage.clearMsalCookie(t.state);var i=this.getAccountState(t.state);if(n){if(t.requestType===rn.renewToken||n.accessToken?(window.parent!==window?this.logger.verbose("Window is in iframe, acquiring token silently"):this.logger.verbose("Acquiring token interactive in progress"),this.logger.verbose("Response tokenType set to "+en.ACCESS_TOKEN),n.tokenType=en.ACCESS_TOKEN):t.requestType===rn.login&&(this.logger.verbose("Response tokenType set to "+en.ID_TOKEN),n.tokenType=en.ID_TOKEN),!r)return this.logger.verbose("Setting redirectResponse"),void(this.redirectResponse=n)}else if(!r)return this.logger.verbose("Response is null, setting redirectResponse with state"),this.redirectResponse=Oi(i),this.redirectError=o,void this.cacheStorage.resetTempCacheItems(t.state);this.logger.verbose("Calling callback provided to processCallback"),r(n,o)}catch(e){throw this.logger.error("Error occurred in token received callback function: "+e),co.createErrorInCallbackFunction(e.toString())}},e.prototype.handleAuthenticationResponse=function(e){this.logger.verbose("HandleAuthenticationResponse has been called");var t=e||window.location.hash,r=this.getResponseState(t);this.logger.verbose("Obtained state from response");var n=window.callbackMappedToRenewStates[r.state];this.processCallBack(t,r,n)},e.prototype.handleRedirectAuthenticationResponse=function(e){this.logger.info("Returned from redirect url"),this.logger.verbose("HandleRedirectAuthenticationResponse has been called"),ui.clearUrlFragment(),this.logger.verbose("Window.location.hash cleared");var t=this.getResponseState(e);if(this.config.auth.navigateToLoginRequestUrl&&window.parent===window){this.logger.verbose("Window.parent is equal to window, not in popup or iframe. Navigation to login request url after login turned on");var r=this.cacheStorage.getItem(si.generateTemporaryCacheKey(nn.LOGIN_REQUEST,t.state),this.inCookie);if(!r||"null"===r)return this.logger.error("Unable to get valid login request url from cache, redirecting to home page"),void window.location.assign("/");this.logger.verbose("Valid login request url obtained from cache");var n=Go.removeHashFromUrl(window.location.href),o=Go.removeHashFromUrl(r);if(n!==o)return this.logger.verbose("Current url is not login request url, navigating"),this.logger.verbosePii("CurrentUrl: "+n+", finalRedirectUrl: "+o),void window.location.assign(""+o+e);this.logger.verbose("Current url matches login request url");var i=Go.GetUrlComponents(r);i.Hash&&(this.logger.verbose("Login request url contains hash, resetting non-msal hash"),window.location.hash=i.Hash)}else this.config.auth.navigateToLoginRequestUrl||this.logger.verbose("Default navigation to start page after login turned off");this.processCallBack(e,t,null)},e.prototype.getResponseState=function(e){this.logger.verbose("GetResponseState has been called");var t,r=Go.deserializeHash(e);if(!r)throw wn.createUnexpectedError("Hash was not parsed correctly.");if(!r.hasOwnProperty(en.STATE))throw wn.createUnexpectedError("Hash does not contain state.");this.logger.verbose("Hash contains state. Creating stateInfo object");var n=ai.parseLibraryState(r.state);if((t={requestType:rn.unknown,state:r.state,timestamp:n.ts,method:n.method,stateMatch:!1}).state===this.cacheStorage.getItem(si.generateTemporaryCacheKey(nn.STATE_LOGIN,t.state),this.inCookie)||t.state===this.silentAuthenticationState)return this.logger.verbose("State matches cached state, setting requestType to login"),t.requestType=rn.login,t.stateMatch=!0,t;if(t.state===this.cacheStorage.getItem(si.generateTemporaryCacheKey(nn.STATE_ACQ_TOKEN,t.state),this.inCookie))return this.logger.verbose("State matches cached state, setting requestType to renewToken"),t.requestType=rn.renewToken,t.stateMatch=!0,t;if(!t.stateMatch){this.logger.verbose("State does not match cached state, setting requestType to type from window"),t.requestType=window.requestType;for(var o=window.renewStates,i=0;i<o.length;i++)if(o[i]===t.state){this.logger.verbose("Matching state found for request"),t.stateMatch=!0;break}t.stateMatch||this.logger.verbose("Matching state not found for request")}return t},e.prototype.getCachedToken=function(e,t){this.logger.verbose("GetCachedToken has been called");var r=e.scopes,n=this.getCachedIdToken(e,t),o=this.getCachedAccessToken(e,t,r),i=this.getAccountState(e.state);return li.buildAuthResponse(n,o,e,t,r,i)},e.prototype.getTokenCacheItemByAuthority=function(e,t,r,n){var o,i=this;return 1===(o=Go.isCommonAuthority(e)||Go.isOrganizationsAuthority(e)||Go.isConsumersAuthority(e)?sa.filterTokenCacheItemsByDomain(t,Go.GetUrlComponents(e).HostNameAndPort):sa.filterTokenCacheItemsByAuthority(t,e)).length?o[0]:o.length>1?(this.logger.warning("Multiple matching tokens found. Cleaning cache and requesting a new token."),o.forEach((function(e){i.cacheStorage.removeItem(JSON.stringify(e.key))})),null):(this.logger.verbose("No matching tokens of type "+n+" found"),null)},e.prototype.getCachedIdToken=function(e,t){this.logger.verbose("Getting all cached tokens of type ID Token");var r=this.cacheStorage.getAllIdTokens(this.clientId,t?t.homeAccountIdentifier:null),n=e.authority||this.authority,o=this.getTokenCacheItemByAuthority(n,r,null,en.ID_TOKEN);if(o){if(this.logger.verbose("Evaluating ID token found"),this.evaluateTokenExpiration(o)){this.logger.verbose("ID token expiration is within offset, using ID token found in cache");var i=o.value;return i?this.logger.verbose("ID Token found in cache is valid and unexpired"):this.logger.verbose("ID Token found in cache is invalid"),i?new ni(i.idToken):null}return this.logger.verbose("Cached ID token is expired, removing from cache"),this.cacheStorage.removeItem(JSON.stringify(o.key)),null}return this.logger.verbose("No tokens found"),null},e.prototype.getCachedAccessToken=function(e,t,r){this.logger.verbose("Getting all cached tokens of type Access Token");var n=this.cacheStorage.getAllAccessTokens(this.clientId,t?t.homeAccountIdentifier:null),o=sa.filterTokenCacheItemsByScope(n,r),i=e.authority||this.authority,a=this.getTokenCacheItemByAuthority(i,o,r,en.ACCESS_TOKEN);if(a){if(e.authorityInstance=pi.CreateInstance(a.key.authority,this.config.auth.validateAuthority),this.logger.verbose("Evaluating access token found"),this.evaluateTokenExpiration(a)){if(this.logger.verbose("Access token expiration is within offset, using access token found in cache"),!t&&!(t=this.getAccount()))throw wn.createUnexpectedError("Account should not be null here.");var s=this.getAccountState(e.state);return{uniqueId:"",tenantId:"",tokenType:en.ACCESS_TOKEN,idToken:null,idTokenClaims:null,accessToken:a.value.accessToken,scopes:a.key.scopes.split(" "),expiresOn:new Date(1e3*Number(a.value.expiresIn)),account:t,accountState:s,fromCache:!0}}return this.logger.verbose("Access token expired, removing from cache"),this.cacheStorage.removeItem(JSON.stringify(a.key)),null}return this.logger.verbose("No matching token found when filtering by scope and authority"),null},e.prototype.evaluateTokenExpiration=function(e){var t=Number(e.value.expiresIn);return ri.validateExpirationIsWithinOffset(t,this.config.system.tokenRenewalOffsetSeconds)},e.prototype.extractADALIdToken=function(){this.logger.verbose("ExtractADALIdToken has been called");var e=this.cacheStorage.getItem(rn.adalIdToken);return Sn.isEmpty(e)?null:ri.extractIdToken(e)},e.prototype.renewToken=function(e,t,r,n,o){this.logger.verbose("RenewToken has been called"),this.logger.verbosePii("RenewToken scope and authority: "+e);var i=ui.generateFrameName("msalRenewFrame",e);ui.addHiddenIFrame(i,this.logger),this.updateCacheEntries(o,n,!1),this.logger.verbosePii("RenewToken expected state: "+o.state);var a=Go.urlRemoveQueryStringParameter(Go.createNavigateUrl(o),rn.prompt)+rn.prompt_none+rn.response_mode_fragment;window.renewStates.push(o.state),window.requestType=rn.renewToken,this.logger.verbose("Set window.renewState and requestType"),this.registerCallback(o.state,e,t,r),this.logger.infoPii("Navigate to: "+a),this.loadIframeTimeout(a,i,e).catch((function(e){return r(e)}))},e.prototype.renewIdToken=function(e,t,r,n,o){this.logger.info("RenewIdToken has been called");var i=ui.generateFrameName("msalIdTokenFrame",e);ui.addHiddenIFrame(i,this.logger),this.updateCacheEntries(o,n,!1),this.logger.verbose("RenewIdToken expected state: "+o.state);var a=Go.urlRemoveQueryStringParameter(Go.createNavigateUrl(o),rn.prompt)+rn.prompt_none+rn.response_mode_fragment;this.silentLogin?(this.logger.verbose("Silent login is true, set silentAuthenticationState"),window.requestType=rn.login,this.silentAuthenticationState=o.state):(this.logger.verbose("Not silent login, set window.renewState and requestType"),window.requestType=rn.renewToken,window.renewStates.push(o.state)),this.registerCallback(o.state,e,t,r),this.logger.infoPii('Navigate to:" '+a),this.loadIframeTimeout(a,i,e).catch((function(e){return r(e)}))},e.prototype.saveToken=function(e,t,r,n,o){var i=new Ko(t,this.clientId,r,n.uid,n.utid),a=new Wo(e.accessToken,e.idToken.rawIdToken,o.toString(),n.encodeClientInfo());return this.cacheStorage.setItem(JSON.stringify(i),JSON.stringify(a)),o?(this.logger.verbose("New expiration set for token"),e.expiresOn=new Date(1e3*o)):this.logger.error("Could not parse expiresIn parameter for access token"),e},e.prototype.saveIdToken=function(e,t,r,n,o){this.logger.verbose("SaveIdToken has been called");var i=Xr({},e);i.scopes=rn.oidcScopes,i.accessToken=r[en.ID_TOKEN];var a=Number(o.expiration);return this.logger.verbose("Saving ID token to cache"),this.saveToken(i,t,void 0,n,a)},e.prototype.saveAccessToken=function(e,t,r,n){this.logger.verbose("SaveAccessToken has been called");var o=Xr({},e),i=r[en.SCOPE],a=i.split(" "),s=this.cacheStorage.getAllAccessTokens(this.clientId,t);this.logger.verbose("Retrieving all access tokens from cache and removing duplicates");for(var c=0;c<s.length;c++){var u=s[c];if(u.key.homeAccountIdentifier===e.account.homeAccountIdentifier){var l=u.key.scopes.split(" ");Bo.isIntersectingScopes(l,a)&&this.cacheStorage.removeItem(JSON.stringify(u.key))}}o.accessToken=r[en.ACCESS_TOKEN],o.scopes=a;var p=ti.parseExpiresIn(r[en.EXPIRES_IN]),d=ai.parseLibraryState(r[en.STATE]).ts+p;return this.logger.verbose("Saving access token to cache"),this.saveToken(o,t,i,n,d)},e.prototype.saveTokenFromHash=function(e,t){this.logger.verbose("SaveTokenFromHash has been called"),this.logger.info("State status: "+t.stateMatch+"; Request type: "+t.requestType);var r,n={uniqueId:"",tenantId:"",tokenType:"",idToken:null,idTokenClaims:null,accessToken:null,scopes:[],expiresOn:null,account:null,accountState:"",fromCache:!1},o=Go.deserializeHash(e),i="",a="",s=null;if(o.hasOwnProperty(en.ERROR_DESCRIPTION)||o.hasOwnProperty(en.ERROR)){if(this.logger.verbose("Server returned an error"),this.logger.infoPii("Error : "+o[en.ERROR]+"; Error description: "+o[en.ERROR_DESCRIPTION]),this.cacheStorage.setItem(an.ERROR,o[en.ERROR]),this.cacheStorage.setItem(an.ERROR_DESC,o[en.ERROR_DESCRIPTION]),t.requestType===rn.login&&(this.logger.verbose("RequestType is login, caching login error, generating authorityKey"),this.cacheStorage.setItem(an.LOGIN_ERROR,o[en.ERROR_DESCRIPTION]+":"+o[en.ERROR]),i=si.generateAuthorityKey(t.state)),t.requestType===rn.renewToken){this.logger.verbose("RequestType is renewToken, generating acquireTokenAccountKey"),i=si.generateAuthorityKey(t.state);var c=this.getAccount(),u=void 0;c&&!Sn.isEmpty(c.homeAccountIdentifier)?(u=c.homeAccountIdentifier,this.logger.verbose("AccountId is set")):(u=rn.no_account,this.logger.verbose("AccountId is set as no_account")),a=si.generateAcquireTokenAccountKey(u,t.state)}var l=o[en.ERROR],p=o[en.ERROR_DESCRIPTION];r=Ii.isInteractionRequiredError(l)||Ii.isInteractionRequiredError(p)?new Ii(o[en.ERROR],o[en.ERROR_DESCRIPTION]):new wi(o[en.ERROR],o[en.ERROR_DESCRIPTION])}else if(this.logger.verbose("Server returns success"),t.stateMatch){this.logger.info("State is right"),o.hasOwnProperty(en.SESSION_STATE)&&(this.logger.verbose("Fragment has session state, caching"),this.cacheStorage.setItem(si.generateTemporaryCacheKey(nn.SESSION_STATE,t.state),o[en.SESSION_STATE])),n.accountState=this.getAccountState(t.state);var d=void 0;if(o.hasOwnProperty(en.ACCESS_TOKEN)){this.logger.info("Fragment has access token"),n.accessToken=o[en.ACCESS_TOKEN],o.hasOwnProperty(en.SCOPE)&&(n.scopes=o[en.SCOPE].split(" ")),o.hasOwnProperty(en.ID_TOKEN)?(this.logger.verbose("Fragment has id_token"),s=new ni(o[en.ID_TOKEN])):(this.logger.verbose("No idToken on fragment, getting idToken from cache"),s=new ni(this.cacheStorage.getItem(on.IDTOKEN))),n=li.setResponseIdToken(n,s);var h=this.populateAuthority(t.state,this.inCookie,this.cacheStorage,s);this.logger.verbose("Got authority from cache"),o.hasOwnProperty(en.CLIENT_INFO)?(this.logger.verbose("Fragment has clientInfo"),d=new ei(o[en.CLIENT_INFO],h)):this.authorityInstance.AuthorityType===dn.Adfs?d=ei.createClientInfoFromIdToken(s,h):this.logger.warning("ClientInfo not received in the response from AAD"),n.account=ci.createAccount(s,d),this.logger.verbose("Account object created from response");var f=void 0;n.account&&!Sn.isEmpty(n.account.homeAccountIdentifier)?(this.logger.verbose("AccountKey set"),f=n.account.homeAccountIdentifier):(this.logger.verbose("AccountKey set as no_account"),f=rn.no_account),a=si.generateAcquireTokenAccountKey(f,t.state);var y=si.generateAcquireTokenAccountKey(rn.no_account,t.state);this.logger.verbose("AcquireTokenAccountKey generated");var g=this.cacheStorage.getItem(a),m=void 0;Sn.isEmpty(g)?Sn.isEmpty(this.cacheStorage.getItem(y))||(this.logger.verbose("No acquireToken account retrieved from cache"),n=this.saveAccessToken(n,h,o,d)):(m=JSON.parse(g),this.logger.verbose("AcquireToken request account retrieved from cache"),n.account&&m&&ci.compareAccounts(n.account,m)?(n=this.saveAccessToken(n,h,o,d),this.logger.info("The user object received in the response is the same as the one passed in the acquireToken request")):this.logger.warning("The account object created from the response is not the same as the one passed in the acquireToken request"))}if(o.hasOwnProperty(en.ID_TOKEN))if(this.logger.info("Fragment has idToken"),s=new ni(o[en.ID_TOKEN]),h=this.populateAuthority(t.state,this.inCookie,this.cacheStorage,s),n=li.setResponseIdToken(n,s),o.hasOwnProperty(en.CLIENT_INFO)?(this.logger.verbose("Fragment has clientInfo"),d=new ei(o[en.CLIENT_INFO],h)):this.authorityInstance.AuthorityType===dn.Adfs?d=ei.createClientInfoFromIdToken(s,h):this.logger.warning("ClientInfo not received in the response from AAD"),this.account=ci.createAccount(s,d),n.account=this.account,this.logger.verbose("Account object created from response"),s&&s.nonce){this.logger.verbose("IdToken has nonce");var v=this.cacheStorage.getItem(si.generateTemporaryCacheKey(nn.NONCE_IDTOKEN,t.state),this.inCookie);s.nonce!==v?(this.account=null,this.cacheStorage.setItem(an.LOGIN_ERROR,"Nonce Mismatch. Expected Nonce: "+v+",Actual Nonce: "+s.nonce),this.logger.error("Nonce Mismatch. Expected Nonce: "+v+", Actual Nonce: "+s.nonce),r=co.createNonceMismatchError(v,s.nonce)):(this.logger.verbose("Nonce matches, saving idToken to cache"),this.cacheStorage.setItem(on.IDTOKEN,o[en.ID_TOKEN],this.inCookie),this.cacheStorage.setItem(on.CLIENT_INFO,d.encodeClientInfo(),this.inCookie),this.saveIdToken(n,h,o,d,s))}else this.logger.verbose("No idToken or no nonce. Cache key for Authority set as state"),i=t.state,a=t.state,this.logger.error("Invalid id_token received in the response"),r=co.createInvalidIdTokenError(s),this.cacheStorage.setItem(an.ERROR,r.errorCode),this.cacheStorage.setItem(an.ERROR_DESC,r.errorMessage)}else{this.logger.verbose("State mismatch"),i=t.state,a=t.state;var b=this.cacheStorage.getItem(si.generateTemporaryCacheKey(nn.STATE_LOGIN,t.state),this.inCookie);this.logger.error("State Mismatch. Expected State: "+b+", Actual State: "+t.state),r=co.createInvalidStateError(t.state,b),this.cacheStorage.setItem(an.ERROR,r.errorCode),this.cacheStorage.setItem(an.ERROR_DESC,r.errorMessage)}if(this.cacheStorage.removeItem(si.generateTemporaryCacheKey(nn.RENEW_STATUS,t.state)),this.cacheStorage.resetTempCacheItems(t.state),this.logger.verbose("Status set to complete, temporary cache cleared"),this.inCookie&&(this.logger.verbose("InCookie is true, setting authorityKey in cookie"),this.cacheStorage.setItemCookie(i,"",-1),this.cacheStorage.clearMsalCookie(t.state)),r)throw r;if(!n)throw wn.createUnexpectedError("Response is null");return n},e.prototype.populateAuthority=function(e,t,r,n){this.logger.verbose("PopulateAuthority has been called");var o=si.generateAuthorityKey(e),i=r.getItem(o,t);return Sn.isEmpty(i)?i:Go.replaceTenantPath(i,n.tenantId)},e.prototype.getAccount=function(){if(this.account)return this.account;var e=this.cacheStorage.getItem(on.IDTOKEN,this.inCookie),t=this.cacheStorage.getItem(on.CLIENT_INFO,this.inCookie);if(!Sn.isEmpty(e)&&!Sn.isEmpty(t)){var r=new ni(e),n=new ei(t,"");return this.account=ci.createAccount(r,n),this.account}return null},e.prototype.getAccountState=function(e){if(e){var t=e.indexOf(rn.resourceDelimiter);if(t>-1&&t+1<e.length)return e.substring(t+1)}return e},e.prototype.getAllAccounts=function(){for(var e=[],t=this.cacheStorage.getAllAccessTokens(rn.clientId,rn.homeAccountIdentifier),r=0;r<t.length;r++){var n=new ni(t[r].value.idToken),o=new ei(t[r].value.homeAccountIdentifier,""),i=ci.createAccount(n,o);e.push(i)}return this.getUniqueAccounts(e)},e.prototype.getUniqueAccounts=function(e){if(!e||e.length<=1)return e;for(var t=[],r=[],n=0;n<e.length;++n)e[n].homeAccountIdentifier&&-1===t.indexOf(e[n].homeAccountIdentifier)&&(t.push(e[n].homeAccountIdentifier),r.push(e[n]));return r},e.prototype.broadcast=function(e,t){var r=new CustomEvent(e,{detail:t});window.dispatchEvent(r)},e.prototype.getCachedTokenInternal=function(e,t,r,n){var o=t||this.getAccount();if(!o)return null;var i=this.authorityInstance?this.authorityInstance:pi.CreateInstance(this.authority,this.config.auth.validateAuthority),a=this.getTokenType(o,e),s=new Qo(i,this.clientId,a,this.getRedirectUri(),e,r,n);return this.getCachedToken(s,t)},e.prototype.getScopesForEndpoint=function(e){if(this.config.framework.unprotectedResources.length>0)for(var t=0;t<this.config.framework.unprotectedResources.length;t++)if(e.indexOf(this.config.framework.unprotectedResources[t])>-1)return null;if(this.config.framework.protectedResourceMap.size>0)for(var r=0,n=Array.from(this.config.framework.protectedResourceMap.keys());r<n.length;r++){var o=n[r];if(e.indexOf(o)>-1)return this.config.framework.protectedResourceMap.get(o)}return e.indexOf("http://")>-1||e.indexOf("https://")>-1?Go.getHostFromUri(e)===Go.getHostFromUri(this.getRedirectUri())?new Array(this.clientId):null:new Array(this.clientId)},e.prototype.getLoginInProgress=function(){return this.cacheStorage.getItem(nn.INTERACTION_STATUS)===rn.inProgress},e.prototype.setInteractionInProgress=function(e){e?this.cacheStorage.setItem(nn.INTERACTION_STATUS,rn.inProgress):this.cacheStorage.removeItem(nn.INTERACTION_STATUS)},e.prototype.setloginInProgress=function(e){this.setInteractionInProgress(e)},e.prototype.getAcquireTokenInProgress=function(){return this.cacheStorage.getItem(nn.INTERACTION_STATUS)===rn.inProgress},e.prototype.setAcquireTokenInProgress=function(e){this.setInteractionInProgress(e)},e.prototype.getLogger=function(){return this.logger},e.prototype.setLogger=function(e){this.logger=e},e.prototype.getRedirectUri=function(e){return e||("function"==typeof this.config.auth.redirectUri?this.config.auth.redirectUri():this.config.auth.redirectUri)},e.prototype.getPostLogoutRedirectUri=function(){return"function"==typeof this.config.auth.postLogoutRedirectUri?this.config.auth.postLogoutRedirectUri():this.config.auth.postLogoutRedirectUri},e.prototype.getCurrentConfiguration=function(){if(!this.config)throw Vo.createNoSetConfigurationError();return this.config},e.prototype.getTokenType=function(e,t){var r=ci.compareAccounts(e,this.getAccount());return Qo.determineResponseType(r,t)},e.prototype.setAccountCache=function(e,t){var r=e?this.getAccountId(e):rn.no_account,n=si.generateAcquireTokenAccountKey(r,t);this.cacheStorage.setItem(n,JSON.stringify(e))},e.prototype.setAuthorityCache=function(e,t){var r=si.generateAuthorityKey(e);this.cacheStorage.setItem(r,Go.CanonicalizeUri(t),this.inCookie)},e.prototype.updateCacheEntries=function(e,t,r,n){n&&this.cacheStorage.setItem(si.generateTemporaryCacheKey(nn.LOGIN_REQUEST,e.state),n,this.inCookie),r?this.cacheStorage.setItem(si.generateTemporaryCacheKey(nn.STATE_LOGIN,e.state),e.state,this.inCookie):this.setAccountCache(t,e.state),this.setAuthorityCache(e.state,e.authority),this.cacheStorage.setItem(si.generateTemporaryCacheKey(nn.NONCE_IDTOKEN,e.state),e.nonce,this.inCookie)},e.prototype.getAccountId=function(e){return Sn.isEmpty(e.homeAccountIdentifier)?rn.no_account:e.homeAccountIdentifier},e.prototype.buildIDTokenRequest=function(e){return{scopes:rn.oidcScopes,authority:this.authority,account:this.getAccount(),extraQueryParameters:e.extraQueryParameters,correlationId:e.correlationId}},e.prototype.getTelemetryManagerFromConfig=function(e,t){if(!e)return aa.getTelemetrymanagerStub(t,this.logger);var r=e.applicationName,n=e.applicationVersion,o=e.telemetryEmitter;if(!r||!n||!o)throw Vo.createTelemetryConfigError(e);return new aa({platform:{applicationName:r,applicationVersion:n},clientId:t},o,this.logger)},e}(),ua=r(129),la=r.n(ua);Error;const pa="AuthenticationError";class da extends Error{constructor(e,t){let r={error:"unknown",errorDescription:"An unknown error occurred and no additional details are available."};if(function(e){return e&&"string"==typeof e.error&&"string"==typeof e.error_description}(t))r=ha(t);else if("string"==typeof t)try{r=ha(JSON.parse(t))}catch(n){r=400===e?{error:"authority_not_found",errorDescription:"The specified authority URL was not found."}:{error:"unknown_error",errorDescription:`An unknown error has occurred. Response body:\n\n${t}`}}else r={error:"unknown_error",errorDescription:"An unknown error occurred and no additional details are available."};super(`${r.error}(status code ${e}).\nMore details:\n${r.errorDescription}`),this.statusCode=e,this.errorResponse=r,this.name=pa}}function ha(e){return{error:e.error,errorDescription:e.error_description,correlationId:e.correlation_id,errorCodes:e.error_codes,timestamp:e.timestamp,traceId:e.trace_id}}Error;const fa=ir({packagePrefix:"Azure.Identity",namespace:"Microsoft.AAD"}),ya=ve("identity");function ga(e,t){let r="ERROR.";return(null==e?void 0:e.length)&&(r+=` Scopes: ${Array.isArray(e)?e.join(", "):e}.`),`${r} Error message: ${"string"==typeof t?t:t.message}.`}function ma(e,t,r=ya){const n=t?`${t.fullTitle} ${e}`:e;return{title:e,fullTitle:n,info:function(e){r.info(`${n} =>`,e)}}}const va=new Error("getAuthorityHostEnvironment is not supported in the browser."),ba="https://login.microsoftonline.com";class wa extends Sr{constructor(e){if(C&&(e=e||function(){throw va}()),e=e||wa.getDefaultOptions(),super(void 0,function(e,t){var r=[];e.sendStreamingJson&&r.push({create:function(e,t){return new ur(e,t)}});var n=void 0;if(e.userAgentOptions&&e.userAgentOptions.userAgentPrefix){var o=[];o.push(e.userAgentOptions.userAgentPrefix);var i=Tt();-1===o.indexOf(i)&&o.push(i),n=o.join(" ")}var a=s(s({},$t),e.keepAliveOptions),c=s(s({},dt),e.retryOptions),u=s(s({},At),e.redirectOptions);C&&r.push(zt(e.proxyOptions));var l,p=s(s({},ot),e.deserializationOptions),d=s({},e.loggingOptions);return r.push((void 0===(l={userAgent:n})&&(l={}),{create:function(e,t){return new sr(e,t,l)}}),function(e){return{create:function(t,r){return new Qt(t,r,e||$t)}}}(a),It({value:n}),yt(),et(p.expectedContentTypes),Vt(),Mt(),pt(c.maxRetries,c.retryDelayInMs,c.maxRetryDelayInMs)),u.handleRedirects&&r.push(Pt(u.maxRetries)),t&&r.push(t),r.push(Le(d)),C&&!1===e.decompressResponse&&r.push({create:function(e,t){throw cr}}),{httpClient:e.httpClient,requestPolicyFactories:r}}(Object.assign(Object.assign({},e),{deserializationOptions:{expectedContentTypes:{json:["application/json","text/json","text/plain"]}}}))),this.baseUri=this.authorityHost=e.authorityHost||ba,!this.baseUri.startsWith("https:"))throw new Error("The authorityHost address must use the 'https' protocol.")}createWebResource(e){const t=new Ut;return t.prepare(e),t}sendTokenRequest(e,t){return c(this,void 0,void 0,(function*(){ya.info(`IdentityClient: sending token request to [${e.url}]`);const r=yield this.sendRequest(e);if(t=t||(e=>Date.now()+1e3*e.expires_in),200===r.status||201===r.status){const n={accessToken:{token:r.parsedBody.access_token,expiresOnTimestamp:t(r.parsedBody)},refreshToken:r.parsedBody.refresh_token};return ya.info(`IdentityClient: [${e.url}] token acquired, expires on ${n.accessToken.expiresOnTimestamp}`),n}{const e=new da(r.status,r.parsedBody||r.bodyAsText);throw ya.warning(`IdentityClient: authentication error. HTTP status: ${r.status}, ${e.errorResponse.errorDescription}`),e}}))}refreshAccessToken(e,t,r,n,o,i,a){return c(this,void 0,void 0,(function*(){if(void 0===n)return null;ya.info(`IdentityClient: refreshing access token with client ID: ${t}, scopes: ${r} started`);const{span:s,updatedOptions:c}=fa("IdentityClient-refreshAccessToken",a),u={grant_type:"refresh_token",client_id:t,refresh_token:n,scope:r};void 0!==o&&(u.client_secret=o);try{const r=function(e){return"adfs"===e?"oauth2/token":"oauth2/v2.0/token"}(e),n=this.createWebResource({url:`${this.authorityHost}/${e}/${r}`,method:"POST",disableJsonStringifyOnBody:!0,deserializationMapper:void 0,body:la().stringify(u),headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},spanOptions:c.tracingOptions&&c.tracingOptions.spanOptions,tracingContext:c.tracingOptions&&c.tracingOptions.tracingContext,abortSignal:a&&a.abortSignal}),o=yield this.sendTokenRequest(n,i);return ya.info(`IdentityClient: refreshed token for client ID: ${t}`),o}catch(e){if(e.name===pa&&"interaction_required"===e.errorResponse.error)return ya.info(`IdentityClient: interaction required for client ID: ${t}`),s.setStatus({code:nr.ERROR,message:e.message}),null;throw ya.warning(`IdentityClient: failed refreshing token for client ID: ${t}: ${e}`),s.setStatus({code:nr.ERROR,message:e.message}),e}finally{s.end()}}))}sendGetRequestAsync(e,t){const r=new Ut(e,"GET",null==t?void 0:t.body,{},null==t?void 0:t.headers);return this.sendRequest(r).then((e=>({body:e.parsedBody,headers:e.headers.rawHeaders(),status:e.status})))}sendPostRequestAsync(e,t){const r=new Ut(e,"POST",null==t?void 0:t.body,{},null==t?void 0:t.headers);return this.sendRequest(r).then((e=>({body:e.parsedBody,headers:e.headers.rawHeaders(),status:e.status})))}static getDefaultOptions(){return{authorityHost:ba}}}var Sa;!function(e){e.AzureChina="https://login.chinacloudapi.cn",e.AzureGermany="https://login.microsoftonline.de",e.AzureGovernment="https://login.microsoftonline.us",e.AzurePublicCloud="https://login.microsoftonline.com"}(Sa||(Sa={}));const Ea=function(e,t=ya){const r=ma("InteractiveBrowserCredential",void 0,t);return Object.assign(Object.assign({},r),{getToken:ma("=> getToken()",r,t)})}();class Ta{constructor(e){if(e=Object.assign(Object.assign(Object.assign({},wa.getDefaultOptions()),e),{tenantId:e&&e.tenantId||"common",clientId:e&&e.clientId||"04b07795-8ddb-461a-bbee-02f9e1bf7b46"}),this.loginStyle=e.loginStyle||"popup",-1===["redirect","popup"].indexOf(this.loginStyle)){const t=new Error(`Invalid loginStyle: ${e.loginStyle}`);throw Ea.info(ga("",t)),t}const t="adfs"===e.tenantId&&e.authorityHost?[e.authorityHost]:[];this.msalConfig={auth:Object.assign(Object.assign({clientId:e.clientId,authority:`${e.authorityHost}/${e.tenantId}`,knownAuthorities:t},e.redirectUri&&{redirectUri:e.redirectUri}),e.postLogoutRedirectUri&&{redirectUri:e.postLogoutRedirectUri}),cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!0}},this.msalObject=new ca(this.msalConfig)}login(){switch(this.loginStyle){case"redirect":{const e=new Promise(((e,t)=>{this.msalObject.handleRedirectCallback(e,t)}));return this.msalObject.loginRedirect(),e}case"popup":return this.msalObject.loginPopup()}}acquireToken(e){return c(this,void 0,void 0,(function*(){let t,r;try{Ea.info("Attempting to acquire token silently"),t=yield this.msalObject.acquireTokenSilent(e)}catch(t){if(t instanceof wn)switch(t.errorCode){case"consent_required":case"interaction_required":case"login_required":Ea.info(`Authentication returned errorCode ${t.errorCode}`);break;default:throw Ea.info(ga(e.scopes,`Failed to acquire token: ${t.message}`)),t}}if(void 0===t){switch(Ea.info(`Silent authentication failed, falling back to interactive method ${this.loginStyle}`),this.loginStyle){case"redirect":r=new Promise(((e,t)=>{this.msalObject.handleRedirectCallback(e,t)})),this.msalObject.acquireTokenRedirect(e);break;case"popup":r=this.msalObject.acquireTokenPopup(e)}t=r&&(yield r)}return t}))}getToken(e,t){return c(this,void 0,void 0,(function*(){const{span:r}=fa("InteractiveBrowserCredential-getToken",t);try{this.msalObject.getAccount()||(yield this.login());const t=yield this.acquireToken({scopes:Array.isArray(e)?e:e.split(",")});if(t){const r=t.expiresOn.getTime();return Ea.getToken.info((n=e,`SUCCESS. Scopes: ${Array.isArray(n)?n.join(", "):n}.`)),{token:t.accessToken,expiresOnTimestamp:r}}return Ea.getToken.info("No response"),null}catch(t){throw r.setStatus({code:nr.ERROR,message:t.message}),Ea.getToken.info(ga(e,t)),t}finally{r.end()}var n}))}}window.addEventListener("DOMContentLoaded",(()=>{document.getElementById("queryLogs").addEventListener("click",(()=>async function(){const e=new Ta,t=new $r(e);return await t.getMetricDefinitions("resourceUri")}()))}))})()})();